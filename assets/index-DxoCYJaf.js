function sv(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var jw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ov(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var av={exports:{}},Kc={},cv={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _o=Symbol.for("react.element"),Mw=Symbol.for("react.portal"),Fw=Symbol.for("react.fragment"),Uw=Symbol.for("react.strict_mode"),$w=Symbol.for("react.profiler"),Vw=Symbol.for("react.provider"),Bw=Symbol.for("react.context"),zw=Symbol.for("react.forward_ref"),Hw=Symbol.for("react.suspense"),Ww=Symbol.for("react.memo"),qw=Symbol.for("react.lazy"),ap=Symbol.iterator;function Kw(e){return e===null||typeof e!="object"?null:(e=ap&&e[ap]||e["@@iterator"],typeof e=="function"?e:null)}var lv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uv=Object.assign,dv={};function os(e,t,n){this.props=e,this.context=t,this.refs=dv,this.updater=n||lv}os.prototype.isReactComponent={};os.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};os.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fv(){}fv.prototype=os.prototype;function pf(e,t,n){this.props=e,this.context=t,this.refs=dv,this.updater=n||lv}var mf=pf.prototype=new fv;mf.constructor=pf;uv(mf,os.prototype);mf.isPureReactComponent=!0;var cp=Array.isArray,hv=Object.prototype.hasOwnProperty,gf={current:null},pv={key:!0,ref:!0,__self:!0,__source:!0};function mv(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)hv.call(t,r)&&!pv.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:_o,type:e,key:s,ref:o,props:i,_owner:gf.current}}function Gw(e,t){return{$$typeof:_o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vf(e){return typeof e=="object"&&e!==null&&e.$$typeof===_o}function Jw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var lp=/\/+/g;function Ll(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Jw(""+e.key):t.toString(36)}function ya(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case _o:case Mw:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Ll(o,0):r,cp(i)?(n="",e!=null&&(n=e.replace(lp,"$&/")+"/"),ya(i,t,n,"",function(c){return c})):i!=null&&(vf(i)&&(i=Gw(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(lp,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",cp(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+Ll(s,a);o+=ya(s,t,n,l,i)}else if(l=Kw(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+Ll(s,a++),o+=ya(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Bo(e,t,n){if(e==null)return e;var r=[],i=0;return ya(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Yw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _t={current:null},Sa={transition:null},Qw={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:Sa,ReactCurrentOwner:gf};function gv(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Bo,forEach:function(e,t,n){Bo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Bo(e,function(){t++}),t},toArray:function(e){return Bo(e,function(t){return t})||[]},only:function(e){if(!vf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Component=os;ue.Fragment=Fw;ue.Profiler=$w;ue.PureComponent=pf;ue.StrictMode=Uw;ue.Suspense=Hw;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qw;ue.act=gv;ue.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=uv({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=gf.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)hv.call(t,l)&&!pv.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:_o,type:e.type,key:i,ref:s,props:r,_owner:o}};ue.createContext=function(e){return e={$$typeof:Bw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Vw,_context:e},e.Consumer=e};ue.createElement=mv;ue.createFactory=function(e){var t=mv.bind(null,e);return t.type=e,t};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:zw,render:e}};ue.isValidElement=vf;ue.lazy=function(e){return{$$typeof:qw,_payload:{_status:-1,_result:e},_init:Yw}};ue.memo=function(e,t){return{$$typeof:Ww,type:e,compare:t===void 0?null:t}};ue.startTransition=function(e){var t=Sa.transition;Sa.transition={};try{e()}finally{Sa.transition=t}};ue.unstable_act=gv;ue.useCallback=function(e,t){return _t.current.useCallback(e,t)};ue.useContext=function(e){return _t.current.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e){return _t.current.useDeferredValue(e)};ue.useEffect=function(e,t){return _t.current.useEffect(e,t)};ue.useId=function(){return _t.current.useId()};ue.useImperativeHandle=function(e,t,n){return _t.current.useImperativeHandle(e,t,n)};ue.useInsertionEffect=function(e,t){return _t.current.useInsertionEffect(e,t)};ue.useLayoutEffect=function(e,t){return _t.current.useLayoutEffect(e,t)};ue.useMemo=function(e,t){return _t.current.useMemo(e,t)};ue.useReducer=function(e,t,n){return _t.current.useReducer(e,t,n)};ue.useRef=function(e){return _t.current.useRef(e)};ue.useState=function(e){return _t.current.useState(e)};ue.useSyncExternalStore=function(e,t,n){return _t.current.useSyncExternalStore(e,t,n)};ue.useTransition=function(){return _t.current.useTransition()};ue.version="18.3.1";cv.exports=ue;var C=cv.exports;const Xw=ov(C),Zw=sv({__proto__:null,default:Xw},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eC=C,tC=Symbol.for("react.element"),nC=Symbol.for("react.fragment"),rC=Object.prototype.hasOwnProperty,iC=eC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sC={key:!0,ref:!0,__self:!0,__source:!0};function vv(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)rC.call(t,r)&&!sC.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:tC,type:e,key:s,ref:o,props:i,_owner:iC.current}}Kc.Fragment=nC;Kc.jsx=vv;Kc.jsxs=vv;av.exports=Kc;var b=av.exports,ju={},yv={exports:{}},Xt={},Sv={exports:{}},bv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(x,R){var M=x.length;x.push(R);e:for(;0<M;){var J=M-1>>>1,oe=x[J];if(0<i(oe,R))x[J]=R,x[M]=oe,M=J;else break e}}function n(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var R=x[0],M=x.pop();if(M!==R){x[0]=M;e:for(var J=0,oe=x.length,We=oe>>>1;J<We;){var Y=2*(J+1)-1,te=x[Y],W=Y+1,Z=x[W];if(0>i(te,M))W<oe&&0>i(Z,te)?(x[J]=Z,x[W]=M,J=W):(x[J]=te,x[Y]=M,J=Y);else if(W<oe&&0>i(Z,M))x[J]=Z,x[W]=M,J=W;else break e}}return R}function i(x,R){var M=x.sortIndex-R.sortIndex;return M!==0?M:x.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,u=3,h=!1,m=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(x){for(var R=n(c);R!==null;){if(R.callback===null)r(c);else if(R.startTime<=x)r(c),R.sortIndex=R.expirationTime,t(l,R);else break;R=n(c)}}function w(x){if(p=!1,S(x),!m)if(n(l)!==null)m=!0,A(k);else{var R=n(c);R!==null&&q(w,R.startTime-x)}}function k(x,R){m=!1,p&&(p=!1,g(I),I=-1),h=!0;var M=u;try{for(S(R),f=n(l);f!==null&&(!(f.expirationTime>R)||x&&!B());){var J=f.callback;if(typeof J=="function"){f.callback=null,u=f.priorityLevel;var oe=J(f.expirationTime<=R);R=e.unstable_now(),typeof oe=="function"?f.callback=oe:f===n(l)&&r(l),S(R)}else r(l);f=n(l)}if(f!==null)var We=!0;else{var Y=n(c);Y!==null&&q(w,Y.startTime-R),We=!1}return We}finally{f=null,u=M,h=!1}}var E=!1,T=null,I=-1,U=5,O=-1;function B(){return!(e.unstable_now()-O<U)}function P(){if(T!==null){var x=e.unstable_now();O=x;var R=!0;try{R=T(!0,x)}finally{R?j():(E=!1,T=null)}}else E=!1}var j;if(typeof y=="function")j=function(){y(P)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,$=H.port2;H.port1.onmessage=P,j=function(){$.postMessage(null)}}else j=function(){v(P,0)};function A(x){T=x,E||(E=!0,j())}function q(x,R){I=v(function(){x(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(x){x.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,A(k))},e.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<x?Math.floor(1e3/x):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(x){switch(u){case 1:case 2:case 3:var R=3;break;default:R=u}var M=u;u=R;try{return x()}finally{u=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(x,R){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var M=u;u=x;try{return R()}finally{u=M}},e.unstable_scheduleCallback=function(x,R,M){var J=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?J+M:J):M=J,x){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=M+oe,x={id:d++,callback:R,priorityLevel:x,startTime:M,expirationTime:oe,sortIndex:-1},M>J?(x.sortIndex=M,t(c,x),n(l)===null&&x===n(c)&&(p?(g(I),I=-1):p=!0,q(w,M-J))):(x.sortIndex=oe,t(l,x),m||h||(m=!0,A(k))),x},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(x){var R=u;return function(){var M=u;u=R;try{return x.apply(this,arguments)}finally{u=M}}}})(bv);Sv.exports=bv;var oC=Sv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aC=C,Yt=oC;function L(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wv=new Set,Ys={};function ci(e,t){Ki(e,t),Ki(e+"Capture",t)}function Ki(e,t){for(Ys[e]=t,e=0;e<t.length;e++)wv.add(t[e])}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mu=Object.prototype.hasOwnProperty,cC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,up={},dp={};function lC(e){return Mu.call(dp,e)?!0:Mu.call(up,e)?!1:cC.test(e)?dp[e]=!0:(up[e]=!0,!1)}function uC(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function dC(e,t,n,r){if(t===null||typeof t>"u"||uC(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function It(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new It(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new It(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new It(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new It(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new It(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new It(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new It(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new It(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new It(e,5,!1,e.toLowerCase(),null,!1,!1)});var yf=/[\-:]([a-z])/g;function Sf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(yf,Sf);ot[t]=new It(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(yf,Sf);ot[t]=new It(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(yf,Sf);ot[t]=new It(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new It(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new It(e,1,!1,e.toLowerCase(),null,!0,!0)});function bf(e,t,n,r){var i=ot.hasOwnProperty(t)?ot[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(dC(t,n,i,r)&&(n=null),r||i===null?lC(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var rr=aC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zo=Symbol.for("react.element"),wi=Symbol.for("react.portal"),Ci=Symbol.for("react.fragment"),wf=Symbol.for("react.strict_mode"),Fu=Symbol.for("react.profiler"),Cv=Symbol.for("react.provider"),kv=Symbol.for("react.context"),Cf=Symbol.for("react.forward_ref"),Uu=Symbol.for("react.suspense"),$u=Symbol.for("react.suspense_list"),kf=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),Ev=Symbol.for("react.offscreen"),fp=Symbol.iterator;function vs(e){return e===null||typeof e!="object"?null:(e=fp&&e[fp]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,jl;function Os(e){if(jl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);jl=t&&t[1]||""}return`
`+jl+e}var Ml=!1;function Fl(e,t){if(!e||Ml)return"";Ml=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ml=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Os(e):""}function fC(e){switch(e.tag){case 5:return Os(e.type);case 16:return Os("Lazy");case 13:return Os("Suspense");case 19:return Os("SuspenseList");case 0:case 2:case 15:return e=Fl(e.type,!1),e;case 11:return e=Fl(e.type.render,!1),e;case 1:return e=Fl(e.type,!0),e;default:return""}}function Vu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ci:return"Fragment";case wi:return"Portal";case Fu:return"Profiler";case wf:return"StrictMode";case Uu:return"Suspense";case $u:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kv:return(e.displayName||"Context")+".Consumer";case Cv:return(e._context.displayName||"Context")+".Provider";case Cf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kf:return t=e.displayName||null,t!==null?t:Vu(e.type)||"Memo";case ar:t=e._payload,e=e._init;try{return Vu(e(t))}catch{}}return null}function hC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vu(t);case 8:return t===wf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ir(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pC(e){var t=Tv(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ho(e){e._valueTracker||(e._valueTracker=pC(e))}function xv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Tv(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ha(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bu(e,t){var n=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hp(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ir(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Rv(e,t){t=t.checked,t!=null&&bf(e,"checked",t,!1)}function zu(e,t){Rv(e,t);var n=Ir(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hu(e,t.type,n):t.hasOwnProperty("defaultValue")&&Hu(e,t.type,Ir(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function pp(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Hu(e,t,n){(t!=="number"||Ha(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ns=Array.isArray;function Di(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ir(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Wu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(L(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mp(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(L(92));if(Ns(n)){if(1<n.length)throw Error(L(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ir(n)}}function _v(e,t){var n=Ir(t.value),r=Ir(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function gp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Iv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Iv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Wo,Pv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Wo=Wo||document.createElement("div"),Wo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Wo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Qs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mC=["Webkit","ms","Moz","O"];Object.keys(Ms).forEach(function(e){mC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ms[t]=Ms[e]})});function Ov(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ms.hasOwnProperty(e)&&Ms[e]?(""+t).trim():t+"px"}function Nv(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ov(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var gC=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ku(e,t){if(t){if(gC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(L(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(L(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(L(61))}if(t.style!=null&&typeof t.style!="object")throw Error(L(62))}}function Gu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ju=null;function Ef(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yu=null,Li=null,ji=null;function vp(e){if(e=Oo(e)){if(typeof Yu!="function")throw Error(L(280));var t=e.stateNode;t&&(t=Xc(t),Yu(e.stateNode,e.type,t))}}function Av(e){Li?ji?ji.push(e):ji=[e]:Li=e}function Dv(){if(Li){var e=Li,t=ji;if(ji=Li=null,vp(e),t)for(e=0;e<t.length;e++)vp(t[e])}}function Lv(e,t){return e(t)}function jv(){}var Ul=!1;function Mv(e,t,n){if(Ul)return e(t,n);Ul=!0;try{return Lv(e,t,n)}finally{Ul=!1,(Li!==null||ji!==null)&&(jv(),Dv())}}function Xs(e,t){var n=e.stateNode;if(n===null)return null;var r=Xc(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var Qu=!1;if(Qn)try{var ys={};Object.defineProperty(ys,"passive",{get:function(){Qu=!0}}),window.addEventListener("test",ys,ys),window.removeEventListener("test",ys,ys)}catch{Qu=!1}function vC(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Fs=!1,Wa=null,qa=!1,Xu=null,yC={onError:function(e){Fs=!0,Wa=e}};function SC(e,t,n,r,i,s,o,a,l){Fs=!1,Wa=null,vC.apply(yC,arguments)}function bC(e,t,n,r,i,s,o,a,l){if(SC.apply(this,arguments),Fs){if(Fs){var c=Wa;Fs=!1,Wa=null}else throw Error(L(198));qa||(qa=!0,Xu=c)}}function li(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Fv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yp(e){if(li(e)!==e)throw Error(L(188))}function wC(e){var t=e.alternate;if(!t){if(t=li(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return yp(i),e;if(s===r)return yp(i),t;s=s.sibling}throw Error(L(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function Uv(e){return e=wC(e),e!==null?$v(e):null}function $v(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$v(e);if(t!==null)return t;e=e.sibling}return null}var Vv=Yt.unstable_scheduleCallback,Sp=Yt.unstable_cancelCallback,CC=Yt.unstable_shouldYield,kC=Yt.unstable_requestPaint,ze=Yt.unstable_now,EC=Yt.unstable_getCurrentPriorityLevel,Tf=Yt.unstable_ImmediatePriority,Bv=Yt.unstable_UserBlockingPriority,Ka=Yt.unstable_NormalPriority,TC=Yt.unstable_LowPriority,zv=Yt.unstable_IdlePriority,Gc=null,An=null;function xC(e){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(Gc,e,void 0,(e.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:IC,RC=Math.log,_C=Math.LN2;function IC(e){return e>>>=0,e===0?32:31-(RC(e)/_C|0)|0}var qo=64,Ko=4194304;function As(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ga(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=As(a):(s&=o,s!==0&&(r=As(s)))}else o=n&~i,o!==0?r=As(o):s!==0&&(r=As(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Sn(t),i=1<<n,r|=e[n],t&=~i;return r}function PC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OC(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Sn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=PC(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function Zu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hv(){var e=qo;return qo<<=1,!(qo&4194240)&&(qo=64),e}function $l(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Io(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sn(t),e[t]=n}function NC(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Sn(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function xf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Sn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ye=0;function Wv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var qv,Rf,Kv,Gv,Jv,ed=!1,Go=[],gr=null,vr=null,yr=null,Zs=new Map,eo=new Map,ur=[],AC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bp(e,t){switch(e){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":Zs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":eo.delete(t.pointerId)}}function Ss(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Oo(t),t!==null&&Rf(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function DC(e,t,n,r,i){switch(t){case"focusin":return gr=Ss(gr,e,t,n,r,i),!0;case"dragenter":return vr=Ss(vr,e,t,n,r,i),!0;case"mouseover":return yr=Ss(yr,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Zs.set(s,Ss(Zs.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,eo.set(s,Ss(eo.get(s)||null,e,t,n,r,i)),!0}return!1}function Yv(e){var t=Hr(e.target);if(t!==null){var n=li(t);if(n!==null){if(t=n.tag,t===13){if(t=Fv(n),t!==null){e.blockedOn=t,Jv(e.priority,function(){Kv(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ba(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=td(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ju=r,n.target.dispatchEvent(r),Ju=null}else return t=Oo(n),t!==null&&Rf(t),e.blockedOn=n,!1;t.shift()}return!0}function wp(e,t,n){ba(e)&&n.delete(t)}function LC(){ed=!1,gr!==null&&ba(gr)&&(gr=null),vr!==null&&ba(vr)&&(vr=null),yr!==null&&ba(yr)&&(yr=null),Zs.forEach(wp),eo.forEach(wp)}function bs(e,t){e.blockedOn===t&&(e.blockedOn=null,ed||(ed=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,LC)))}function to(e){function t(i){return bs(i,e)}if(0<Go.length){bs(Go[0],e);for(var n=1;n<Go.length;n++){var r=Go[n];r.blockedOn===e&&(r.blockedOn=null)}}for(gr!==null&&bs(gr,e),vr!==null&&bs(vr,e),yr!==null&&bs(yr,e),Zs.forEach(t),eo.forEach(t),n=0;n<ur.length;n++)r=ur[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ur.length&&(n=ur[0],n.blockedOn===null);)Yv(n),n.blockedOn===null&&ur.shift()}var Mi=rr.ReactCurrentBatchConfig,Ja=!0;function jC(e,t,n,r){var i=ye,s=Mi.transition;Mi.transition=null;try{ye=1,_f(e,t,n,r)}finally{ye=i,Mi.transition=s}}function MC(e,t,n,r){var i=ye,s=Mi.transition;Mi.transition=null;try{ye=4,_f(e,t,n,r)}finally{ye=i,Mi.transition=s}}function _f(e,t,n,r){if(Ja){var i=td(e,t,n,r);if(i===null)Yl(e,t,r,Ya,n),bp(e,r);else if(DC(i,e,t,n,r))r.stopPropagation();else if(bp(e,r),t&4&&-1<AC.indexOf(e)){for(;i!==null;){var s=Oo(i);if(s!==null&&qv(s),s=td(e,t,n,r),s===null&&Yl(e,t,r,Ya,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Yl(e,t,r,null,n)}}var Ya=null;function td(e,t,n,r){if(Ya=null,e=Ef(r),e=Hr(e),e!==null)if(t=li(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Fv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ya=e,null}function Qv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EC()){case Tf:return 1;case Bv:return 4;case Ka:case TC:return 16;case zv:return 536870912;default:return 16}default:return 16}}var hr=null,If=null,wa=null;function Xv(){if(wa)return wa;var e,t=If,n=t.length,r,i="value"in hr?hr.value:hr.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return wa=i.slice(e,1<r?1-r:void 0)}function Ca(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Jo(){return!0}function Cp(){return!1}function Zt(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Jo:Cp,this.isPropagationStopped=Cp,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jo)},persist:function(){},isPersistent:Jo}),t}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pf=Zt(as),Po=Le({},as,{view:0,detail:0}),FC=Zt(Po),Vl,Bl,ws,Jc=Le({},Po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Of,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ws&&(ws&&e.type==="mousemove"?(Vl=e.screenX-ws.screenX,Bl=e.screenY-ws.screenY):Bl=Vl=0,ws=e),Vl)},movementY:function(e){return"movementY"in e?e.movementY:Bl}}),kp=Zt(Jc),UC=Le({},Jc,{dataTransfer:0}),$C=Zt(UC),VC=Le({},Po,{relatedTarget:0}),zl=Zt(VC),BC=Le({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),zC=Zt(BC),HC=Le({},as,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),WC=Zt(HC),qC=Le({},as,{data:0}),Ep=Zt(qC),KC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=JC[e])?!!t[e]:!1}function Of(){return YC}var QC=Le({},Po,{key:function(e){if(e.key){var t=KC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ca(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?GC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Of,charCode:function(e){return e.type==="keypress"?Ca(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ca(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),XC=Zt(QC),ZC=Le({},Jc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tp=Zt(ZC),ek=Le({},Po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Of}),tk=Zt(ek),nk=Le({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),rk=Zt(nk),ik=Le({},Jc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sk=Zt(ik),ok=[9,13,27,32],Nf=Qn&&"CompositionEvent"in window,Us=null;Qn&&"documentMode"in document&&(Us=document.documentMode);var ak=Qn&&"TextEvent"in window&&!Us,Zv=Qn&&(!Nf||Us&&8<Us&&11>=Us),xp=" ",Rp=!1;function ey(e,t){switch(e){case"keyup":return ok.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ty(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ki=!1;function ck(e,t){switch(e){case"compositionend":return ty(t);case"keypress":return t.which!==32?null:(Rp=!0,xp);case"textInput":return e=t.data,e===xp&&Rp?null:e;default:return null}}function lk(e,t){if(ki)return e==="compositionend"||!Nf&&ey(e,t)?(e=Xv(),wa=If=hr=null,ki=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zv&&t.locale!=="ko"?null:t.data;default:return null}}var uk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _p(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uk[e.type]:t==="textarea"}function ny(e,t,n,r){Av(r),t=Qa(t,"onChange"),0<t.length&&(n=new Pf("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $s=null,no=null;function dk(e){hy(e,0)}function Yc(e){var t=xi(e);if(xv(t))return e}function fk(e,t){if(e==="change")return t}var ry=!1;if(Qn){var Hl;if(Qn){var Wl="oninput"in document;if(!Wl){var Ip=document.createElement("div");Ip.setAttribute("oninput","return;"),Wl=typeof Ip.oninput=="function"}Hl=Wl}else Hl=!1;ry=Hl&&(!document.documentMode||9<document.documentMode)}function Pp(){$s&&($s.detachEvent("onpropertychange",iy),no=$s=null)}function iy(e){if(e.propertyName==="value"&&Yc(no)){var t=[];ny(t,no,e,Ef(e)),Mv(dk,t)}}function hk(e,t,n){e==="focusin"?(Pp(),$s=t,no=n,$s.attachEvent("onpropertychange",iy)):e==="focusout"&&Pp()}function pk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yc(no)}function mk(e,t){if(e==="click")return Yc(t)}function gk(e,t){if(e==="input"||e==="change")return Yc(t)}function vk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wn=typeof Object.is=="function"?Object.is:vk;function ro(e,t){if(wn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Mu.call(t,i)||!wn(e[i],t[i]))return!1}return!0}function Op(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Np(e,t){var n=Op(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Op(n)}}function sy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?sy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function oy(){for(var e=window,t=Ha();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ha(e.document)}return t}function Af(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yk(e){var t=oy(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&sy(n.ownerDocument.documentElement,n)){if(r!==null&&Af(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Np(n,s);var o=Np(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Sk=Qn&&"documentMode"in document&&11>=document.documentMode,Ei=null,nd=null,Vs=null,rd=!1;function Ap(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rd||Ei==null||Ei!==Ha(r)||(r=Ei,"selectionStart"in r&&Af(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vs&&ro(Vs,r)||(Vs=r,r=Qa(nd,"onSelect"),0<r.length&&(t=new Pf("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ei)))}function Yo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ti={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},ql={},ay={};Qn&&(ay=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);function Qc(e){if(ql[e])return ql[e];if(!Ti[e])return e;var t=Ti[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ay)return ql[e]=t[n];return e}var cy=Qc("animationend"),ly=Qc("animationiteration"),uy=Qc("animationstart"),dy=Qc("transitionend"),fy=new Map,Dp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){fy.set(e,t),ci(t,[e])}for(var Kl=0;Kl<Dp.length;Kl++){var Gl=Dp[Kl],bk=Gl.toLowerCase(),wk=Gl[0].toUpperCase()+Gl.slice(1);jr(bk,"on"+wk)}jr(cy,"onAnimationEnd");jr(ly,"onAnimationIteration");jr(uy,"onAnimationStart");jr("dblclick","onDoubleClick");jr("focusin","onFocus");jr("focusout","onBlur");jr(dy,"onTransitionEnd");Ki("onMouseEnter",["mouseout","mouseover"]);Ki("onMouseLeave",["mouseout","mouseover"]);Ki("onPointerEnter",["pointerout","pointerover"]);Ki("onPointerLeave",["pointerout","pointerover"]);ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ck=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ds));function Lp(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,bC(r,t,void 0,e),e.currentTarget=null}function hy(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Lp(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Lp(i,a,c),s=l}}}if(qa)throw e=Xu,qa=!1,Xu=null,e}function Re(e,t){var n=t[cd];n===void 0&&(n=t[cd]=new Set);var r=e+"__bubble";n.has(r)||(py(t,e,2,!1),n.add(r))}function Jl(e,t,n){var r=0;t&&(r|=4),py(n,e,r,t)}var Qo="_reactListening"+Math.random().toString(36).slice(2);function io(e){if(!e[Qo]){e[Qo]=!0,wv.forEach(function(n){n!=="selectionchange"&&(Ck.has(n)||Jl(n,!1,e),Jl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qo]||(t[Qo]=!0,Jl("selectionchange",!1,t))}}function py(e,t,n,r){switch(Qv(t)){case 1:var i=jC;break;case 4:i=MC;break;default:i=_f}n=i.bind(null,t,n,e),i=void 0,!Qu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Yl(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Hr(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Mv(function(){var c=s,d=Ef(n),f=[];e:{var u=fy.get(e);if(u!==void 0){var h=Pf,m=e;switch(e){case"keypress":if(Ca(n)===0)break e;case"keydown":case"keyup":h=XC;break;case"focusin":m="focus",h=zl;break;case"focusout":m="blur",h=zl;break;case"beforeblur":case"afterblur":h=zl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=kp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=$C;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=tk;break;case cy:case ly:case uy:h=zC;break;case dy:h=rk;break;case"scroll":h=FC;break;case"wheel":h=sk;break;case"copy":case"cut":case"paste":h=WC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Tp}var p=(t&4)!==0,v=!p&&e==="scroll",g=p?u!==null?u+"Capture":null:u;p=[];for(var y=c,S;y!==null;){S=y;var w=S.stateNode;if(S.tag===5&&w!==null&&(S=w,g!==null&&(w=Xs(y,g),w!=null&&p.push(so(y,w,S)))),v)break;y=y.return}0<p.length&&(u=new h(u,m,null,n,d),f.push({event:u,listeners:p}))}}if(!(t&7)){e:{if(u=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",u&&n!==Ju&&(m=n.relatedTarget||n.fromElement)&&(Hr(m)||m[Xn]))break e;if((h||u)&&(u=d.window===d?d:(u=d.ownerDocument)?u.defaultView||u.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?Hr(m):null,m!==null&&(v=li(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=c),h!==m)){if(p=kp,w="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=Tp,w="onPointerLeave",g="onPointerEnter",y="pointer"),v=h==null?u:xi(h),S=m==null?u:xi(m),u=new p(w,y+"leave",h,n,d),u.target=v,u.relatedTarget=S,w=null,Hr(d)===c&&(p=new p(g,y+"enter",m,n,d),p.target=S,p.relatedTarget=v,w=p),v=w,h&&m)t:{for(p=h,g=m,y=0,S=p;S;S=gi(S))y++;for(S=0,w=g;w;w=gi(w))S++;for(;0<y-S;)p=gi(p),y--;for(;0<S-y;)g=gi(g),S--;for(;y--;){if(p===g||g!==null&&p===g.alternate)break t;p=gi(p),g=gi(g)}p=null}else p=null;h!==null&&jp(f,u,h,p,!1),m!==null&&v!==null&&jp(f,v,m,p,!0)}}e:{if(u=c?xi(c):window,h=u.nodeName&&u.nodeName.toLowerCase(),h==="select"||h==="input"&&u.type==="file")var k=fk;else if(_p(u))if(ry)k=gk;else{k=pk;var E=hk}else(h=u.nodeName)&&h.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(k=mk);if(k&&(k=k(e,c))){ny(f,k,n,d);break e}E&&E(e,u,c),e==="focusout"&&(E=u._wrapperState)&&E.controlled&&u.type==="number"&&Hu(u,"number",u.value)}switch(E=c?xi(c):window,e){case"focusin":(_p(E)||E.contentEditable==="true")&&(Ei=E,nd=c,Vs=null);break;case"focusout":Vs=nd=Ei=null;break;case"mousedown":rd=!0;break;case"contextmenu":case"mouseup":case"dragend":rd=!1,Ap(f,n,d);break;case"selectionchange":if(Sk)break;case"keydown":case"keyup":Ap(f,n,d)}var T;if(Nf)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ki?ey(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Zv&&n.locale!=="ko"&&(ki||I!=="onCompositionStart"?I==="onCompositionEnd"&&ki&&(T=Xv()):(hr=d,If="value"in hr?hr.value:hr.textContent,ki=!0)),E=Qa(c,I),0<E.length&&(I=new Ep(I,e,null,n,d),f.push({event:I,listeners:E}),T?I.data=T:(T=ty(n),T!==null&&(I.data=T)))),(T=ak?ck(e,n):lk(e,n))&&(c=Qa(c,"onBeforeInput"),0<c.length&&(d=new Ep("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=T))}hy(f,t)})}function so(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qa(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xs(e,n),s!=null&&r.unshift(so(e,s,i)),s=Xs(e,t),s!=null&&r.push(so(e,s,i))),e=e.return}return r}function gi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jp(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Xs(n,s),l!=null&&o.unshift(so(n,l,a))):i||(l=Xs(n,s),l!=null&&o.push(so(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var kk=/\r\n?/g,Ek=/\u0000|\uFFFD/g;function Mp(e){return(typeof e=="string"?e:""+e).replace(kk,`
`).replace(Ek,"")}function Xo(e,t,n){if(t=Mp(t),Mp(e)!==t&&n)throw Error(L(425))}function Xa(){}var id=null,sd=null;function od(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ad=typeof setTimeout=="function"?setTimeout:void 0,Tk=typeof clearTimeout=="function"?clearTimeout:void 0,Fp=typeof Promise=="function"?Promise:void 0,xk=typeof queueMicrotask=="function"?queueMicrotask:typeof Fp<"u"?function(e){return Fp.resolve(null).then(e).catch(Rk)}:ad;function Rk(e){setTimeout(function(){throw e})}function Ql(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),to(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);to(t)}function Sr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Up(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var cs=Math.random().toString(36).slice(2),In="__reactFiber$"+cs,oo="__reactProps$"+cs,Xn="__reactContainer$"+cs,cd="__reactEvents$"+cs,_k="__reactListeners$"+cs,Ik="__reactHandles$"+cs;function Hr(e){var t=e[In];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xn]||n[In]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Up(e);e!==null;){if(n=e[In])return n;e=Up(e)}return t}e=n,n=e.parentNode}return null}function Oo(e){return e=e[In]||e[Xn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(L(33))}function Xc(e){return e[oo]||null}var ld=[],Ri=-1;function Mr(e){return{current:e}}function _e(e){0>Ri||(e.current=ld[Ri],ld[Ri]=null,Ri--)}function Ee(e,t){Ri++,ld[Ri]=e.current,e.current=t}var Pr={},vt=Mr(Pr),Ft=Mr(!1),Qr=Pr;function Gi(e,t){var n=e.type.contextTypes;if(!n)return Pr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ut(e){return e=e.childContextTypes,e!=null}function Za(){_e(Ft),_e(vt)}function $p(e,t,n){if(vt.current!==Pr)throw Error(L(168));Ee(vt,t),Ee(Ft,n)}function my(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(L(108,hC(e)||"Unknown",i));return Le({},n,r)}function ec(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pr,Qr=vt.current,Ee(vt,e),Ee(Ft,Ft.current),!0}function Vp(e,t,n){var r=e.stateNode;if(!r)throw Error(L(169));n?(e=my(e,t,Qr),r.__reactInternalMemoizedMergedChildContext=e,_e(Ft),_e(vt),Ee(vt,e)):_e(Ft),Ee(Ft,n)}var Wn=null,Zc=!1,Xl=!1;function gy(e){Wn===null?Wn=[e]:Wn.push(e)}function Pk(e){Zc=!0,gy(e)}function Fr(){if(!Xl&&Wn!==null){Xl=!0;var e=0,t=ye;try{var n=Wn;for(ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Wn=null,Zc=!1}catch(i){throw Wn!==null&&(Wn=Wn.slice(e+1)),Vv(Tf,Fr),i}finally{ye=t,Xl=!1}}return null}var _i=[],Ii=0,tc=null,nc=0,nn=[],rn=0,Xr=null,Gn=1,Jn="";function $r(e,t){_i[Ii++]=nc,_i[Ii++]=tc,tc=e,nc=t}function vy(e,t,n){nn[rn++]=Gn,nn[rn++]=Jn,nn[rn++]=Xr,Xr=e;var r=Gn;e=Jn;var i=32-Sn(r)-1;r&=~(1<<i),n+=1;var s=32-Sn(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Gn=1<<32-Sn(t)+i|n<<i|r,Jn=s+e}else Gn=1<<s|n<<i|r,Jn=e}function Df(e){e.return!==null&&($r(e,1),vy(e,1,0))}function Lf(e){for(;e===tc;)tc=_i[--Ii],_i[Ii]=null,nc=_i[--Ii],_i[Ii]=null;for(;e===Xr;)Xr=nn[--rn],nn[rn]=null,Jn=nn[--rn],nn[rn]=null,Gn=nn[--rn],nn[rn]=null}var Kt=null,qt=null,Oe=!1,gn=null;function yy(e,t){var n=sn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bp(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Kt=e,qt=Sr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Kt=e,qt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Xr!==null?{id:Gn,overflow:Jn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=sn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Kt=e,qt=null,!0):!1;default:return!1}}function ud(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dd(e){if(Oe){var t=qt;if(t){var n=t;if(!Bp(e,t)){if(ud(e))throw Error(L(418));t=Sr(n.nextSibling);var r=Kt;t&&Bp(e,t)?yy(r,n):(e.flags=e.flags&-4097|2,Oe=!1,Kt=e)}}else{if(ud(e))throw Error(L(418));e.flags=e.flags&-4097|2,Oe=!1,Kt=e}}}function zp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Kt=e}function Zo(e){if(e!==Kt)return!1;if(!Oe)return zp(e),Oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!od(e.type,e.memoizedProps)),t&&(t=qt)){if(ud(e))throw Sy(),Error(L(418));for(;t;)yy(e,t),t=Sr(t.nextSibling)}if(zp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){qt=Sr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}qt=null}}else qt=Kt?Sr(e.stateNode.nextSibling):null;return!0}function Sy(){for(var e=qt;e;)e=Sr(e.nextSibling)}function Ji(){qt=Kt=null,Oe=!1}function jf(e){gn===null?gn=[e]:gn.push(e)}var Ok=rr.ReactCurrentBatchConfig;function Cs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,e))}return e}function ea(e,t){throw e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hp(e){var t=e._init;return t(e._payload)}function by(e){function t(g,y){if(e){var S=g.deletions;S===null?(g.deletions=[y],g.flags|=16):S.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=kr(g,y),g.index=0,g.sibling=null,g}function s(g,y,S){return g.index=S,e?(S=g.alternate,S!==null?(S=S.index,S<y?(g.flags|=2,y):S):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,y,S,w){return y===null||y.tag!==6?(y=su(S,g.mode,w),y.return=g,y):(y=i(y,S),y.return=g,y)}function l(g,y,S,w){var k=S.type;return k===Ci?d(g,y,S.props.children,w,S.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ar&&Hp(k)===y.type)?(w=i(y,S.props),w.ref=Cs(g,y,S),w.return=g,w):(w=Ia(S.type,S.key,S.props,null,g.mode,w),w.ref=Cs(g,y,S),w.return=g,w)}function c(g,y,S,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=ou(S,g.mode,w),y.return=g,y):(y=i(y,S.children||[]),y.return=g,y)}function d(g,y,S,w,k){return y===null||y.tag!==7?(y=Jr(S,g.mode,w,k),y.return=g,y):(y=i(y,S),y.return=g,y)}function f(g,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=su(""+y,g.mode,S),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case zo:return S=Ia(y.type,y.key,y.props,null,g.mode,S),S.ref=Cs(g,null,y),S.return=g,S;case wi:return y=ou(y,g.mode,S),y.return=g,y;case ar:var w=y._init;return f(g,w(y._payload),S)}if(Ns(y)||vs(y))return y=Jr(y,g.mode,S,null),y.return=g,y;ea(g,y)}return null}function u(g,y,S,w){var k=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return k!==null?null:a(g,y,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case zo:return S.key===k?l(g,y,S,w):null;case wi:return S.key===k?c(g,y,S,w):null;case ar:return k=S._init,u(g,y,k(S._payload),w)}if(Ns(S)||vs(S))return k!==null?null:d(g,y,S,w,null);ea(g,S)}return null}function h(g,y,S,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(S)||null,a(y,g,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case zo:return g=g.get(w.key===null?S:w.key)||null,l(y,g,w,k);case wi:return g=g.get(w.key===null?S:w.key)||null,c(y,g,w,k);case ar:var E=w._init;return h(g,y,S,E(w._payload),k)}if(Ns(w)||vs(w))return g=g.get(S)||null,d(y,g,w,k,null);ea(y,w)}return null}function m(g,y,S,w){for(var k=null,E=null,T=y,I=y=0,U=null;T!==null&&I<S.length;I++){T.index>I?(U=T,T=null):U=T.sibling;var O=u(g,T,S[I],w);if(O===null){T===null&&(T=U);break}e&&T&&O.alternate===null&&t(g,T),y=s(O,y,I),E===null?k=O:E.sibling=O,E=O,T=U}if(I===S.length)return n(g,T),Oe&&$r(g,I),k;if(T===null){for(;I<S.length;I++)T=f(g,S[I],w),T!==null&&(y=s(T,y,I),E===null?k=T:E.sibling=T,E=T);return Oe&&$r(g,I),k}for(T=r(g,T);I<S.length;I++)U=h(T,g,I,S[I],w),U!==null&&(e&&U.alternate!==null&&T.delete(U.key===null?I:U.key),y=s(U,y,I),E===null?k=U:E.sibling=U,E=U);return e&&T.forEach(function(B){return t(g,B)}),Oe&&$r(g,I),k}function p(g,y,S,w){var k=vs(S);if(typeof k!="function")throw Error(L(150));if(S=k.call(S),S==null)throw Error(L(151));for(var E=k=null,T=y,I=y=0,U=null,O=S.next();T!==null&&!O.done;I++,O=S.next()){T.index>I?(U=T,T=null):U=T.sibling;var B=u(g,T,O.value,w);if(B===null){T===null&&(T=U);break}e&&T&&B.alternate===null&&t(g,T),y=s(B,y,I),E===null?k=B:E.sibling=B,E=B,T=U}if(O.done)return n(g,T),Oe&&$r(g,I),k;if(T===null){for(;!O.done;I++,O=S.next())O=f(g,O.value,w),O!==null&&(y=s(O,y,I),E===null?k=O:E.sibling=O,E=O);return Oe&&$r(g,I),k}for(T=r(g,T);!O.done;I++,O=S.next())O=h(T,g,I,O.value,w),O!==null&&(e&&O.alternate!==null&&T.delete(O.key===null?I:O.key),y=s(O,y,I),E===null?k=O:E.sibling=O,E=O);return e&&T.forEach(function(P){return t(g,P)}),Oe&&$r(g,I),k}function v(g,y,S,w){if(typeof S=="object"&&S!==null&&S.type===Ci&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case zo:e:{for(var k=S.key,E=y;E!==null;){if(E.key===k){if(k=S.type,k===Ci){if(E.tag===7){n(g,E.sibling),y=i(E,S.props.children),y.return=g,g=y;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ar&&Hp(k)===E.type){n(g,E.sibling),y=i(E,S.props),y.ref=Cs(g,E,S),y.return=g,g=y;break e}n(g,E);break}else t(g,E);E=E.sibling}S.type===Ci?(y=Jr(S.props.children,g.mode,w,S.key),y.return=g,g=y):(w=Ia(S.type,S.key,S.props,null,g.mode,w),w.ref=Cs(g,y,S),w.return=g,g=w)}return o(g);case wi:e:{for(E=S.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(g,y.sibling),y=i(y,S.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else t(g,y);y=y.sibling}y=ou(S,g.mode,w),y.return=g,g=y}return o(g);case ar:return E=S._init,v(g,y,E(S._payload),w)}if(Ns(S))return m(g,y,S,w);if(vs(S))return p(g,y,S,w);ea(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(g,y.sibling),y=i(y,S),y.return=g,g=y):(n(g,y),y=su(S,g.mode,w),y.return=g,g=y),o(g)):n(g,y)}return v}var Yi=by(!0),wy=by(!1),rc=Mr(null),ic=null,Pi=null,Mf=null;function Ff(){Mf=Pi=ic=null}function Uf(e){var t=rc.current;_e(rc),e._currentValue=t}function fd(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Fi(e,t){ic=e,Mf=Pi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mt=!0),e.firstContext=null)}function cn(e){var t=e._currentValue;if(Mf!==e)if(e={context:e,memoizedValue:t,next:null},Pi===null){if(ic===null)throw Error(L(308));Pi=e,ic.dependencies={lanes:0,firstContext:e}}else Pi=Pi.next=e;return t}var Wr=null;function $f(e){Wr===null?Wr=[e]:Wr.push(e)}function Cy(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,$f(t)):(n.next=i.next,i.next=n),t.interleaved=n,Zn(e,r)}function Zn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var cr=!1;function Vf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ky(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function br(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Zn(e,n)}return i=r.interleaved,i===null?(t.next=t,$f(r)):(t.next=i.next,i.next=t),r.interleaved=t,Zn(e,n)}function ka(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xf(e,n)}}function Wp(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sc(e,t,n,r){var i=e.updateQueue;cr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,d=c=l=null,a=s;do{var u=a.lane,h=a.eventTime;if((r&u)===u){d!==null&&(d=d.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,p=a;switch(u=t,h=n,p.tag){case 1:if(m=p.payload,typeof m=="function"){f=m.call(h,f,u);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,u=typeof m=="function"?m.call(h,f,u):m,u==null)break e;f=Le({},f,u);break e;case 2:cr=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,u=i.effects,u===null?i.effects=[a]:u.push(a))}else h={eventTime:h,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=h,l=f):d=d.next=h,o|=u;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;u=a,a=u.next,u.next=null,i.lastBaseUpdate=u,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);ei|=o,e.lanes=o,e.memoizedState=f}}function qp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(L(191,i));i.call(r)}}}var No={},Dn=Mr(No),ao=Mr(No),co=Mr(No);function qr(e){if(e===No)throw Error(L(174));return e}function Bf(e,t){switch(Ee(co,t),Ee(ao,e),Ee(Dn,No),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=qu(t,e)}_e(Dn),Ee(Dn,t)}function Qi(){_e(Dn),_e(ao),_e(co)}function Ey(e){qr(co.current);var t=qr(Dn.current),n=qu(t,e.type);t!==n&&(Ee(ao,e),Ee(Dn,n))}function zf(e){ao.current===e&&(_e(Dn),_e(ao))}var Ae=Mr(0);function oc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zl=[];function Hf(){for(var e=0;e<Zl.length;e++)Zl[e]._workInProgressVersionPrimary=null;Zl.length=0}var Ea=rr.ReactCurrentDispatcher,eu=rr.ReactCurrentBatchConfig,Zr=0,De=null,Ge=null,Ze=null,ac=!1,Bs=!1,lo=0,Nk=0;function lt(){throw Error(L(321))}function Wf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wn(e[n],t[n]))return!1;return!0}function qf(e,t,n,r,i,s){if(Zr=s,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ea.current=e===null||e.memoizedState===null?jk:Mk,e=n(r,i),Bs){s=0;do{if(Bs=!1,lo=0,25<=s)throw Error(L(301));s+=1,Ze=Ge=null,t.updateQueue=null,Ea.current=Fk,e=n(r,i)}while(Bs)}if(Ea.current=cc,t=Ge!==null&&Ge.next!==null,Zr=0,Ze=Ge=De=null,ac=!1,t)throw Error(L(300));return e}function Kf(){var e=lo!==0;return lo=0,e}function Rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?De.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function ln(){if(Ge===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var t=Ze===null?De.memoizedState:Ze.next;if(t!==null)Ze=t,Ge=e;else{if(e===null)throw Error(L(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Ze===null?De.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function uo(e,t){return typeof t=="function"?t(e):t}function tu(e){var t=ln(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=Ge,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Zr&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,De.lanes|=d,ei|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,wn(r,t.memoizedState)||(Mt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,De.lanes|=s,ei|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function nu(e){var t=ln(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);wn(s,t.memoizedState)||(Mt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ty(){}function xy(e,t){var n=De,r=ln(),i=t(),s=!wn(r.memoizedState,i);if(s&&(r.memoizedState=i,Mt=!0),r=r.queue,Gf(Iy.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,fo(9,_y.bind(null,n,r,i,t),void 0,null),tt===null)throw Error(L(349));Zr&30||Ry(n,t,i)}return i}function Ry(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function _y(e,t,n,r){t.value=n,t.getSnapshot=r,Py(t)&&Oy(e)}function Iy(e,t,n){return n(function(){Py(t)&&Oy(e)})}function Py(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wn(e,n)}catch{return!0}}function Oy(e){var t=Zn(e,1);t!==null&&bn(t,e,1,-1)}function Kp(e){var t=Rn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uo,lastRenderedState:e},t.queue=e,e=e.dispatch=Lk.bind(null,De,e),[t.memoizedState,e]}function fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ny(){return ln().memoizedState}function Ta(e,t,n,r){var i=Rn();De.flags|=e,i.memoizedState=fo(1|t,n,void 0,r===void 0?null:r)}function el(e,t,n,r){var i=ln();r=r===void 0?null:r;var s=void 0;if(Ge!==null){var o=Ge.memoizedState;if(s=o.destroy,r!==null&&Wf(r,o.deps)){i.memoizedState=fo(t,n,s,r);return}}De.flags|=e,i.memoizedState=fo(1|t,n,s,r)}function Gp(e,t){return Ta(8390656,8,e,t)}function Gf(e,t){return el(2048,8,e,t)}function Ay(e,t){return el(4,2,e,t)}function Dy(e,t){return el(4,4,e,t)}function Ly(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jy(e,t,n){return n=n!=null?n.concat([e]):null,el(4,4,Ly.bind(null,t,e),n)}function Jf(){}function My(e,t){var n=ln();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Fy(e,t){var n=ln();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Wf(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Uy(e,t,n){return Zr&21?(wn(n,t)||(n=Hv(),De.lanes|=n,ei|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mt=!0),e.memoizedState=n)}function Ak(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var r=eu.transition;eu.transition={};try{e(!1),t()}finally{ye=n,eu.transition=r}}function $y(){return ln().memoizedState}function Dk(e,t,n){var r=Cr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vy(e))By(t,n);else if(n=Cy(e,t,n,r),n!==null){var i=Tt();bn(n,e,r,i),zy(n,t,r)}}function Lk(e,t,n){var r=Cr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vy(e))By(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,wn(a,o)){var l=t.interleaved;l===null?(i.next=i,$f(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=Cy(e,t,i,r),n!==null&&(i=Tt(),bn(n,e,r,i),zy(n,t,r))}}function Vy(e){var t=e.alternate;return e===De||t!==null&&t===De}function By(e,t){Bs=ac=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function zy(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xf(e,n)}}var cc={readContext:cn,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},jk={readContext:cn,useCallback:function(e,t){return Rn().memoizedState=[e,t===void 0?null:t],e},useContext:cn,useEffect:Gp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ta(4194308,4,Ly.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ta(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ta(4,2,e,t)},useMemo:function(e,t){var n=Rn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Rn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Dk.bind(null,De,e),[r.memoizedState,e]},useRef:function(e){var t=Rn();return e={current:e},t.memoizedState=e},useState:Kp,useDebugValue:Jf,useDeferredValue:function(e){return Rn().memoizedState=e},useTransition:function(){var e=Kp(!1),t=e[0];return e=Ak.bind(null,e[1]),Rn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=De,i=Rn();if(Oe){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),tt===null)throw Error(L(349));Zr&30||Ry(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Gp(Iy.bind(null,r,s,e),[e]),r.flags|=2048,fo(9,_y.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Rn(),t=tt.identifierPrefix;if(Oe){var n=Jn,r=Gn;n=(r&~(1<<32-Sn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=lo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Nk++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Mk={readContext:cn,useCallback:My,useContext:cn,useEffect:Gf,useImperativeHandle:jy,useInsertionEffect:Ay,useLayoutEffect:Dy,useMemo:Fy,useReducer:tu,useRef:Ny,useState:function(){return tu(uo)},useDebugValue:Jf,useDeferredValue:function(e){var t=ln();return Uy(t,Ge.memoizedState,e)},useTransition:function(){var e=tu(uo)[0],t=ln().memoizedState;return[e,t]},useMutableSource:Ty,useSyncExternalStore:xy,useId:$y,unstable_isNewReconciler:!1},Fk={readContext:cn,useCallback:My,useContext:cn,useEffect:Gf,useImperativeHandle:jy,useInsertionEffect:Ay,useLayoutEffect:Dy,useMemo:Fy,useReducer:nu,useRef:Ny,useState:function(){return nu(uo)},useDebugValue:Jf,useDeferredValue:function(e){var t=ln();return Ge===null?t.memoizedState=e:Uy(t,Ge.memoizedState,e)},useTransition:function(){var e=nu(uo)[0],t=ln().memoizedState;return[e,t]},useMutableSource:Ty,useSyncExternalStore:xy,useId:$y,unstable_isNewReconciler:!1};function pn(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hd(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Le({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var tl={isMounted:function(e){return(e=e._reactInternals)?li(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Tt(),i=Cr(e),s=Yn(r,i);s.payload=t,n!=null&&(s.callback=n),t=br(e,s,i),t!==null&&(bn(t,e,i,r),ka(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Tt(),i=Cr(e),s=Yn(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=br(e,s,i),t!==null&&(bn(t,e,i,r),ka(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Tt(),r=Cr(e),i=Yn(n,r);i.tag=2,t!=null&&(i.callback=t),t=br(e,i,r),t!==null&&(bn(t,e,r,n),ka(t,e,r))}};function Jp(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!ro(n,r)||!ro(i,s):!0}function Hy(e,t,n){var r=!1,i=Pr,s=t.contextType;return typeof s=="object"&&s!==null?s=cn(s):(i=Ut(t)?Qr:vt.current,r=t.contextTypes,s=(r=r!=null)?Gi(e,i):Pr),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=tl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Yp(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&tl.enqueueReplaceState(t,t.state,null)}function pd(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Vf(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=cn(s):(s=Ut(t)?Qr:vt.current,i.context=Gi(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(hd(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&tl.enqueueReplaceState(i,i.state,null),sc(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Xi(e,t){try{var n="",r=t;do n+=fC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function ru(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function md(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Uk=typeof WeakMap=="function"?WeakMap:Map;function Wy(e,t,n){n=Yn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){uc||(uc=!0,Td=r),md(e,t)},n}function qy(e,t,n){n=Yn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){md(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){md(e,t),typeof r!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Qp(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Uk;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Zk.bind(null,e,t,n),t.then(e,e))}function Xp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zp(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Yn(-1,1),t.tag=2,br(n,t,1))),n.lanes|=1),e)}var $k=rr.ReactCurrentOwner,Mt=!1;function wt(e,t,n,r){t.child=e===null?wy(t,null,n,r):Yi(t,e.child,n,r)}function em(e,t,n,r,i){n=n.render;var s=t.ref;return Fi(t,i),r=qf(e,t,n,r,s,i),n=Kf(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,er(e,t,i)):(Oe&&n&&Df(t),t.flags|=1,wt(e,t,r,i),t.child)}function tm(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!rh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Ky(e,t,s,r,i)):(e=Ia(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ro,n(o,r)&&e.ref===t.ref)return er(e,t,i)}return t.flags|=1,e=kr(s,r),e.ref=t.ref,e.return=t,t.child=e}function Ky(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(ro(s,r)&&e.ref===t.ref)if(Mt=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Mt=!0);else return t.lanes=e.lanes,er(e,t,i)}return gd(e,t,n,r,i)}function Gy(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(Ni,zt),zt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ee(Ni,zt),zt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ee(Ni,zt),zt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ee(Ni,zt),zt|=r;return wt(e,t,i,n),t.child}function Jy(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function gd(e,t,n,r,i){var s=Ut(n)?Qr:vt.current;return s=Gi(t,s),Fi(t,i),n=qf(e,t,n,r,s,i),r=Kf(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,er(e,t,i)):(Oe&&r&&Df(t),t.flags|=1,wt(e,t,n,i),t.child)}function nm(e,t,n,r,i){if(Ut(n)){var s=!0;ec(t)}else s=!1;if(Fi(t,i),t.stateNode===null)xa(e,t),Hy(t,n,r),pd(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=cn(c):(c=Ut(n)?Qr:vt.current,c=Gi(t,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Yp(t,o,r,c),cr=!1;var u=t.memoizedState;o.state=u,sc(t,r,o,i),l=t.memoizedState,a!==r||u!==l||Ft.current||cr?(typeof d=="function"&&(hd(t,n,d,r),l=t.memoizedState),(a=cr||Jp(t,n,a,r,u,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ky(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:pn(t.type,a),o.props=c,f=t.pendingProps,u=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=cn(l):(l=Ut(n)?Qr:vt.current,l=Gi(t,l));var h=n.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||u!==l)&&Yp(t,o,r,l),cr=!1,u=t.memoizedState,o.state=u,sc(t,r,o,i);var m=t.memoizedState;a!==f||u!==m||Ft.current||cr?(typeof h=="function"&&(hd(t,n,h,r),m=t.memoizedState),(c=cr||Jp(t,n,c,r,u,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),r=!1)}return vd(e,t,n,r,s,i)}function vd(e,t,n,r,i,s){Jy(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Vp(t,n,!1),er(e,t,s);r=t.stateNode,$k.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Yi(t,e.child,null,s),t.child=Yi(t,null,a,s)):wt(e,t,a,s),t.memoizedState=r.state,i&&Vp(t,n,!0),t.child}function Yy(e){var t=e.stateNode;t.pendingContext?$p(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$p(e,t.context,!1),Bf(e,t.containerInfo)}function rm(e,t,n,r,i){return Ji(),jf(i),t.flags|=256,wt(e,t,n,r),t.child}var yd={dehydrated:null,treeContext:null,retryLane:0};function Sd(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qy(e,t,n){var r=t.pendingProps,i=Ae.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ee(Ae,i&1),e===null)return dd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=il(o,r,0,null),e=Jr(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Sd(n),t.memoizedState=yd,e):Yf(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Vk(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=kr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=kr(a,s):(s=Jr(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?Sd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=yd,r}return s=e.child,e=s.sibling,r=kr(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Yf(e,t){return t=il({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ta(e,t,n,r){return r!==null&&jf(r),Yi(t,e.child,null,n),e=Yf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Vk(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=ru(Error(L(422))),ta(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=il({mode:"visible",children:r.children},i,0,null),s=Jr(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Yi(t,e.child,null,o),t.child.memoizedState=Sd(o),t.memoizedState=yd,s);if(!(t.mode&1))return ta(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(L(419)),r=ru(s,r,void 0),ta(e,t,o,r)}if(a=(o&e.childLanes)!==0,Mt||a){if(r=tt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zn(e,i),bn(r,e,i,-1))}return nh(),r=ru(Error(L(421))),ta(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=eE.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,qt=Sr(i.nextSibling),Kt=t,Oe=!0,gn=null,e!==null&&(nn[rn++]=Gn,nn[rn++]=Jn,nn[rn++]=Xr,Gn=e.id,Jn=e.overflow,Xr=t),t=Yf(t,r.children),t.flags|=4096,t)}function im(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),fd(e.return,t,n)}function iu(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Xy(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wt(e,t,r.children,n),r=Ae.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&im(e,n,t);else if(e.tag===19)im(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ee(Ae,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&oc(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),iu(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&oc(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}iu(t,!0,n,null,s);break;case"together":iu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function er(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ei|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=kr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=kr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Bk(e,t,n){switch(t.tag){case 3:Yy(t),Ji();break;case 5:Ey(t);break;case 1:Ut(t.type)&&ec(t);break;case 4:Bf(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ee(rc,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Ae,Ae.current&1),t.flags|=128,null):n&t.child.childLanes?Qy(e,t,n):(Ee(Ae,Ae.current&1),e=er(e,t,n),e!==null?e.sibling:null);Ee(Ae,Ae.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Xy(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ee(Ae,Ae.current),r)break;return null;case 22:case 23:return t.lanes=0,Gy(e,t,n)}return er(e,t,n)}var Zy,bd,eS,tS;Zy=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bd=function(){};eS=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,qr(Dn.current);var s=null;switch(n){case"input":i=Bu(e,i),r=Bu(e,r),s=[];break;case"select":i=Le({},i,{value:void 0}),r=Le({},r,{value:void 0}),s=[];break;case"textarea":i=Wu(e,i),r=Wu(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Xa)}Ku(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ys.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ys.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Re("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};tS=function(e,t,n,r){n!==r&&(t.flags|=4)};function ks(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function zk(e,t,n){var r=t.pendingProps;switch(Lf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return Ut(t.type)&&Za(),ut(t),null;case 3:return r=t.stateNode,Qi(),_e(Ft),_e(vt),Hf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Zo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gn!==null&&(_d(gn),gn=null))),bd(e,t),ut(t),null;case 5:zf(t);var i=qr(co.current);if(n=t.type,e!==null&&t.stateNode!=null)eS(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(L(166));return ut(t),null}if(e=qr(Dn.current),Zo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[In]=t,r[oo]=s,e=(t.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(i=0;i<Ds.length;i++)Re(Ds[i],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":hp(r,s),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Re("invalid",r);break;case"textarea":mp(r,s),Re("invalid",r)}Ku(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Xo(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Xo(r.textContent,a,e),i=["children",""+a]):Ys.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":Ho(r),pp(r,s,!0);break;case"textarea":Ho(r),gp(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xa)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Iv(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[In]=t,e[oo]=r,Zy(e,t,!1,!1),t.stateNode=e;e:{switch(o=Gu(n,r),n){case"dialog":Re("cancel",e),Re("close",e),i=r;break;case"iframe":case"object":case"embed":Re("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ds.length;i++)Re(Ds[i],e);i=r;break;case"source":Re("error",e),i=r;break;case"img":case"image":case"link":Re("error",e),Re("load",e),i=r;break;case"details":Re("toggle",e),i=r;break;case"input":hp(e,r),i=Bu(e,r),Re("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Le({},r,{value:void 0}),Re("invalid",e);break;case"textarea":mp(e,r),i=Wu(e,r),Re("invalid",e);break;default:i=r}Ku(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Nv(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Pv(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Qs(e,l):typeof l=="number"&&Qs(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ys.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Re("scroll",e):l!=null&&bf(e,s,l,o))}switch(n){case"input":Ho(e),pp(e,r,!1);break;case"textarea":Ho(e),gp(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ir(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Di(e,!!r.multiple,s,!1):r.defaultValue!=null&&Di(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Xa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ut(t),null;case 6:if(e&&t.stateNode!=null)tS(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(L(166));if(n=qr(co.current),qr(Dn.current),Zo(t)){if(r=t.stateNode,n=t.memoizedProps,r[In]=t,(s=r.nodeValue!==n)&&(e=Kt,e!==null))switch(e.tag){case 3:Xo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xo(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[In]=t,t.stateNode=r}return ut(t),null;case 13:if(_e(Ae),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oe&&qt!==null&&t.mode&1&&!(t.flags&128))Sy(),Ji(),t.flags|=98560,s=!1;else if(s=Zo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(L(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(L(317));s[In]=t}else Ji(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),s=!1}else gn!==null&&(_d(gn),gn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ae.current&1?Qe===0&&(Qe=3):nh())),t.updateQueue!==null&&(t.flags|=4),ut(t),null);case 4:return Qi(),bd(e,t),e===null&&io(t.stateNode.containerInfo),ut(t),null;case 10:return Uf(t.type._context),ut(t),null;case 17:return Ut(t.type)&&Za(),ut(t),null;case 19:if(_e(Ae),s=t.memoizedState,s===null)return ut(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)ks(s,!1);else{if(Qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=oc(e),o!==null){for(t.flags|=128,ks(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ee(Ae,Ae.current&1|2),t.child}e=e.sibling}s.tail!==null&&ze()>Zi&&(t.flags|=128,r=!0,ks(s,!1),t.lanes=4194304)}else{if(!r)if(e=oc(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ks(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Oe)return ut(t),null}else 2*ze()-s.renderingStartTime>Zi&&n!==1073741824&&(t.flags|=128,r=!0,ks(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ze(),t.sibling=null,n=Ae.current,Ee(Ae,r?n&1|2:n&1),t):(ut(t),null);case 22:case 23:return th(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?zt&1073741824&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),null;case 24:return null;case 25:return null}throw Error(L(156,t.tag))}function Hk(e,t){switch(Lf(t),t.tag){case 1:return Ut(t.type)&&Za(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qi(),_e(Ft),_e(vt),Hf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zf(t),null;case 13:if(_e(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));Ji()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _e(Ae),null;case 4:return Qi(),null;case 10:return Uf(t.type._context),null;case 22:case 23:return th(),null;case 24:return null;default:return null}}var na=!1,ht=!1,Wk=typeof WeakSet=="function"?WeakSet:Set,z=null;function Oi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(e,t,r)}else n.current=null}function wd(e,t,n){try{n()}catch(r){Me(e,t,r)}}var sm=!1;function qk(e,t){if(id=Ja,e=oy(),Af(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=e,u=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)u=f,f=h;for(;;){if(f===e)break t;if(u===n&&++c===i&&(a=o),u===s&&++d===r&&(l=o),(h=f.nextSibling)!==null)break;f=u,u=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(sd={focusedElem:e,selectionRange:n},Ja=!1,z=t;z!==null;)if(t=z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,z=e;else for(;z!==null;){t=z;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,v=m.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?p:pn(t.type,p),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(w){Me(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,z=e;break}z=t.return}return m=sm,sm=!1,m}function zs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&wd(t,n,s)}i=i.next}while(i!==r)}}function nl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Cd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function nS(e){var t=e.alternate;t!==null&&(e.alternate=null,nS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[In],delete t[oo],delete t[cd],delete t[_k],delete t[Ik])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rS(e){return e.tag===5||e.tag===3||e.tag===4}function om(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Xa));else if(r!==4&&(e=e.child,e!==null))for(kd(e,t,n),e=e.sibling;e!==null;)kd(e,t,n),e=e.sibling}function Ed(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ed(e,t,n),e=e.sibling;e!==null;)Ed(e,t,n),e=e.sibling}var rt=null,mn=!1;function or(e,t,n){for(n=n.child;n!==null;)iS(e,t,n),n=n.sibling}function iS(e,t,n){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(Gc,n)}catch{}switch(n.tag){case 5:ht||Oi(n,t);case 6:var r=rt,i=mn;rt=null,or(e,t,n),rt=r,mn=i,rt!==null&&(mn?(e=rt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(mn?(e=rt,n=n.stateNode,e.nodeType===8?Ql(e.parentNode,n):e.nodeType===1&&Ql(e,n),to(e)):Ql(rt,n.stateNode));break;case 4:r=rt,i=mn,rt=n.stateNode.containerInfo,mn=!0,or(e,t,n),rt=r,mn=i;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&wd(n,t,o),i=i.next}while(i!==r)}or(e,t,n);break;case 1:if(!ht&&(Oi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Me(n,t,a)}or(e,t,n);break;case 21:or(e,t,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,or(e,t,n),ht=r):or(e,t,n);break;default:or(e,t,n)}}function am(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Wk),t.forEach(function(r){var i=tE.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function fn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,mn=!1;break e;case 3:rt=a.stateNode.containerInfo,mn=!0;break e;case 4:rt=a.stateNode.containerInfo,mn=!0;break e}a=a.return}if(rt===null)throw Error(L(160));iS(s,o,i),rt=null,mn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Me(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)sS(t,e),t=t.sibling}function sS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fn(t,e),Tn(e),r&4){try{zs(3,e,e.return),nl(3,e)}catch(p){Me(e,e.return,p)}try{zs(5,e,e.return)}catch(p){Me(e,e.return,p)}}break;case 1:fn(t,e),Tn(e),r&512&&n!==null&&Oi(n,n.return);break;case 5:if(fn(t,e),Tn(e),r&512&&n!==null&&Oi(n,n.return),e.flags&32){var i=e.stateNode;try{Qs(i,"")}catch(p){Me(e,e.return,p)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Rv(i,s),Gu(a,o);var c=Gu(a,s);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?Nv(i,f):d==="dangerouslySetInnerHTML"?Pv(i,f):d==="children"?Qs(i,f):bf(i,d,f,c)}switch(a){case"input":zu(i,s);break;case"textarea":_v(i,s);break;case"select":var u=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Di(i,!!s.multiple,h,!1):u!==!!s.multiple&&(s.defaultValue!=null?Di(i,!!s.multiple,s.defaultValue,!0):Di(i,!!s.multiple,s.multiple?[]:"",!1))}i[oo]=s}catch(p){Me(e,e.return,p)}}break;case 6:if(fn(t,e),Tn(e),r&4){if(e.stateNode===null)throw Error(L(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(p){Me(e,e.return,p)}}break;case 3:if(fn(t,e),Tn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{to(t.containerInfo)}catch(p){Me(e,e.return,p)}break;case 4:fn(t,e),Tn(e);break;case 13:fn(t,e),Tn(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Zf=ze())),r&4&&am(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(ht=(c=ht)||d,fn(t,e),ht=c):fn(t,e),Tn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(z=e,d=e.child;d!==null;){for(f=z=d;z!==null;){switch(u=z,h=u.child,u.tag){case 0:case 11:case 14:case 15:zs(4,u,u.return);break;case 1:Oi(u,u.return);var m=u.stateNode;if(typeof m.componentWillUnmount=="function"){r=u,n=u.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(p){Me(r,n,p)}}break;case 5:Oi(u,u.return);break;case 22:if(u.memoizedState!==null){lm(f);continue}}h!==null?(h.return=u,z=h):lm(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ov("display",o))}catch(p){Me(e,e.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(p){Me(e,e.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:fn(t,e),Tn(e),r&4&&am(e);break;case 21:break;default:fn(t,e),Tn(e)}}function Tn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(rS(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Qs(i,""),r.flags&=-33);var s=om(e);Ed(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=om(e);kd(e,a,o);break;default:throw Error(L(161))}}catch(l){Me(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Kk(e,t,n){z=e,oS(e)}function oS(e,t,n){for(var r=(e.mode&1)!==0;z!==null;){var i=z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||na;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ht;a=na;var c=ht;if(na=o,(ht=l)&&!c)for(z=i;z!==null;)o=z,l=o.child,o.tag===22&&o.memoizedState!==null?um(i):l!==null?(l.return=o,z=l):um(i);for(;s!==null;)z=s,oS(s),s=s.sibling;z=i,na=a,ht=c}cm(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,z=s):cm(e)}}function cm(e){for(;z!==null;){var t=z;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ht||nl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ht)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:pn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&qp(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}qp(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&to(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}ht||t.flags&512&&Cd(t)}catch(u){Me(t,t.return,u)}}if(t===e){z=null;break}if(n=t.sibling,n!==null){n.return=t.return,z=n;break}z=t.return}}function lm(e){for(;z!==null;){var t=z;if(t===e){z=null;break}var n=t.sibling;if(n!==null){n.return=t.return,z=n;break}z=t.return}}function um(e){for(;z!==null;){var t=z;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nl(4,t)}catch(l){Me(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Me(t,i,l)}}var s=t.return;try{Cd(t)}catch(l){Me(t,s,l)}break;case 5:var o=t.return;try{Cd(t)}catch(l){Me(t,o,l)}}}catch(l){Me(t,t.return,l)}if(t===e){z=null;break}var a=t.sibling;if(a!==null){a.return=t.return,z=a;break}z=t.return}}var Gk=Math.ceil,lc=rr.ReactCurrentDispatcher,Qf=rr.ReactCurrentOwner,on=rr.ReactCurrentBatchConfig,pe=0,tt=null,qe=null,st=0,zt=0,Ni=Mr(0),Qe=0,ho=null,ei=0,rl=0,Xf=0,Hs=null,Dt=null,Zf=0,Zi=1/0,Hn=null,uc=!1,Td=null,wr=null,ra=!1,pr=null,dc=0,Ws=0,xd=null,Ra=-1,_a=0;function Tt(){return pe&6?ze():Ra!==-1?Ra:Ra=ze()}function Cr(e){return e.mode&1?pe&2&&st!==0?st&-st:Ok.transition!==null?(_a===0&&(_a=Hv()),_a):(e=ye,e!==0||(e=window.event,e=e===void 0?16:Qv(e.type)),e):1}function bn(e,t,n,r){if(50<Ws)throw Ws=0,xd=null,Error(L(185));Io(e,n,r),(!(pe&2)||e!==tt)&&(e===tt&&(!(pe&2)&&(rl|=n),Qe===4&&dr(e,st)),$t(e,r),n===1&&pe===0&&!(t.mode&1)&&(Zi=ze()+500,Zc&&Fr()))}function $t(e,t){var n=e.callbackNode;OC(e,t);var r=Ga(e,e===tt?st:0);if(r===0)n!==null&&Sp(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Sp(n),t===1)e.tag===0?Pk(dm.bind(null,e)):gy(dm.bind(null,e)),xk(function(){!(pe&6)&&Fr()}),n=null;else{switch(Wv(r)){case 1:n=Tf;break;case 4:n=Bv;break;case 16:n=Ka;break;case 536870912:n=zv;break;default:n=Ka}n=pS(n,aS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function aS(e,t){if(Ra=-1,_a=0,pe&6)throw Error(L(327));var n=e.callbackNode;if(Ui()&&e.callbackNode!==n)return null;var r=Ga(e,e===tt?st:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=fc(e,r);else{t=r;var i=pe;pe|=2;var s=lS();(tt!==e||st!==t)&&(Hn=null,Zi=ze()+500,Gr(e,t));do try{Qk();break}catch(a){cS(e,a)}while(!0);Ff(),lc.current=s,pe=i,qe!==null?t=0:(tt=null,st=0,t=Qe)}if(t!==0){if(t===2&&(i=Zu(e),i!==0&&(r=i,t=Rd(e,i))),t===1)throw n=ho,Gr(e,0),dr(e,r),$t(e,ze()),n;if(t===6)dr(e,r);else{if(i=e.current.alternate,!(r&30)&&!Jk(i)&&(t=fc(e,r),t===2&&(s=Zu(e),s!==0&&(r=s,t=Rd(e,s))),t===1))throw n=ho,Gr(e,0),dr(e,r),$t(e,ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(L(345));case 2:Vr(e,Dt,Hn);break;case 3:if(dr(e,r),(r&130023424)===r&&(t=Zf+500-ze(),10<t)){if(Ga(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Tt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ad(Vr.bind(null,e,Dt,Hn),t);break}Vr(e,Dt,Hn);break;case 4:if(dr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Sn(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gk(r/1960))-r,10<r){e.timeoutHandle=ad(Vr.bind(null,e,Dt,Hn),r);break}Vr(e,Dt,Hn);break;case 5:Vr(e,Dt,Hn);break;default:throw Error(L(329))}}}return $t(e,ze()),e.callbackNode===n?aS.bind(null,e):null}function Rd(e,t){var n=Hs;return e.current.memoizedState.isDehydrated&&(Gr(e,t).flags|=256),e=fc(e,t),e!==2&&(t=Dt,Dt=n,t!==null&&_d(t)),e}function _d(e){Dt===null?Dt=e:Dt.push.apply(Dt,e)}function Jk(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!wn(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function dr(e,t){for(t&=~Xf,t&=~rl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Sn(t),r=1<<n;e[n]=-1,t&=~r}}function dm(e){if(pe&6)throw Error(L(327));Ui();var t=Ga(e,0);if(!(t&1))return $t(e,ze()),null;var n=fc(e,t);if(e.tag!==0&&n===2){var r=Zu(e);r!==0&&(t=r,n=Rd(e,r))}if(n===1)throw n=ho,Gr(e,0),dr(e,t),$t(e,ze()),n;if(n===6)throw Error(L(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vr(e,Dt,Hn),$t(e,ze()),null}function eh(e,t){var n=pe;pe|=1;try{return e(t)}finally{pe=n,pe===0&&(Zi=ze()+500,Zc&&Fr())}}function ti(e){pr!==null&&pr.tag===0&&!(pe&6)&&Ui();var t=pe;pe|=1;var n=on.transition,r=ye;try{if(on.transition=null,ye=1,e)return e()}finally{ye=r,on.transition=n,pe=t,!(pe&6)&&Fr()}}function th(){zt=Ni.current,_e(Ni)}function Gr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Tk(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Lf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Za();break;case 3:Qi(),_e(Ft),_e(vt),Hf();break;case 5:zf(r);break;case 4:Qi();break;case 13:_e(Ae);break;case 19:_e(Ae);break;case 10:Uf(r.type._context);break;case 22:case 23:th()}n=n.return}if(tt=e,qe=e=kr(e.current,null),st=zt=t,Qe=0,ho=null,Xf=rl=ei=0,Dt=Hs=null,Wr!==null){for(t=0;t<Wr.length;t++)if(n=Wr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Wr=null}return e}function cS(e,t){do{var n=qe;try{if(Ff(),Ea.current=cc,ac){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ac=!1}if(Zr=0,Ze=Ge=De=null,Bs=!1,lo=0,Qf.current=null,n===null||n.return===null){Qe=1,ho=t,qe=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=st,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var u=d.alternate;u?(d.updateQueue=u.updateQueue,d.memoizedState=u.memoizedState,d.lanes=u.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=Xp(o);if(h!==null){h.flags&=-257,Zp(h,o,a,s,t),h.mode&1&&Qp(s,c,t),t=h,l=c;var m=t.updateQueue;if(m===null){var p=new Set;p.add(l),t.updateQueue=p}else m.add(l);break e}else{if(!(t&1)){Qp(s,c,t),nh();break e}l=Error(L(426))}}else if(Oe&&a.mode&1){var v=Xp(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Zp(v,o,a,s,t),jf(Xi(l,a));break e}}s=l=Xi(l,a),Qe!==4&&(Qe=2),Hs===null?Hs=[s]:Hs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=Wy(s,l,t);Wp(s,g);break e;case 1:a=l;var y=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(wr===null||!wr.has(S)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=qy(s,a,t);Wp(s,w);break e}}s=s.return}while(s!==null)}dS(n)}catch(k){t=k,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function lS(){var e=lc.current;return lc.current=cc,e===null?cc:e}function nh(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),tt===null||!(ei&268435455)&&!(rl&268435455)||dr(tt,st)}function fc(e,t){var n=pe;pe|=2;var r=lS();(tt!==e||st!==t)&&(Hn=null,Gr(e,t));do try{Yk();break}catch(i){cS(e,i)}while(!0);if(Ff(),pe=n,lc.current=r,qe!==null)throw Error(L(261));return tt=null,st=0,Qe}function Yk(){for(;qe!==null;)uS(qe)}function Qk(){for(;qe!==null&&!CC();)uS(qe)}function uS(e){var t=hS(e.alternate,e,zt);e.memoizedProps=e.pendingProps,t===null?dS(e):qe=t,Qf.current=null}function dS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Hk(n,t),n!==null){n.flags&=32767,qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,qe=null;return}}else if(n=zk(n,t,zt),n!==null){qe=n;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);Qe===0&&(Qe=5)}function Vr(e,t,n){var r=ye,i=on.transition;try{on.transition=null,ye=1,Xk(e,t,n,r)}finally{on.transition=i,ye=r}return null}function Xk(e,t,n,r){do Ui();while(pr!==null);if(pe&6)throw Error(L(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(L(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(NC(e,s),e===tt&&(qe=tt=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ra||(ra=!0,pS(Ka,function(){return Ui(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=on.transition,on.transition=null;var o=ye;ye=1;var a=pe;pe|=4,Qf.current=null,qk(e,n),sS(n,e),yk(sd),Ja=!!id,sd=id=null,e.current=n,Kk(n),kC(),pe=a,ye=o,on.transition=s}else e.current=n;if(ra&&(ra=!1,pr=e,dc=i),s=e.pendingLanes,s===0&&(wr=null),xC(n.stateNode),$t(e,ze()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(uc)throw uc=!1,e=Td,Td=null,e;return dc&1&&e.tag!==0&&Ui(),s=e.pendingLanes,s&1?e===xd?Ws++:(Ws=0,xd=e):Ws=0,Fr(),null}function Ui(){if(pr!==null){var e=Wv(dc),t=on.transition,n=ye;try{if(on.transition=null,ye=16>e?16:e,pr===null)var r=!1;else{if(e=pr,pr=null,dc=0,pe&6)throw Error(L(331));var i=pe;for(pe|=4,z=e.current;z!==null;){var s=z,o=s.child;if(z.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(z=c;z!==null;){var d=z;switch(d.tag){case 0:case 11:case 15:zs(8,d,s)}var f=d.child;if(f!==null)f.return=d,z=f;else for(;z!==null;){d=z;var u=d.sibling,h=d.return;if(nS(d),d===c){z=null;break}if(u!==null){u.return=h,z=u;break}z=h}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,z=o;else e:for(;z!==null;){if(s=z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:zs(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,z=g;break e}z=s.return}}var y=e.current;for(z=y;z!==null;){o=z;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,z=S;else e:for(o=y;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:nl(9,a)}}catch(k){Me(a,a.return,k)}if(a===o){z=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,z=w;break e}z=a.return}}if(pe=i,Fr(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(Gc,e)}catch{}r=!0}return r}finally{ye=n,on.transition=t}}return!1}function fm(e,t,n){t=Xi(n,t),t=Wy(e,t,1),e=br(e,t,1),t=Tt(),e!==null&&(Io(e,1,t),$t(e,t))}function Me(e,t,n){if(e.tag===3)fm(e,e,n);else for(;t!==null;){if(t.tag===3){fm(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wr===null||!wr.has(r))){e=Xi(n,e),e=qy(t,e,1),t=br(t,e,1),e=Tt(),t!==null&&(Io(t,1,e),$t(t,e));break}}t=t.return}}function Zk(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Tt(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(st&n)===n&&(Qe===4||Qe===3&&(st&130023424)===st&&500>ze()-Zf?Gr(e,0):Xf|=n),$t(e,t)}function fS(e,t){t===0&&(e.mode&1?(t=Ko,Ko<<=1,!(Ko&130023424)&&(Ko=4194304)):t=1);var n=Tt();e=Zn(e,t),e!==null&&(Io(e,t,n),$t(e,n))}function eE(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),fS(e,n)}function tE(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(t),fS(e,n)}var hS;hS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ft.current)Mt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Mt=!1,Bk(e,t,n);Mt=!!(e.flags&131072)}else Mt=!1,Oe&&t.flags&1048576&&vy(t,nc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;xa(e,t),e=t.pendingProps;var i=Gi(t,vt.current);Fi(t,n),i=qf(null,t,r,e,i,n);var s=Kf();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ut(r)?(s=!0,ec(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Vf(t),i.updater=tl,t.stateNode=i,i._reactInternals=t,pd(t,r,e,n),t=vd(null,t,r,!0,s,n)):(t.tag=0,Oe&&s&&Df(t),wt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(xa(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=rE(r),e=pn(r,e),i){case 0:t=gd(null,t,r,e,n);break e;case 1:t=nm(null,t,r,e,n);break e;case 11:t=em(null,t,r,e,n);break e;case 14:t=tm(null,t,r,pn(r.type,e),n);break e}throw Error(L(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pn(r,i),gd(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pn(r,i),nm(e,t,r,i,n);case 3:e:{if(Yy(t),e===null)throw Error(L(387));r=t.pendingProps,s=t.memoizedState,i=s.element,ky(e,t),sc(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Xi(Error(L(423)),t),t=rm(e,t,r,n,i);break e}else if(r!==i){i=Xi(Error(L(424)),t),t=rm(e,t,r,n,i);break e}else for(qt=Sr(t.stateNode.containerInfo.firstChild),Kt=t,Oe=!0,gn=null,n=wy(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ji(),r===i){t=er(e,t,n);break e}wt(e,t,r,n)}t=t.child}return t;case 5:return Ey(t),e===null&&dd(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,od(r,i)?o=null:s!==null&&od(r,s)&&(t.flags|=32),Jy(e,t),wt(e,t,o,n),t.child;case 6:return e===null&&dd(t),null;case 13:return Qy(e,t,n);case 4:return Bf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Yi(t,null,r,n):wt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pn(r,i),em(e,t,r,i,n);case 7:return wt(e,t,t.pendingProps,n),t.child;case 8:return wt(e,t,t.pendingProps.children,n),t.child;case 12:return wt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Ee(rc,r._currentValue),r._currentValue=o,s!==null)if(wn(s.value,o)){if(s.children===i.children&&!Ft.current){t=er(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Yn(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),fd(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(L(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fd(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Fi(t,n),i=cn(i),r=r(i),t.flags|=1,wt(e,t,r,n),t.child;case 14:return r=t.type,i=pn(r,t.pendingProps),i=pn(r.type,i),tm(e,t,r,i,n);case 15:return Ky(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pn(r,i),xa(e,t),t.tag=1,Ut(r)?(e=!0,ec(t)):e=!1,Fi(t,n),Hy(t,r,i),pd(t,r,i,n),vd(null,t,r,!0,e,n);case 19:return Xy(e,t,n);case 22:return Gy(e,t,n)}throw Error(L(156,t.tag))};function pS(e,t){return Vv(e,t)}function nE(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(e,t,n,r){return new nE(e,t,n,r)}function rh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rE(e){if(typeof e=="function")return rh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Cf)return 11;if(e===kf)return 14}return 2}function kr(e,t){var n=e.alternate;return n===null?(n=sn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ia(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")rh(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ci:return Jr(n.children,i,s,t);case wf:o=8,i|=8;break;case Fu:return e=sn(12,n,t,i|2),e.elementType=Fu,e.lanes=s,e;case Uu:return e=sn(13,n,t,i),e.elementType=Uu,e.lanes=s,e;case $u:return e=sn(19,n,t,i),e.elementType=$u,e.lanes=s,e;case Ev:return il(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Cv:o=10;break e;case kv:o=9;break e;case Cf:o=11;break e;case kf:o=14;break e;case ar:o=16,r=null;break e}throw Error(L(130,e==null?e:typeof e,""))}return t=sn(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Jr(e,t,n,r){return e=sn(7,e,r,t),e.lanes=n,e}function il(e,t,n,r){return e=sn(22,e,r,t),e.elementType=Ev,e.lanes=n,e.stateNode={isHidden:!1},e}function su(e,t,n){return e=sn(6,e,null,t),e.lanes=n,e}function ou(e,t,n){return t=sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function iE(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$l(0),this.expirationTimes=$l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$l(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ih(e,t,n,r,i,s,o,a,l){return e=new iE(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=sn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vf(s),e}function sE(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function mS(e){if(!e)return Pr;e=e._reactInternals;e:{if(li(e)!==e||e.tag!==1)throw Error(L(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ut(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(L(171))}if(e.tag===1){var n=e.type;if(Ut(n))return my(e,n,t)}return t}function gS(e,t,n,r,i,s,o,a,l){return e=ih(n,r,!0,e,i,s,o,a,l),e.context=mS(null),n=e.current,r=Tt(),i=Cr(n),s=Yn(r,i),s.callback=t??null,br(n,s,i),e.current.lanes=i,Io(e,i,r),$t(e,r),e}function sl(e,t,n,r){var i=t.current,s=Tt(),o=Cr(i);return n=mS(n),t.context===null?t.context=n:t.pendingContext=n,t=Yn(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=br(i,t,o),e!==null&&(bn(e,i,o,s),ka(e,i,o)),o}function hc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function sh(e,t){hm(e,t),(e=e.alternate)&&hm(e,t)}var vS=typeof reportError=="function"?reportError:function(e){console.error(e)};function oh(e){this._internalRoot=e}ol.prototype.render=oh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));sl(e,t,null,null)};ol.prototype.unmount=oh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ti(function(){sl(null,e,null,null)}),t[Xn]=null}};function ol(e){this._internalRoot=e}ol.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ur.length&&t!==0&&t<ur[n].priority;n++);ur.splice(n,0,e),n===0&&Yv(e)}};function ah(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function al(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pm(){}function oE(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=hc(o);s.call(c)}}var o=gS(t,r,e,0,null,!1,!1,"",pm);return e._reactRootContainer=o,e[Xn]=o.current,io(e.nodeType===8?e.parentNode:e),ti(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=hc(l);a.call(c)}}var l=ih(e,0,!1,null,null,!1,!1,"",pm);return e._reactRootContainer=l,e[Xn]=l.current,io(e.nodeType===8?e.parentNode:e),ti(function(){sl(t,l,n,r)}),l}function cl(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=hc(o);a.call(l)}}sl(t,o,e,i)}else o=oE(n,t,e,i,r);return hc(o)}qv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=As(t.pendingLanes);n!==0&&(xf(t,n|1),$t(t,ze()),!(pe&6)&&(Zi=ze()+500,Fr()))}break;case 13:ti(function(){var r=Zn(e,1);if(r!==null){var i=Tt();bn(r,e,1,i)}}),sh(e,1)}};Rf=function(e){if(e.tag===13){var t=Zn(e,134217728);if(t!==null){var n=Tt();bn(t,e,134217728,n)}sh(e,134217728)}};Kv=function(e){if(e.tag===13){var t=Cr(e),n=Zn(e,t);if(n!==null){var r=Tt();bn(n,e,t,r)}sh(e,t)}};Gv=function(){return ye};Jv=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};Yu=function(e,t,n){switch(t){case"input":if(zu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Xc(r);if(!i)throw Error(L(90));xv(r),zu(r,i)}}}break;case"textarea":_v(e,n);break;case"select":t=n.value,t!=null&&Di(e,!!n.multiple,t,!1)}};Lv=eh;jv=ti;var aE={usingClientEntryPoint:!1,Events:[Oo,xi,Xc,Av,Dv,eh]},Es={findFiberByHostInstance:Hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cE={bundleType:Es.bundleType,version:Es.version,rendererPackageName:Es.rendererPackageName,rendererConfig:Es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Uv(e),e===null?null:e.stateNode},findFiberByHostInstance:Es.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ia.isDisabled&&ia.supportsFiber)try{Gc=ia.inject(cE),An=ia}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aE;Xt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ah(t))throw Error(L(200));return sE(e,t,null,n)};Xt.createRoot=function(e,t){if(!ah(e))throw Error(L(299));var n=!1,r="",i=vS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=ih(e,1,!1,null,null,n,!1,r,i),e[Xn]=t.current,io(e.nodeType===8?e.parentNode:e),new oh(t)};Xt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=Uv(t),e=e===null?null:e.stateNode,e};Xt.flushSync=function(e){return ti(e)};Xt.hydrate=function(e,t,n){if(!al(t))throw Error(L(200));return cl(null,e,t,!0,n)};Xt.hydrateRoot=function(e,t,n){if(!ah(e))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=vS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=gS(t,null,e,1,n??null,i,!1,s,o),e[Xn]=t.current,io(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ol(t)};Xt.render=function(e,t,n){if(!al(t))throw Error(L(200));return cl(null,e,t,!1,n)};Xt.unmountComponentAtNode=function(e){if(!al(e))throw Error(L(40));return e._reactRootContainer?(ti(function(){cl(null,null,e,!1,function(){e._reactRootContainer=null,e[Xn]=null})}),!0):!1};Xt.unstable_batchedUpdates=eh;Xt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!al(n))throw Error(L(200));if(e==null||e._reactInternals===void 0)throw Error(L(38));return cl(e,t,n,!1,r)};Xt.version="18.3.1-next-f1338f8080-20240426";function yS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yS)}catch(e){console.error(e)}}yS(),yv.exports=Xt;var ch=yv.exports,mm=ch;ju.createRoot=mm.createRoot,ju.hydrateRoot=mm.hydrateRoot;const lE="modulepreload",uE=function(e){return"/calls-demo/"+e},gm={},dE=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=uE(l),l in gm)return;gm[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":lE,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((u,h)=>{f.addEventListener("load",u),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};let SS=!0,bS=!0;function Pa(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function ui(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==t)return i.apply(this,arguments);const l=c=>{const d=n(c);d&&(a.handleEvent?a.handleEvent(d):a(d))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(a,l),i.apply(this,[o,l])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(a))return s.apply(this,arguments);const l=this._eventMap[t].get(a);return this._eventMap[t].delete(a),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,l])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(o){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),o&&this.addEventListener(t,this["_on"+t]=o)},enumerable:!0,configurable:!0})}function fE(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(SS=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function hE(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(bS=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function wS(){if(typeof window=="object"){if(SS)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function lh(e,t){bS&&console.warn(e+" is deprecated, please use "+t+" instead.")}function pE(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=Pa(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=Pa(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=Pa(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function vm(e){return Object.prototype.toString.call(e)==="[object Object]"}function CS(e){return vm(e)?Object.keys(e).reduce(function(t,n){const r=vm(e[n]),i=r?CS(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function Id(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?Id(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{Id(e,e.get(i),n)})}))}function ym(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(o=>{o.type==="track"&&o.trackIdentifier===t.id&&s.push(o)}),s.forEach(o=>{e.forEach(a=>{a.type===r&&a.trackId===o.id&&Id(e,a,i)})}),i}const Sm=wS;function kS(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const l={};return Object.keys(a).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const d=typeof a[c]=="object"?a[c]:{ideal:a[c]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);const f=function(u,h){return u?u+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(d.ideal!==void 0){l.optional=l.optional||[];let u={};typeof d.ideal=="number"?(u[f("min",c)]=d.ideal,l.optional.push(u),u={},u[f("max",c)]=d.ideal,l.optional.push(u)):(u[f("",c)]=d.ideal,l.optional.push(u))}d.exact!==void 0&&typeof d.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[f("",c)]=d.exact):["min","max"].forEach(u=>{d[u]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[f(u,c)]=d[u])})}),a.advanced&&(l.optional=(l.optional||[]).concat(a.advanced)),l},i=function(a,l){if(t.version>=61)return l(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const c=function(d,f,u){f in d&&!(u in d)&&(d[u]=d[f],delete d[f])};a=JSON.parse(JSON.stringify(a)),c(a.audio,"autoGainControl","googAutoGainControl"),c(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let c=a.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const d=t.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete a.video.facingMode;let f;if(c.exact==="environment"||c.ideal==="environment"?f=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(f=["front"]),f)return n.mediaDevices.enumerateDevices().then(u=>{u=u.filter(m=>m.kind==="videoinput");let h=u.find(m=>f.some(p=>m.label.toLowerCase().includes(p)));return!h&&u.length&&f.includes("back")&&(h=u[u.length-1]),h&&(a.video.deviceId=c.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=r(a.video),Sm("chrome: "+JSON.stringify(a)),l(a)})}a.video=r(a.video)}return Sm("chrome: "+JSON.stringify(a)),l(a)},s=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,l,c){i(a,d=>{n.webkitGetUserMedia(d,l,f=>{c&&c(s(f))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(l){return i(l,c=>a(c).then(d=>{if(c.audio&&!d.getAudioTracks().length||c.video&&!d.getVideoTracks().length)throw d.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return d},d=>Promise.reject(s(d))))}}}function mE(e,t){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&e.navigator.mediaDevices){if(typeof t!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(i=>{const s=r.video&&r.video.width,o=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:a||3}},s&&(r.video.mandatory.maxWidth=s),o&&(r.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(r)})}}}function ES(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function TS(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else ui(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function xS(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,l){let c=i.apply(this,arguments);return c||(c=t(this,a),this._senders.push(c)),c};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const l=this._senders.indexOf(a);l!==-1&&this._senders.splice(l,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(t(this,o))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(l=>l.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function RS(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[r,i,s]=arguments;if(arguments.length>0&&typeof r=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof r!="function"))return t.apply(this,[]);const o=function(l){const c={};return l.result().forEach(f=>{const u={id:f.id,timestamp:f.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[f.type]||f.type};f.names().forEach(h=>{u[h]=f.stat(h)}),c[u.id]=u}),c},a=function(l){return new Map(Object.keys(l).map(c=>[c,l[c]]))};if(arguments.length>=2){const l=function(c){i(a(o(c)))};return t.apply(this,[l,r])}return new Promise((l,c)=>{t.apply(this,[function(d){l(a(o(d)))},c])}).then(i,s)}}function _S(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>ym(o,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),ui(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>ym(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function IS(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(l)===-1&&this._shimmedLocalStreams[a.id].push(l):this._shimmedLocalStreams[a.id]=[a,l],l};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(c=>{if(this.getSenders().find(f=>f.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const l=this.getSenders().filter(c=>a.indexOf(c)===-1);this._shimmedLocalStreams[o.id]=[o].concat(l)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const l=this._shimmedLocalStreams[a].indexOf(o);l!==-1&&this._shimmedLocalStreams[a].splice(l,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function PS(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return IS(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const d=n.apply(this);return this._reverseStreams=this._reverseStreams||{},d.map(f=>this._reverseStreams[f.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(d){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.getTracks().forEach(f=>{if(this.getSenders().find(h=>h.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[d.id]){const f=new e.MediaStream(d.getTracks());this._streams[d.id]=f,this._reverseStreams[f.id]=d,d=f}r.apply(this,[d])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(d){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[d.id]||d]),delete this._reverseStreams[this._streams[d.id]?this._streams[d.id].id:d.id],delete this._streams[d.id]},e.RTCPeerConnection.prototype.addTrack=function(d,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const u=[].slice.call(arguments,1);if(u.length!==1||!u[0].getTracks().find(p=>p===d))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(p=>p.track===d))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const m=this._streams[f.id];if(m)m.addTrack(d),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const p=new e.MediaStream([d]);this._streams[f.id]=p,this._reverseStreams[p.id]=f,this.addStream(p)}return this.getSenders().find(p=>p.track===d)};function s(c,d){let f=d.sdp;return Object.keys(c._reverseStreams||[]).forEach(u=>{const h=c._reverseStreams[u],m=c._streams[h.id];f=f.replace(new RegExp(m.id,"g"),h.id)}),new RTCSessionDescription({type:d.type,sdp:f})}function o(c,d){let f=d.sdp;return Object.keys(c._reverseStreams||[]).forEach(u=>{const h=c._reverseStreams[u],m=c._streams[h.id];f=f.replace(new RegExp(h.id,"g"),m.id)}),new RTCSessionDescription({type:d.type,sdp:f})}["createOffer","createAnswer"].forEach(function(c){const d=e.RTCPeerConnection.prototype[c],f={[c](){const u=arguments;return arguments.length&&typeof arguments[0]=="function"?d.apply(this,[m=>{const p=s(this,m);u[0].apply(null,[p])},m=>{u[1]&&u[1].apply(null,m)},arguments[2]]):d.apply(this,arguments).then(m=>s(this,m))}};e.RTCPeerConnection.prototype[c]=f[c]});const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const c=l.get.apply(this);return c.type===""?c:s(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!d._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(d._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let u;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(p=>d.track===p)&&(u=this._streams[h])}),u&&(u.getTracks().length===1?this.removeStream(this._reverseStreams[u.id]):u.removeTrack(d.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Pd(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function OS(e,t){ui(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const bm=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:OS,shimAddTrackRemoveTrack:PS,shimAddTrackRemoveTrackWithNative:IS,shimGetDisplayMedia:mE,shimGetSendersWithDtmf:xS,shimGetStats:RS,shimGetUserMedia:kS,shimMediaStream:ES,shimOnTrack:TS,shimPeerConnection:Pd,shimSenderReceiverGetStats:_S},Symbol.toStringTag,{value:"Module"}));function NS(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){lh("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,a,l){a in o&&!(l in o)&&(o[l]=o[a],delete o[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function gE(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function AS(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Od(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(l=>{if(t.version<53&&!o)try{l.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;l.forEach((d,f)=>{l.set(f,Object.assign({},d,{type:n[d.type]||d.type}))})}return l}).then(o,a)}}function DS(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function LS(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),ui(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function jS(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){lh("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function MS(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function FS(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function US(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function $S(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function VS(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const wm=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:FS,shimCreateAnswer:VS,shimCreateOffer:$S,shimGetDisplayMedia:gE,shimGetParameters:US,shimGetUserMedia:NS,shimOnTrack:AS,shimPeerConnection:Od,shimRTCDataChannel:MS,shimReceiverGetStats:LS,shimRemoveStream:jS,shimSenderGetStats:DS},Symbol.toStringTag,{value:"Module"}));function BS(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function zS(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),t.apply(r,arguments)}}}function HS(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(c,d){const f=arguments.length>=2?arguments[2]:arguments[0],u=n.apply(this,[f]);return d?(u.then(c,d),Promise.resolve()):u},t.createAnswer=function(c,d){const f=arguments.length>=2?arguments[2]:arguments[0],u=r.apply(this,[f]);return d?(u.then(c,d),Promise.resolve()):u};let a=function(l,c,d){const f=i.apply(this,[l]);return d?(f.then(c,d),Promise.resolve()):f};t.setLocalDescription=a,a=function(l,c,d){const f=s.apply(this,[l]);return d?(f.then(c,d),Promise.resolve()):f},t.setRemoteDescription=a,a=function(l,c,d){const f=o.apply(this,[l]);return d?(f.then(c,d),Promise.resolve()):f},t.addIceCandidate=a}function WS(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(qS(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function qS(e){return e&&e.video!==void 0?Object.assign({},e,{video:CS(e.video)}):e}function KS(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(lh("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function GS(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function JS(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function YS(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const Cm=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:YS,shimCallbacksAPI:HS,shimConstraints:qS,shimCreateOfferLegacy:JS,shimGetUserMedia:WS,shimLocalStreamsAPI:BS,shimRTCIceServerUrls:KS,shimRemoteStreamsAPI:zS,shimTrackEventTransceiver:GS},Symbol.toStringTag,{value:"Module"}));var QS={exports:{}};(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const l=s[a],c=t.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(c){const d=t.parseRtpMap(c),f=t.matchPrefix(n,"a=fmtp:"+l+" ");switch(d.parameters=f.length?t.parseFmtp(f[0]):{},d.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(t.parseRtcpFb),r.codecs.push(d),d.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(d.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(t.parseExtmap(a))});const o=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(l=>{a.rtcpFeedback.find(d=>d.type===l.type&&d.parameter===l.parameter)||a.rtcpFeedback.push(l)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=t.writeRtpMap(o),i+=t.writeFmtp(o),i+=t.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=t.writeExtmap(o)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="cname"),l=a.length>0&&a[0].ssrc;let c;const d=t.matchPrefix(n,"a=ssrc-group:FID").map(u=>u.substring(17).split(" ").map(m=>parseInt(m,10)));d.length>0&&d[0].length>1&&d[0][0]===l&&(c=d[0][1]),i.codecs.forEach(u=>{if(u.name.toUpperCase()==="RTX"&&u.parameters.apt){let h={ssrc:l,codecPayloadType:parseInt(u.parameters.apt,10)};l&&c&&(h.rtx={ssrc:c}),r.push(h),s&&(h=JSON.parse(JSON.stringify(h)),h.fec={ssrc:l,mechanism:o?"red+ulpfec":"red"},r.push(h))}}),r.length===0&&l&&r.push({ssrc:l});let f=t.matchPrefix(n,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substring(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substring(5),10)*1e3*.95-50*40*8:f=void 0,r.forEach(u=>{u.maxBitrate=f})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=t.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(o=>t.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=t.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=t.matchPrefix(n,"a=sctpmap:");if(a.length>0){const l=a[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const o=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(QS);var XS=QS.exports;const $i=ov(XS),vE=sv({__proto__:null,default:$i},[XS]);function Oa(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=$i.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,ui(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Nd(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||ui(e,"icecandidate",t=>{if(t.candidate){const n=$i.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Na(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const l=$i.splitSections(a.sdp);return l.shift(),l.some(c=>{const d=$i.parseMLine(c);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},r=function(a){const l=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const c=parseInt(l[1],10);return c!==c?-1:c},i=function(a){let l=65536;return t.browser==="firefox"&&(t.version<57?a===-1?l=16384:l=2147483637:t.version<60?l=t.version===57?65535:65536:l=2147483637),l},s=function(a,l){let c=65536;t.browser==="firefox"&&t.version===57&&(c=65535);const d=$i.matchPrefix(a.sdp,"a=max-message-size:");return d.length>0?c=parseInt(d[0].substring(19),10):t.browser==="firefox"&&l!==-1&&(c=2147483637),c},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const l=r(arguments[0]),c=i(l),d=s(arguments[0],l);let f;c===0&&d===0?f=Number.POSITIVE_INFINITY:c===0||d===0?f=Math.max(c,d):f=Math.min(c,d);const u={};Object.defineProperty(u,"maxMessageSize",{get(){return f}}),this._sctp=u}return o.apply(this,arguments)}}function Aa(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const a=arguments[0],l=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&l>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},ui(e,"datachannel",r=>(t(r.channel,r.target),r))}function Ad(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Dd(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function Da(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function La(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}const yE=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Dd,shimAddIceCandidateNullOrEmpty:Da,shimConnectionState:Ad,shimMaxMessageSize:Na,shimParameterlessSetLocalDescription:La,shimRTCIceCandidate:Oa,shimRTCIceCandidateRelayProtocol:Nd,shimSendThrowTypeError:Aa},Symbol.toStringTag,{value:"Module"}));function SE({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=wS,r=pE(e),i={browserDetails:r,commonShim:yE,extractVersion:Pa,disableLog:fE,disableWarnings:hE,sdp:vE};switch(r.browser){case"chrome":if(!bm||!Pd||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=bm,Da(e,r),La(e),kS(e,r),ES(e),Pd(e,r),TS(e),PS(e,r),xS(e),RS(e),_S(e),OS(e,r),Oa(e),Nd(e),Ad(e),Na(e,r),Aa(e),Dd(e,r);break;case"firefox":if(!wm||!Od||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=wm,Da(e,r),La(e),NS(e,r),Od(e,r),AS(e),jS(e),DS(e),LS(e),MS(e),FS(e),US(e),$S(e),VS(e),Oa(e),Ad(e),Na(e,r),Aa(e);break;case"safari":if(!Cm||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Cm,Da(e,r),La(e),KS(e),JS(e),HS(e),BS(e),zS(e),GS(e),WS(e),YS(e),Oa(e),Nd(e),Na(e,r),Aa(e),Dd(e,r);break;default:n("Unsupported browser!");break}return i}SE({window:typeof window>"u"?void 0:window});function ls(e){let t=typeof e;if(t=="object"){if(Array.isArray(e))return"array";if(e===null)return"null"}return t}function pc(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}let Kn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),ll=[];for(let e=0;e<Kn.length;e++)ll[Kn[e].charCodeAt(0)]=e;ll[45]=Kn.indexOf("+");ll[95]=Kn.indexOf("/");function bE(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let n=new Uint8Array(t),r=0,i=0,s,o=0;for(let a=0;a<e.length;a++){if(s=ll[e.charCodeAt(a)],s===void 0)switch(e[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:n[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:n[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:n[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)}function wE(e){let t="",n=0,r,i=0;for(let s=0;s<e.length;s++)switch(r=e[s],n){case 0:t+=Kn[r>>2],i=(r&3)<<4,n=1;break;case 1:t+=Kn[i|r>>4],i=(r&15)<<2,n=2;break;case 2:t+=Kn[i|r>>6],t+=Kn[r&63],n=0;break}return n&&(t+=Kn[i],t+="=",n==1&&(t+="=")),t}var mc;(function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(n,r,i,s,o)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:i,wireType:s,data:o})},e.onWrite=(n,r,i)=>{for(let{no:s,wireType:o,data:a}of e.list(r))i.tag(s,o).raw(a)},e.list=(n,r)=>{if(t(n)){let i=n[e.symbol];return r?i.filter(s=>s.no==r):i}return[]},e.last=(n,r)=>e.list(n,r).slice(-1)[0];const t=n=>n&&Array.isArray(n[e.symbol])})(mc||(mc={}));function CE(e,t){return Object.assign(Object.assign({},e),t)}var Ve;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(Ve||(Ve={}));function kE(){let e=0,t=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,!(n&128))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function au(e,t,n){for(let s=0;s<28;s=s+7){const o=e>>>s,a=!(!(o>>>7)&&t==0),l=(a?o|128:o)&255;if(n.push(l),!a)return}const r=e>>>28&15|(t&7)<<4,i=!!(t>>3);if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=t>>>s,a=!!(o>>>7),l=(a?o|128:o)&255;if(n.push(l),!a)return}n.push(t>>>31&1)}}const ja=65536*65536;function ZS(e){let t=e[0]=="-";t&&(e=e.slice(1));const n=1e6;let r=0,i=0;function s(o,a){const l=Number(e.slice(o,a));i*=n,r=r*n+l,r>=ja&&(i=i+(r/ja|0),r=r%ja)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[t,r,i]}function Ld(e,t){if(t>>>0<=2097151)return""+(ja*t+(e>>>0));let n=e&16777215,r=(e>>>24|t<<8)>>>0&16777215,i=t>>16&65535,s=n+r*6777216+i*6710656,o=r+i*8147497,a=i*2,l=1e7;s>=l&&(o+=Math.floor(s/l),s%=l),o>=l&&(a+=Math.floor(o/l),o%=l);function c(d,f){let u=d?String(d):"";return f?"0000000".slice(u.length)+u:u}return c(a,0)+c(o,a)+c(s,1)}function km(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}function EE(){let e=this.buf[this.pos++],t=e&127;if(!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,!(e&128))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;e&128&&n<10;n++)e=this.buf[this.pos++];if(e&128)throw new Error("invalid varint");return this.assertBounds(),t>>>0}let Ce;function TE(){const e=new DataView(new ArrayBuffer(8));Ce=globalThis.BigInt!==void 0&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}TE();function e0(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const t0=/^-?[0-9]+$/,gc=4294967296,sa=2147483648;class n0{constructor(t,n){this.lo=t|0,this.hi=n|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let t=this.hi*gc+(this.lo>>>0);if(!Number.isSafeInteger(t))throw new Error("cannot convert to safe number");return t}}class gt extends n0{static from(t){if(Ce)switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=="")throw new Error("string is no integer");t=Ce.C(t);case"number":if(t===0)return this.ZERO;t=Ce.C(t);case"bigint":if(!t)return this.ZERO;if(t<Ce.UMIN)throw new Error("signed value for ulong");if(t>Ce.UMAX)throw new Error("ulong too large");return Ce.V.setBigUint64(0,t,!0),new gt(Ce.V.getInt32(0,!0),Ce.V.getInt32(4,!0))}else switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=t.trim(),!t0.test(t))throw new Error("string is no integer");let[n,r,i]=ZS(t);if(n)throw new Error("signed value for ulong");return new gt(r,i);case"number":if(t==0)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");if(t<0)throw new Error("signed value for ulong");return new gt(t,t/gc)}throw new Error("unknown value "+typeof t)}toString(){return Ce?this.toBigInt().toString():Ld(this.lo,this.hi)}toBigInt(){return e0(Ce),Ce.V.setInt32(0,this.lo,!0),Ce.V.setInt32(4,this.hi,!0),Ce.V.getBigUint64(0,!0)}}gt.ZERO=new gt(0,0);class Te extends n0{static from(t){if(Ce)switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=="")throw new Error("string is no integer");t=Ce.C(t);case"number":if(t===0)return this.ZERO;t=Ce.C(t);case"bigint":if(!t)return this.ZERO;if(t<Ce.MIN)throw new Error("signed long too small");if(t>Ce.MAX)throw new Error("signed long too large");return Ce.V.setBigInt64(0,t,!0),new Te(Ce.V.getInt32(0,!0),Ce.V.getInt32(4,!0))}else switch(typeof t){case"string":if(t=="0")return this.ZERO;if(t=t.trim(),!t0.test(t))throw new Error("string is no integer");let[n,r,i]=ZS(t);if(n){if(i>sa||i==sa&&r!=0)throw new Error("signed long too small")}else if(i>=sa)throw new Error("signed long too large");let s=new Te(r,i);return n?s.negate():s;case"number":if(t==0)return this.ZERO;if(!Number.isSafeInteger(t))throw new Error("number is no integer");return t>0?new Te(t,t/gc):new Te(-t,-t/gc).negate()}throw new Error("unknown value "+typeof t)}isNegative(){return(this.hi&sa)!==0}negate(){let t=~this.hi,n=this.lo;return n?n=~n+1:t+=1,new Te(n,t)}toString(){if(Ce)return this.toBigInt().toString();if(this.isNegative()){let t=this.negate();return"-"+Ld(t.lo,t.hi)}return Ld(this.lo,this.hi)}toBigInt(){return e0(Ce),Ce.V.setInt32(0,this.lo,!0),Ce.V.setInt32(4,this.hi,!0),Ce.V.getBigInt64(0,!0)}}Te.ZERO=new Te(0,0);const Em={readUnknownField:!0,readerFactory:e=>new RE(e)};function xE(e){return e?Object.assign(Object.assign({},Em),e):Em}class RE{constructor(t,n){this.varint64=kE,this.uint32=EE,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=n??new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let t=this.uint32(),n=t>>>3,r=t&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(t){let n=this.pos;switch(t){case Ve.Varint:for(;this.buf[this.pos++]&128;);break;case Ve.Bit64:this.pos+=4;case Ve.Bit32:this.pos+=4;break;case Ve.LengthDelimited:let r=this.uint32();this.pos+=r;break;case Ve.StartGroup:let i;for(;(i=this.tag()[1])!==Ve.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return new Te(...this.varint64())}uint64(){return new gt(...this.varint64())}sint64(){let[t,n]=this.varint64(),r=-(t&1);return t=(t>>>1|(n&1)<<31)^r,n=n>>>1^r,new Te(t,n)}bool(){let[t,n]=this.varint64();return t!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new gt(this.sfixed32(),this.sfixed32())}sfixed64(){return new Te(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),n=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(n,n+t)}string(){return this.textDecoder.decode(this.bytes())}}function me(e,t){if(!e)throw new Error(t)}const _E=34028234663852886e22,IE=-34028234663852886e22,PE=4294967295,OE=2147483647,NE=-2147483648;function qs(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>OE||e<NE)throw new Error("invalid int 32: "+e)}function vc(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>PE||e<0)throw new Error("invalid uint 32: "+e)}function uh(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>_E||e<IE))throw new Error("invalid float 32: "+e)}const Tm={writeUnknownFields:!0,writerFactory:()=>new DE};function AE(e){return e?Object.assign(Object.assign({},Tm),e):Tm}class DE{constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let i=0;i<this.chunks.length;i++)t+=this.chunks[i].length;let n=new Uint8Array(t),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,n){return this.uint32((t<<3|n)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(vc(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return qs(t),km(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let n=this.textEncoder.encode(t);return this.uint32(n.byteLength),this.raw(n)}float(t){uh(t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,t,!0),this.raw(n)}double(t){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),this.raw(n)}fixed32(t){vc(t);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t,!0),this.raw(n)}sfixed32(t){qs(t);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,t,!0),this.raw(n)}sint32(t){return qs(t),t=(t<<1^t>>31)>>>0,km(t,this.buf),this}sfixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Te.from(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=gt.from(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(t){let n=Te.from(t);return au(n.lo,n.hi,this.buf),this}sint64(t){let n=Te.from(t),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return au(i,s,this.buf),this}uint64(t){let n=gt.from(t);return au(n.lo,n.hi,this.buf),this}}const xm={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},Rm={ignoreUnknownFields:!1};function LE(e){return e?Object.assign(Object.assign({},Rm),e):Rm}function jE(e){return e?Object.assign(Object.assign({},xm),e):xm}function ME(e,t){var n,r;let i=Object.assign(Object.assign({},e),t);return i.typeRegistry=[...(n=e==null?void 0:e.typeRegistry)!==null&&n!==void 0?n:[],...(r=t==null?void 0:t.typeRegistry)!==null&&r!==void 0?r:[]],i}const r0=Symbol.for("protobuf-ts/message-type");function yc(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);i=="_"?t=!0:/\d/.test(i)?(n.push(i),t=!0):t?(n.push(i.toUpperCase()),t=!1):r==0?n.push(i.toLowerCase()):n.push(i)}return n.join("")}var N;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(N||(N={}));var Ln;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"})(Ln||(Ln={}));var Sc;(function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"})(Sc||(Sc={}));function FE(e){var t,n,r,i;return e.localName=(t=e.localName)!==null&&t!==void 0?t:yc(e.name),e.jsonName=(n=e.jsonName)!==null&&n!==void 0?n:yc(e.name),e.repeat=(r=e.repeat)!==null&&r!==void 0?r:Sc.NO,e.opt=(i=e.opt)!==null&&i!==void 0?i:e.repeat||e.oneof?!1:e.kind=="message",e}function UE(e){if(typeof e!="object"||e===null||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return e[e.oneofKind]===void 0?!1:Object.keys(e).length==2;case"undefined":return Object.keys(e).length==1;default:return!1}}class $E{constructor(t){var n;this.fields=(n=t.fields)!==null&&n!==void 0?n:[]}prepare(){if(this.data)return;const t=[],n=[],r=[];for(let i of this.fields)if(i.oneof)r.includes(i.oneof)||(r.push(i.oneof),t.push(i.oneof),n.push(i.oneof));else switch(n.push(i.localName),i.kind){case"scalar":case"enum":(!i.opt||i.repeat)&&t.push(i.localName);break;case"message":i.repeat&&t.push(i.localName);break;case"map":t.push(i.localName);break}this.data={req:t,known:n,oneofs:Object.values(r)}}is(t,n,r=!1){if(n<0)return!0;if(t==null||typeof t!="object")return!1;this.prepare();let i=Object.keys(t),s=this.data;if(i.length<s.req.length||s.req.some(o=>!i.includes(o))||!r&&i.some(o=>!s.known.includes(o)))return!1;if(n<1)return!0;for(const o of s.oneofs){const a=t[o];if(!UE(a))return!1;if(a.oneofKind===void 0)continue;const l=this.fields.find(c=>c.localName===a.oneofKind);if(!l||!this.field(a[a.oneofKind],l,r,n))return!1}for(const o of this.fields)if(o.oneof===void 0&&!this.field(t[o.localName],o,r,n))return!1;return!0}field(t,n,r,i){let s=n.repeat;switch(n.kind){case"scalar":return t===void 0?n.opt:s?this.scalars(t,n.T,i,n.L):this.scalar(t,n.T,n.L);case"enum":return t===void 0?n.opt:s?this.scalars(t,N.INT32,i):this.scalar(t,N.INT32);case"message":return t===void 0?!0:s?this.messages(t,n.T(),r,i):this.message(t,n.T(),r,i);case"map":if(typeof t!="object"||t===null)return!1;if(i<2)return!0;if(!this.mapKeys(t,n.K,i))return!1;switch(n.V.kind){case"scalar":return this.scalars(Object.values(t),n.V.T,i,n.V.L);case"enum":return this.scalars(Object.values(t),N.INT32,i);case"message":return this.messages(Object.values(t),n.V.T(),r,i)}break}return!0}message(t,n,r,i){return r?n.isAssignable(t,i):n.is(t,i)}messages(t,n,r,i){if(!Array.isArray(t))return!1;if(i<2)return!0;if(r){for(let s=0;s<t.length&&s<i;s++)if(!n.isAssignable(t[s],i-1))return!1}else for(let s=0;s<t.length&&s<i;s++)if(!n.is(t[s],i-1))return!1;return!0}scalar(t,n,r){let i=typeof t;switch(n){case N.UINT64:case N.FIXED64:case N.INT64:case N.SFIXED64:case N.SINT64:switch(r){case Ln.BIGINT:return i=="bigint";case Ln.NUMBER:return i=="number"&&!isNaN(t);default:return i=="string"}case N.BOOL:return i=="boolean";case N.STRING:return i=="string";case N.BYTES:return t instanceof Uint8Array;case N.DOUBLE:case N.FLOAT:return i=="number"&&!isNaN(t);default:return i=="number"&&Number.isInteger(t)}}scalars(t,n,r,i){if(!Array.isArray(t))return!1;if(r<2)return!0;if(Array.isArray(t)){for(let s=0;s<t.length&&s<r;s++)if(!this.scalar(t[s],n,i))return!1}return!0}mapKeys(t,n,r){let i=Object.keys(t);switch(n){case N.INT32:case N.FIXED32:case N.SFIXED32:case N.SINT32:case N.UINT32:return this.scalars(i.slice(0,r).map(s=>parseInt(s)),n,r);case N.BOOL:return this.scalars(i.slice(0,r).map(s=>s=="true"?!0:s=="false"?!1:s),n,r);default:return this.scalars(i,n,r,Ln.STRING)}}}function vn(e,t){switch(t){case Ln.BIGINT:return e.toBigInt();case Ln.NUMBER:return e.toNumber();default:return e.toString()}}class VE{constructor(t){this.info=t}prepare(){var t;if(this.fMap===void 0){this.fMap={};const n=(t=this.info.fields)!==null&&t!==void 0?t:[];for(const r of n)this.fMap[r.name]=r,this.fMap[r.jsonName]=r,this.fMap[r.localName]=r}}assert(t,n,r){if(!t){let i=ls(r);throw(i=="number"||i=="boolean")&&(i=r.toString()),new Error(`Cannot parse JSON ${i} for ${this.info.typeName}#${n}`)}}read(t,n,r){this.prepare();const i=[];for(const[s,o]of Object.entries(t)){const a=this.fMap[s];if(!a){if(!r.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${s}`);continue}const l=a.localName;let c;if(a.oneof){if(o===null&&(a.kind!=="enum"||a.T()[0]!=="google.protobuf.NullValue"))continue;if(i.includes(a.oneof))throw new Error(`Multiple members of the oneof group "${a.oneof}" of ${this.info.typeName} are present in JSON.`);i.push(a.oneof),c=n[a.oneof]={oneofKind:l}}else c=n;if(a.kind=="map"){if(o===null)continue;this.assert(pc(o),a.name,o);const d=c[l];for(const[f,u]of Object.entries(o)){this.assert(u!==null,a.name+" map value",null);let h;switch(a.V.kind){case"message":h=a.V.T().internalJsonRead(u,r);break;case"enum":if(h=this.enum(a.V.T(),u,a.name,r.ignoreUnknownFields),h===!1)continue;break;case"scalar":h=this.scalar(u,a.V.T,a.V.L,a.name);break}this.assert(h!==void 0,a.name+" map value",u);let m=f;a.K==N.BOOL&&(m=m=="true"?!0:m=="false"?!1:m),m=this.scalar(m,a.K,Ln.STRING,a.name).toString(),d[m]=h}}else if(a.repeat){if(o===null)continue;this.assert(Array.isArray(o),a.name,o);const d=c[l];for(const f of o){this.assert(f!==null,a.name,null);let u;switch(a.kind){case"message":u=a.T().internalJsonRead(f,r);break;case"enum":if(u=this.enum(a.T(),f,a.name,r.ignoreUnknownFields),u===!1)continue;break;case"scalar":u=this.scalar(f,a.T,a.L,a.name);break}this.assert(u!==void 0,a.name,o),d.push(u)}}else switch(a.kind){case"message":if(o===null&&a.T().typeName!="google.protobuf.Value"){this.assert(a.oneof===void 0,a.name+" (oneof member)",null);continue}c[l]=a.T().internalJsonRead(o,r,c[l]);break;case"enum":let d=this.enum(a.T(),o,a.name,r.ignoreUnknownFields);if(d===!1)continue;c[l]=d;break;case"scalar":c[l]=this.scalar(o,a.T,a.L,a.name);break}}}enum(t,n,r,i){if(t[0]=="google.protobuf.NullValue"&&me(n===null||n==="NULL_VALUE",`Unable to parse field ${this.info.typeName}#${r}, enum ${t[0]} only accepts null.`),n===null)return 0;switch(typeof n){case"number":return me(Number.isInteger(n),`Unable to parse field ${this.info.typeName}#${r}, enum can only be integral number, got ${n}.`),n;case"string":let s=n;t[2]&&n.substring(0,t[2].length)===t[2]&&(s=n.substring(t[2].length));let o=t[1][s];return typeof o>"u"&&i?!1:(me(typeof o=="number",`Unable to parse field ${this.info.typeName}#${r}, enum ${t[0]} has no value for "${n}".`),o)}me(!1,`Unable to parse field ${this.info.typeName}#${r}, cannot parse enum value from ${typeof n}".`)}scalar(t,n,r,i){let s;try{switch(n){case N.DOUBLE:case N.FLOAT:if(t===null)return 0;if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""){s="empty string";break}if(typeof t=="string"&&t.trim().length!==t.length){s="extra whitespace";break}if(typeof t!="string"&&typeof t!="number")break;let o=Number(t);if(Number.isNaN(o)){s="not a number";break}if(!Number.isFinite(o)){s="too large or small";break}return n==N.FLOAT&&uh(o),o;case N.INT32:case N.FIXED32:case N.SFIXED32:case N.SINT32:case N.UINT32:if(t===null)return 0;let a;if(typeof t=="number"?a=t:t===""?s="empty string":typeof t=="string"&&(t.trim().length!==t.length?s="extra whitespace":a=Number(t)),a===void 0)break;return n==N.UINT32?vc(a):qs(a),a;case N.INT64:case N.SFIXED64:case N.SINT64:if(t===null)return vn(Te.ZERO,r);if(typeof t!="number"&&typeof t!="string")break;return vn(Te.from(t),r);case N.FIXED64:case N.UINT64:if(t===null)return vn(gt.ZERO,r);if(typeof t!="number"&&typeof t!="string")break;return vn(gt.from(t),r);case N.BOOL:if(t===null)return!1;if(typeof t!="boolean")break;return t;case N.STRING:if(t===null)return"";if(typeof t!="string"){s="extra whitespace";break}try{encodeURIComponent(t)}catch(l){l="invalid UTF8";break}return t;case N.BYTES:if(t===null||t==="")return new Uint8Array(0);if(typeof t!="string")break;return bE(t)}}catch(o){s=o.message}this.assert(!1,i+(s?" - "+s:""),t)}}class BE{constructor(t){var n;this.fields=(n=t.fields)!==null&&n!==void 0?n:[]}write(t,n){const r={},i=t;for(const s of this.fields){if(!s.oneof){let c=this.field(s,i[s.localName],n);c!==void 0&&(r[n.useProtoFieldName?s.name:s.jsonName]=c);continue}const o=i[s.oneof];if(o.oneofKind!==s.localName)continue;const a=s.kind=="scalar"||s.kind=="enum"?Object.assign(Object.assign({},n),{emitDefaultValues:!0}):n;let l=this.field(s,o[s.localName],a);me(l!==void 0),r[n.useProtoFieldName?s.name:s.jsonName]=l}return r}field(t,n,r){let i;if(t.kind=="map"){me(typeof n=="object"&&n!==null);const s={};switch(t.V.kind){case"scalar":for(const[l,c]of Object.entries(n)){const d=this.scalar(t.V.T,c,t.name,!1,!0);me(d!==void 0),s[l.toString()]=d}break;case"message":const o=t.V.T();for(const[l,c]of Object.entries(n)){const d=this.message(o,c,t.name,r);me(d!==void 0),s[l.toString()]=d}break;case"enum":const a=t.V.T();for(const[l,c]of Object.entries(n)){me(c===void 0||typeof c=="number");const d=this.enum(a,c,t.name,!1,!0,r.enumAsInteger);me(d!==void 0),s[l.toString()]=d}break}(r.emitDefaultValues||Object.keys(s).length>0)&&(i=s)}else if(t.repeat){me(Array.isArray(n));const s=[];switch(t.kind){case"scalar":for(let l=0;l<n.length;l++){const c=this.scalar(t.T,n[l],t.name,t.opt,!0);me(c!==void 0),s.push(c)}break;case"enum":const o=t.T();for(let l=0;l<n.length;l++){me(n[l]===void 0||typeof n[l]=="number");const c=this.enum(o,n[l],t.name,t.opt,!0,r.enumAsInteger);me(c!==void 0),s.push(c)}break;case"message":const a=t.T();for(let l=0;l<n.length;l++){const c=this.message(a,n[l],t.name,r);me(c!==void 0),s.push(c)}break}(r.emitDefaultValues||s.length>0||r.emitDefaultValues)&&(i=s)}else switch(t.kind){case"scalar":i=this.scalar(t.T,n,t.name,t.opt,r.emitDefaultValues);break;case"enum":i=this.enum(t.T(),n,t.name,t.opt,r.emitDefaultValues,r.enumAsInteger);break;case"message":i=this.message(t.T(),n,t.name,r);break}return i}enum(t,n,r,i,s,o){if(t[0]=="google.protobuf.NullValue")return!s&&!i?void 0:null;if(n===void 0){me(i);return}if(!(n===0&&!s&&!i))return me(typeof n=="number"),me(Number.isInteger(n)),o||!t[1].hasOwnProperty(n)?n:t[2]?t[2]+t[1][n]:t[1][n]}message(t,n,r,i){return n===void 0?i.emitDefaultValues?null:void 0:t.internalJsonWrite(n,i)}scalar(t,n,r,i,s){if(n===void 0){me(i);return}const o=s||i;switch(t){case N.INT32:case N.SFIXED32:case N.SINT32:return n===0?o?0:void 0:(qs(n),n);case N.FIXED32:case N.UINT32:return n===0?o?0:void 0:(vc(n),n);case N.FLOAT:uh(n);case N.DOUBLE:return n===0?o?0:void 0:(me(typeof n=="number"),Number.isNaN(n)?"NaN":n===Number.POSITIVE_INFINITY?"Infinity":n===Number.NEGATIVE_INFINITY?"-Infinity":n);case N.STRING:return n===""?o?"":void 0:(me(typeof n=="string"),n);case N.BOOL:return n===!1?o?!1:void 0:(me(typeof n=="boolean"),n);case N.UINT64:case N.FIXED64:me(typeof n=="number"||typeof n=="string"||typeof n=="bigint");let a=gt.from(n);return a.isZero()&&!o?void 0:a.toString();case N.INT64:case N.SFIXED64:case N.SINT64:me(typeof n=="number"||typeof n=="string"||typeof n=="bigint");let l=Te.from(n);return l.isZero()&&!o?void 0:l.toString();case N.BYTES:return me(n instanceof Uint8Array),n.byteLength?wE(n):o?"":void 0}}}function jd(e,t=Ln.STRING){switch(e){case N.BOOL:return!1;case N.UINT64:case N.FIXED64:return vn(gt.ZERO,t);case N.INT64:case N.SFIXED64:case N.SINT64:return vn(Te.ZERO,t);case N.DOUBLE:case N.FLOAT:return 0;case N.BYTES:return new Uint8Array(0);case N.STRING:return"";default:return 0}}class zE{constructor(t){this.info=t}prepare(){var t;if(!this.fieldNoToField){const n=(t=this.info.fields)!==null&&t!==void 0?t:[];this.fieldNoToField=new Map(n.map(r=>[r.no,r]))}}read(t,n,r,i){this.prepare();const s=i===void 0?t.len:t.pos+i;for(;t.pos<s;){const[o,a]=t.tag(),l=this.fieldNoToField.get(o);if(!l){let u=r.readUnknownField;if(u=="throw")throw new Error(`Unknown field ${o} (wire type ${a}) for ${this.info.typeName}`);let h=t.skip(a);u!==!1&&(u===!0?mc.onRead:u)(this.info.typeName,n,o,a,h);continue}let c=n,d=l.repeat,f=l.localName;switch(l.oneof&&(c=c[l.oneof],c.oneofKind!==f&&(c=n[l.oneof]={oneofKind:f})),l.kind){case"scalar":case"enum":let u=l.kind=="enum"?N.INT32:l.T,h=l.kind=="scalar"?l.L:void 0;if(d){let v=c[f];if(a==Ve.LengthDelimited&&u!=N.STRING&&u!=N.BYTES){let g=t.uint32()+t.pos;for(;t.pos<g;)v.push(this.scalar(t,u,h))}else v.push(this.scalar(t,u,h))}else c[f]=this.scalar(t,u,h);break;case"message":if(d){let v=c[f],g=l.T().internalBinaryRead(t,t.uint32(),r);v.push(g)}else c[f]=l.T().internalBinaryRead(t,t.uint32(),r,c[f]);break;case"map":let[m,p]=this.mapEntry(l,t,r);c[f][m]=p;break}}}mapEntry(t,n,r){let i=n.uint32(),s=n.pos+i,o,a;for(;n.pos<s;){let[l,c]=n.tag();switch(l){case 1:t.K==N.BOOL?o=n.bool().toString():o=this.scalar(n,t.K,Ln.STRING);break;case 2:switch(t.V.kind){case"scalar":a=this.scalar(n,t.V.T,t.V.L);break;case"enum":a=n.int32();break;case"message":a=t.V.T().internalBinaryRead(n,n.uint32(),r);break}break;default:throw new Error(`Unknown field ${l} (wire type ${c}) in map entry for ${this.info.typeName}#${t.name}`)}}if(o===void 0){let l=jd(t.K);o=t.K==N.BOOL?l.toString():l}if(a===void 0)switch(t.V.kind){case"scalar":a=jd(t.V.T,t.V.L);break;case"enum":a=0;break;case"message":a=t.V.T().create();break}return[o,a]}scalar(t,n,r){switch(n){case N.INT32:return t.int32();case N.STRING:return t.string();case N.BOOL:return t.bool();case N.DOUBLE:return t.double();case N.FLOAT:return t.float();case N.INT64:return vn(t.int64(),r);case N.UINT64:return vn(t.uint64(),r);case N.FIXED64:return vn(t.fixed64(),r);case N.FIXED32:return t.fixed32();case N.BYTES:return t.bytes();case N.UINT32:return t.uint32();case N.SFIXED32:return t.sfixed32();case N.SFIXED64:return vn(t.sfixed64(),r);case N.SINT32:return t.sint32();case N.SINT64:return vn(t.sint64(),r)}}}class HE{constructor(t){this.info=t}prepare(){if(!this.fields){const t=this.info.fields?this.info.fields.concat():[];this.fields=t.sort((n,r)=>n.no-r.no)}}write(t,n,r){this.prepare();for(const s of this.fields){let o,a,l=s.repeat,c=s.localName;if(s.oneof){const d=t[s.oneof];if(d.oneofKind!==c)continue;o=d[c],a=!0}else o=t[c],a=!1;switch(s.kind){case"scalar":case"enum":let d=s.kind=="enum"?N.INT32:s.T;if(l)if(me(Array.isArray(o)),l==Sc.PACKED)this.packed(n,d,s.no,o);else for(const f of o)this.scalar(n,d,s.no,f,!0);else o===void 0?me(s.opt):this.scalar(n,d,s.no,o,a||s.opt);break;case"message":if(l){me(Array.isArray(o));for(const f of o)this.message(n,r,s.T(),s.no,f)}else this.message(n,r,s.T(),s.no,o);break;case"map":me(typeof o=="object"&&o!==null);for(const[f,u]of Object.entries(o))this.mapEntry(n,r,s,f,u);break}}let i=r.writeUnknownFields;i!==!1&&(i===!0?mc.onWrite:i)(this.info.typeName,t,n)}mapEntry(t,n,r,i,s){t.tag(r.no,Ve.LengthDelimited),t.fork();let o=i;switch(r.K){case N.INT32:case N.FIXED32:case N.UINT32:case N.SFIXED32:case N.SINT32:o=Number.parseInt(i);break;case N.BOOL:me(i=="true"||i=="false"),o=i=="true";break}switch(this.scalar(t,r.K,1,o,!0),r.V.kind){case"scalar":this.scalar(t,r.V.T,2,s,!0);break;case"enum":this.scalar(t,N.INT32,2,s,!0);break;case"message":this.message(t,n,r.V.T(),2,s);break}t.join()}message(t,n,r,i,s){s!==void 0&&(r.internalBinaryWrite(s,t.tag(i,Ve.LengthDelimited).fork(),n),t.join())}scalar(t,n,r,i,s){let[o,a,l]=this.scalarInfo(n,i);(!l||s)&&(t.tag(r,o),t[a](i))}packed(t,n,r,i){if(!i.length)return;me(n!==N.BYTES&&n!==N.STRING),t.tag(r,Ve.LengthDelimited),t.fork();let[,s]=this.scalarInfo(n);for(let o=0;o<i.length;o++)t[s](i[o]);t.join()}scalarInfo(t,n){let r=Ve.Varint,i,s=n===void 0,o=n===0;switch(t){case N.INT32:i="int32";break;case N.STRING:o=s||!n.length,r=Ve.LengthDelimited,i="string";break;case N.BOOL:o=n===!1,i="bool";break;case N.UINT32:i="uint32";break;case N.DOUBLE:r=Ve.Bit64,i="double";break;case N.FLOAT:r=Ve.Bit32,i="float";break;case N.INT64:o=s||Te.from(n).isZero(),i="int64";break;case N.UINT64:o=s||gt.from(n).isZero(),i="uint64";break;case N.FIXED64:o=s||gt.from(n).isZero(),r=Ve.Bit64,i="fixed64";break;case N.BYTES:o=s||!n.byteLength,r=Ve.LengthDelimited,i="bytes";break;case N.FIXED32:r=Ve.Bit32,i="fixed32";break;case N.SFIXED32:r=Ve.Bit32,i="sfixed32";break;case N.SFIXED64:o=s||Te.from(n).isZero(),r=Ve.Bit64,i="sfixed64";break;case N.SINT32:i="sint32";break;case N.SINT64:o=s||Te.from(n).isZero(),i="sint64";break}return[r,i,s||o]}}function WE(e){const t=e.messagePrototype?Object.create(e.messagePrototype):Object.defineProperty({},r0,{value:e});for(let n of e.fields){let r=n.localName;if(!n.opt)if(n.oneof)t[n.oneof]={oneofKind:void 0};else if(n.repeat)t[r]=[];else switch(n.kind){case"scalar":t[r]=jd(n.T,n.L);break;case"enum":t[r]=0;break;case"map":t[r]={};break}}return t}function cu(e,t,n){let r,i=n,s;for(let o of e.fields){let a=o.localName;if(o.oneof){const l=i[o.oneof];if((l==null?void 0:l.oneofKind)==null)continue;if(r=l[a],s=t[o.oneof],s.oneofKind=l.oneofKind,r==null){delete s[a];continue}}else if(r=i[a],s=t,r==null)continue;switch(o.repeat&&(s[a].length=r.length),o.kind){case"scalar":case"enum":if(o.repeat)for(let c=0;c<r.length;c++)s[a][c]=r[c];else s[a]=r;break;case"message":let l=o.T();if(o.repeat)for(let c=0;c<r.length;c++)s[a][c]=l.create(r[c]);else s[a]===void 0?s[a]=l.create(r):l.mergePartial(s[a],r);break;case"map":switch(o.V.kind){case"scalar":case"enum":Object.assign(s[a],r);break;case"message":let c=o.V.T();for(let d of Object.keys(r))s[a][d]=c.create(r[d]);break}break}}}function qE(e,t,n){if(t===n)return!0;if(!t||!n)return!1;for(let r of e.fields){let i=r.localName,s=r.oneof?t[r.oneof][i]:t[i],o=r.oneof?n[r.oneof][i]:n[i];switch(r.kind){case"enum":case"scalar":let a=r.kind=="enum"?N.INT32:r.T;if(!(r.repeat?_m(a,s,o):i0(a,s,o)))return!1;break;case"map":if(!(r.V.kind=="message"?Im(r.V.T(),oa(s),oa(o)):_m(r.V.kind=="enum"?N.INT32:r.V.T,oa(s),oa(o))))return!1;break;case"message":let l=r.T();if(!(r.repeat?Im(l,s,o):l.equals(s,o)))return!1;break}}return!0}const oa=Object.values;function i0(e,t,n){if(t===n)return!0;if(e!==N.BYTES)return!1;let r=t,i=n;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!=i[s])return!1;return!0}function _m(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!i0(e,t[r],n[r]))return!1;return!0}function Im(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],n[r]))return!1;return!0}const KE=Object.getOwnPropertyDescriptors(Object.getPrototypeOf({}));class F{constructor(t,n,r){this.defaultCheckDepth=16,this.typeName=t,this.fields=n.map(FE),this.options=r??{},this.messagePrototype=Object.create(null,Object.assign(Object.assign({},KE),{[r0]:{value:this}})),this.refTypeCheck=new $E(this),this.refJsonReader=new VE(this),this.refJsonWriter=new BE(this),this.refBinReader=new zE(this),this.refBinWriter=new HE(this)}create(t){let n=WE(this);return t!==void 0&&cu(this,n,t),n}clone(t){let n=this.create();return cu(this,n,t),n}equals(t,n){return qE(this,t,n)}is(t,n=this.defaultCheckDepth){return this.refTypeCheck.is(t,n,!1)}isAssignable(t,n=this.defaultCheckDepth){return this.refTypeCheck.is(t,n,!0)}mergePartial(t,n){cu(this,t,n)}fromBinary(t,n){let r=xE(n);return this.internalBinaryRead(r.readerFactory(t),t.byteLength,r)}fromJson(t,n){return this.internalJsonRead(t,LE(n))}fromJsonString(t,n){let r=JSON.parse(t);return this.fromJson(r,n)}toJson(t,n){return this.internalJsonWrite(t,jE(n))}toJsonString(t,n){var r;let i=this.toJson(t,n);return JSON.stringify(i,null,(r=n==null?void 0:n.prettySpaces)!==null&&r!==void 0?r:0)}toBinary(t,n){let r=AE(n);return this.internalBinaryWrite(t,r.writerFactory(),r).finish()}internalJsonRead(t,n,r){if(t!==null&&typeof t=="object"&&!Array.isArray(t)){let i=r??this.create();return this.refJsonReader.read(t,i,n),i}throw new Error(`Unable to parse message ${this.typeName} from JSON ${ls(t)}.`)}internalJsonWrite(t,n){return this.refJsonWriter.write(t,n)}internalBinaryWrite(t,n,r){return this.refBinWriter.write(t,n,r),n}internalBinaryRead(t,n,r,i){let s=i??this.create();return this.refBinReader.read(t,s,r,n),s}}function GE(e,t){var n,r,i;let s=e;return s.service=t,s.localName=(n=s.localName)!==null&&n!==void 0?n:yc(s.name),s.serverStreaming=!!s.serverStreaming,s.clientStreaming=!!s.clientStreaming,s.options=(r=s.options)!==null&&r!==void 0?r:{},s.idempotency=(i=s.idempotency)!==null&&i!==void 0?i:void 0,s}class JE{constructor(t,n,r){this.typeName=t,this.methods=n.map(i=>GE(i,this)),this.options=r??{}}}class Nt extends Error{constructor(t,n="UNKNOWN",r){super(t),this.name="RpcError",Object.setPrototypeOf(this,new.target.prototype),this.code=n,this.meta=r??{}}toString(){const t=[this.name+": "+this.message];this.code&&(t.push(""),t.push("Code: "+this.code)),this.serviceName&&this.methodName&&t.push("Method: "+this.serviceName+"/"+this.methodName);let n=Object.entries(this.meta);if(n.length){t.push(""),t.push("Meta:");for(let[r,i]of n)t.push(`  ${r}: ${i}`)}return t.join(`
`)}}function YE(e,t){if(!t)return e;let n={};aa(e,n),aa(t,n);for(let r of Object.keys(t)){let i=t[r];switch(r){case"jsonOptions":n.jsonOptions=ME(e.jsonOptions,n.jsonOptions);break;case"binaryOptions":n.binaryOptions=CE(e.binaryOptions,n.binaryOptions);break;case"meta":n.meta={},aa(e.meta,n.meta),aa(t.meta,n.meta);break;case"interceptors":n.interceptors=e.interceptors?e.interceptors.concat(i):i.concat();break}}return n}function aa(e,t){if(!e)return;let n=t;for(let[r,i]of Object.entries(e))i instanceof Date?n[r]=new Date(i.getTime()):Array.isArray(i)?n[r]=i.concat():n[r]=i}var hn;(function(e){e[e.PENDING=0]="PENDING",e[e.REJECTED=1]="REJECTED",e[e.RESOLVED=2]="RESOLVED"})(hn||(hn={}));class ca{constructor(t=!0){this._state=hn.PENDING,this._promise=new Promise((n,r)=>{this._resolve=n,this._reject=r}),t&&this._promise.catch(n=>{})}get state(){return this._state}get promise(){return this._promise}resolve(t){if(this.state!==hn.PENDING)throw new Error(`cannot resolve ${hn[this.state].toLowerCase()}`);this._resolve(t),this._state=hn.RESOLVED}reject(t){if(this.state!==hn.PENDING)throw new Error(`cannot reject ${hn[this.state].toLowerCase()}`);this._reject(t),this._state=hn.REJECTED}resolvePending(t){this._state===hn.PENDING&&this.resolve(t)}rejectPending(t){this._state===hn.PENDING&&this.reject(t)}}var QE=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};class XE{constructor(t,n,r,i,s,o,a){this.method=t,this.requestHeaders=n,this.request=r,this.headers=i,this.response=s,this.status=o,this.trailers=a}then(t,n){return this.promiseFinished().then(r=>t?Promise.resolve(t(r)):r,r=>n?Promise.resolve(n(r)):Promise.reject(r))}promiseFinished(){return QE(this,void 0,void 0,function*(){let[t,n,r,i]=yield Promise.all([this.headers,this.response,this.status,this.trailers]);return{method:this.method,requestHeaders:this.requestHeaders,request:this.request,headers:t,response:n,status:r,trailers:i}})}}function Bn(e,t,n,r,i){var s;{let o=(a,l,c)=>t.unary(a,l,c);for(const a of((s=r.interceptors)!==null&&s!==void 0?s:[]).filter(l=>l.interceptUnary).reverse()){const l=o;o=(c,d,f)=>a.interceptUnary(l,c,d,f)}return o(n,i,r)}}function s0(e,t){return function(){return e.apply(t,arguments)}}const{toString:ZE}=Object.prototype,{getPrototypeOf:dh}=Object,ul=(e=>t=>{const n=ZE.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Cn=e=>(e=e.toLowerCase(),t=>ul(t)===e),dl=e=>t=>typeof t===e,{isArray:us}=Array,po=dl("undefined");function eT(e){return e!==null&&!po(e)&&e.constructor!==null&&!po(e.constructor)&&Gt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const o0=Cn("ArrayBuffer");function tT(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&o0(e.buffer),t}const nT=dl("string"),Gt=dl("function"),a0=dl("number"),fl=e=>e!==null&&typeof e=="object",rT=e=>e===!0||e===!1,Ma=e=>{if(ul(e)!=="object")return!1;const t=dh(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},iT=Cn("Date"),sT=Cn("File"),oT=Cn("Blob"),aT=Cn("FileList"),cT=e=>fl(e)&&Gt(e.pipe),lT=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Gt(e.append)&&((t=ul(e))==="formdata"||t==="object"&&Gt(e.toString)&&e.toString()==="[object FormData]"))},uT=Cn("URLSearchParams"),[dT,fT,hT,pT]=["ReadableStream","Request","Response","Headers"].map(Cn),mT=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ao(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),us(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let a;for(r=0;r<o;r++)a=s[r],t.call(null,e[a],a,e)}}function c0(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Kr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,l0=e=>!po(e)&&e!==Kr;function Md(){const{caseless:e}=l0(this)&&this||{},t={},n=(r,i)=>{const s=e&&c0(t,i)||i;Ma(t[s])&&Ma(r)?t[s]=Md(t[s],r):Ma(r)?t[s]=Md({},r):us(r)?t[s]=r.slice():t[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Ao(arguments[r],n);return t}const gT=(e,t,n,{allOwnKeys:r}={})=>(Ao(t,(i,s)=>{n&&Gt(i)?e[s]=s0(i,n):e[s]=i},{allOwnKeys:r}),e),vT=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),yT=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},ST=(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!r||r(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&dh(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},bT=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},wT=e=>{if(!e)return null;if(us(e))return e;let t=e.length;if(!a0(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},CT=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&dh(Uint8Array)),kT=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},ET=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},TT=Cn("HTMLFormElement"),xT=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Pm=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),RT=Cn("RegExp"),u0=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Ao(n,(i,s)=>{let o;(o=t(i,s,e))!==!1&&(r[s]=o||i)}),Object.defineProperties(e,r)},_T=e=>{u0(e,(t,n)=>{if(Gt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Gt(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},IT=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return us(e)?r(e):r(String(e).split(t)),n},PT=()=>{},OT=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,lu="abcdefghijklmnopqrstuvwxyz",Om="0123456789",d0={DIGIT:Om,ALPHA:lu,ALPHA_DIGIT:lu+lu.toUpperCase()+Om},NT=(e=16,t=d0.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function AT(e){return!!(e&&Gt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const DT=e=>{const t=new Array(10),n=(r,i)=>{if(fl(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const s=us(r)?[]:{};return Ao(r,(o,a)=>{const l=n(o,i+1);!po(l)&&(s[a]=l)}),t[i]=void 0,s}}return r};return n(e,0)},LT=Cn("AsyncFunction"),jT=e=>e&&(fl(e)||Gt(e))&&Gt(e.then)&&Gt(e.catch),f0=((e,t)=>e?setImmediate:t?((n,r)=>(Kr.addEventListener("message",({source:i,data:s})=>{i===Kr&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Kr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Gt(Kr.postMessage)),MT=typeof queueMicrotask<"u"?queueMicrotask.bind(Kr):typeof process<"u"&&process.nextTick||f0,_={isArray:us,isArrayBuffer:o0,isBuffer:eT,isFormData:lT,isArrayBufferView:tT,isString:nT,isNumber:a0,isBoolean:rT,isObject:fl,isPlainObject:Ma,isReadableStream:dT,isRequest:fT,isResponse:hT,isHeaders:pT,isUndefined:po,isDate:iT,isFile:sT,isBlob:oT,isRegExp:RT,isFunction:Gt,isStream:cT,isURLSearchParams:uT,isTypedArray:CT,isFileList:aT,forEach:Ao,merge:Md,extend:gT,trim:mT,stripBOM:vT,inherits:yT,toFlatObject:ST,kindOf:ul,kindOfTest:Cn,endsWith:bT,toArray:wT,forEachEntry:kT,matchAll:ET,isHTMLForm:TT,hasOwnProperty:Pm,hasOwnProp:Pm,reduceDescriptors:u0,freezeMethods:_T,toObjectSet:IT,toCamelCase:xT,noop:PT,toFiniteNumber:OT,findKey:c0,global:Kr,isContextDefined:l0,ALPHABET:d0,generateString:NT,isSpecCompliantForm:AT,toJSONObject:DT,isAsyncFn:LT,isThenable:jT,setImmediate:f0,asap:MT};function ie(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}_.inherits(ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.status}}});const h0=ie.prototype,p0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{p0[e]={value:e}});Object.defineProperties(ie,p0);Object.defineProperty(h0,"isAxiosError",{value:!0});ie.from=(e,t,n,r,i,s)=>{const o=Object.create(h0);return _.toFlatObject(e,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ie.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const FT=null;function Fd(e){return _.isPlainObject(e)||_.isArray(e)}function m0(e){return _.endsWith(e,"[]")?e.slice(0,-2):e}function Nm(e,t,n){return e?e.concat(t).map(function(i,s){return i=m0(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function UT(e){return _.isArray(e)&&!e.some(Fd)}const $T=_.toFlatObject(_,{},null,function(t){return/^is[A-Z]/.test(t)});function hl(e,t,n){if(!_.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=_.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,v){return!_.isUndefined(v[p])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(t);if(!_.isFunction(i))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(_.isDate(m))return m.toISOString();if(!l&&_.isBlob(m))throw new ie("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(m)||_.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,p,v){let g=m;if(m&&!v&&typeof m=="object"){if(_.endsWith(p,"{}"))p=r?p:p.slice(0,-2),m=JSON.stringify(m);else if(_.isArray(m)&&UT(m)||(_.isFileList(m)||_.endsWith(p,"[]"))&&(g=_.toArray(m)))return p=m0(p),g.forEach(function(S,w){!(_.isUndefined(S)||S===null)&&t.append(o===!0?Nm([p],w,s):o===null?p:p+"[]",c(S))}),!1}return Fd(m)?!0:(t.append(Nm(v,p,s),c(m)),!1)}const f=[],u=Object.assign($T,{defaultVisitor:d,convertValue:c,isVisitable:Fd});function h(m,p){if(!_.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+p.join("."));f.push(m),_.forEach(m,function(g,y){(!(_.isUndefined(g)||g===null)&&i.call(t,g,_.isString(y)?y.trim():y,p,u))===!0&&h(g,p?p.concat(y):[y])}),f.pop()}}if(!_.isObject(e))throw new TypeError("data must be an object");return h(e),t}function Am(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function fh(e,t){this._pairs=[],e&&hl(e,this,t)}const g0=fh.prototype;g0.append=function(t,n){this._pairs.push([t,n])};g0.toString=function(t){const n=t?function(r){return t.call(this,r,Am)}:Am;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function VT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function v0(e,t,n){if(!t)return e;const r=n&&n.encode||VT;_.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(t,n):s=_.isURLSearchParams(t)?t.toString():new fh(t,n).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Dm{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){_.forEach(this.handlers,function(r){r!==null&&t(r)})}}const y0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},BT=typeof URLSearchParams<"u"?URLSearchParams:fh,zT=typeof FormData<"u"?FormData:null,HT=typeof Blob<"u"?Blob:null,WT={isBrowser:!0,classes:{URLSearchParams:BT,FormData:zT,Blob:HT},protocols:["http","https","file","blob","url","data"]},hh=typeof window<"u"&&typeof document<"u",Ud=typeof navigator=="object"&&navigator||void 0,qT=hh&&(!Ud||["ReactNative","NativeScript","NS"].indexOf(Ud.product)<0),KT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",GT=hh&&window.location.href||"http://localhost",JT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hh,hasStandardBrowserEnv:qT,hasStandardBrowserWebWorkerEnv:KT,navigator:Ud,origin:GT},Symbol.toStringTag,{value:"Module"})),pt={...JT,...WT};function YT(e,t){return hl(e,new pt.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return pt.isNode&&_.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function QT(e){return _.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function XT(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function S0(e){function t(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&_.isArray(i)?i.length:o,l?(_.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!_.isObject(i[o]))&&(i[o]=[]),t(n,r,i[o],s)&&_.isArray(i[o])&&(i[o]=XT(i[o])),!a)}if(_.isFormData(e)&&_.isFunction(e.entries)){const n={};return _.forEachEntry(e,(r,i)=>{t(QT(r),i,n,0)}),n}return null}function ZT(e,t,n){if(_.isString(e))try{return(t||JSON.parse)(e),_.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(e)}const Do={transitional:y0,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=_.isObject(t);if(s&&_.isHTMLForm(t)&&(t=new FormData(t)),_.isFormData(t))return i?JSON.stringify(S0(t)):t;if(_.isArrayBuffer(t)||_.isBuffer(t)||_.isStream(t)||_.isFile(t)||_.isBlob(t)||_.isReadableStream(t))return t;if(_.isArrayBufferView(t))return t.buffer;if(_.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return YT(t,this.formSerializer).toString();if((a=_.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return hl(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),ZT(t)):t}],transformResponse:[function(t){const n=this.transitional||Do.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(_.isResponse(t)||_.isReadableStream(t))return t;if(t&&_.isString(t)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?ie.from(a,ie.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pt.classes.FormData,Blob:pt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],e=>{Do.headers[e]={}});const e1=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),t1=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||t[n]&&e1[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Lm=Symbol("internals");function Ts(e){return e&&String(e).trim().toLowerCase()}function Fa(e){return e===!1||e==null?e:_.isArray(e)?e.map(Fa):String(e)}function n1(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const r1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function uu(e,t,n,r,i){if(_.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!_.isString(t)){if(_.isString(r))return t.indexOf(r)!==-1;if(_.isRegExp(r))return r.test(t)}}function i1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function s1(e,t){const n=_.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,o){return this[r].call(this,t,i,s,o)},configurable:!0})})}class Vt{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(a,l,c){const d=Ts(l);if(!d)throw new Error("header name must be a non-empty string");const f=_.findKey(i,d);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=Fa(a))}const o=(a,l)=>_.forEach(a,(c,d)=>s(c,d,l));if(_.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(_.isString(t)&&(t=t.trim())&&!r1(t))o(t1(t),n);else if(_.isHeaders(t))for(const[a,l]of t.entries())s(l,a,r);else t!=null&&s(n,t,r);return this}get(t,n){if(t=Ts(t),t){const r=_.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return n1(i);if(_.isFunction(n))return n.call(this,i,r);if(_.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ts(t),t){const r=_.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||uu(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(o){if(o=Ts(o),o){const a=_.findKey(r,o);a&&(!n||uu(r,r[a],a,n))&&(delete r[a],i=!0)}}return _.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||uu(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return _.forEach(this,(i,s)=>{const o=_.findKey(r,s);if(o){n[o]=Fa(i),delete n[s];return}const a=t?i1(s):String(s).trim();a!==s&&delete n[s],n[a]=Fa(i),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return _.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&_.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[Lm]=this[Lm]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Ts(o);r[a]||(s1(i,o),r[a]=!0)}return _.isArray(t)?t.forEach(s):s(t),this}}Vt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.reduceDescriptors(Vt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});_.freezeMethods(Vt);function du(e,t){const n=this||Do,r=t||n,i=Vt.from(r.headers);let s=r.data;return _.forEach(e,function(a){s=a.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function b0(e){return!!(e&&e.__CANCEL__)}function ds(e,t,n){ie.call(this,e??"canceled",ie.ERR_CANCELED,t,n),this.name="CanceledError"}_.inherits(ds,ie,{__CANCEL__:!0});function w0(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new ie("Request failed with status code "+n.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function o1(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function a1(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),d=r[s];o||(o=c),n[i]=l,r[i]=c;let f=s,u=0;for(;f!==i;)u+=n[f++],f=f%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),c-o<t)return;const h=d&&c-d;return h?Math.round(u*1e3/h):void 0}}function c1(e,t){let n=0,r=1e3/t,i,s;const o=(c,d=Date.now())=>{n=d,i=null,s&&(clearTimeout(s),s=null),e.apply(null,c)};return[(...c)=>{const d=Date.now(),f=d-n;f>=r?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-f)))},()=>i&&o(i)]}const bc=(e,t,n=3)=>{let r=0;const i=a1(50,250);return c1(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),d=o<=a;r=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},n)},jm=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Mm=e=>(...t)=>_.asap(()=>e(...t)),l1=pt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,pt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(pt.origin),pt.navigator&&/(msie|trident)/i.test(pt.navigator.userAgent)):()=>!0,u1=pt.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];_.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),_.isString(r)&&o.push("path="+r),_.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function d1(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function f1(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function C0(e,t){return e&&!d1(t)?f1(e,t):t}const Fm=e=>e instanceof Vt?{...e}:e;function ni(e,t){t=t||{};const n={};function r(c,d,f,u){return _.isPlainObject(c)&&_.isPlainObject(d)?_.merge.call({caseless:u},c,d):_.isPlainObject(d)?_.merge({},d):_.isArray(d)?d.slice():d}function i(c,d,f,u){if(_.isUndefined(d)){if(!_.isUndefined(c))return r(void 0,c,f,u)}else return r(c,d,f,u)}function s(c,d){if(!_.isUndefined(d))return r(void 0,d)}function o(c,d){if(_.isUndefined(d)){if(!_.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,f){if(f in t)return r(c,d);if(f in e)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,f)=>i(Fm(c),Fm(d),f,!0)};return _.forEach(Object.keys(Object.assign({},e,t)),function(d){const f=l[d]||i,u=f(e[d],t[d],d);_.isUndefined(u)&&f!==a||(n[d]=u)}),n}const k0=e=>{const t=ni({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=t;t.headers=o=Vt.from(o),t.url=v0(C0(t.baseURL,t.url),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(_.isFormData(n)){if(pt.hasStandardBrowserEnv||pt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...d]=l?l.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...d].join("; "))}}if(pt.hasStandardBrowserEnv&&(r&&_.isFunction(r)&&(r=r(t)),r||r!==!1&&l1(t.url))){const c=i&&s&&u1.read(s);c&&o.set(i,c)}return t},h1=typeof XMLHttpRequest<"u",p1=h1&&function(e){return new Promise(function(n,r){const i=k0(e);let s=i.data;const o=Vt.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,d,f,u,h,m;function p(){h&&h(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function g(){if(!v)return;const S=Vt.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),k={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:S,config:e,request:v};w0(function(T){n(T),p()},function(T){r(T),p()},k),v=null}"onloadend"in v?v.onloadend=g:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(g)},v.onabort=function(){v&&(r(new ie("Request aborted",ie.ECONNABORTED,e,v)),v=null)},v.onerror=function(){r(new ie("Network Error",ie.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let w=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const k=i.transitional||y0;i.timeoutErrorMessage&&(w=i.timeoutErrorMessage),r(new ie(w,k.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,e,v)),v=null},s===void 0&&o.setContentType(null),"setRequestHeader"in v&&_.forEach(o.toJSON(),function(w,k){v.setRequestHeader(k,w)}),_.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),a&&a!=="json"&&(v.responseType=i.responseType),c&&([u,m]=bc(c,!0),v.addEventListener("progress",u)),l&&v.upload&&([f,h]=bc(l),v.upload.addEventListener("progress",f),v.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(d=S=>{v&&(r(!S||S.type?new ds(null,e,v):S),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const y=o1(i.url);if(y&&pt.protocols.indexOf(y)===-1){r(new ie("Unsupported protocol "+y+":",ie.ERR_BAD_REQUEST,e));return}v.send(s||null)})},m1=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;r.abort(d instanceof ie?d:new ds(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{o=null,s(new ie(`timeout ${t} of ms exceeded`,ie.ETIMEDOUT))},t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),e=null)};e.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>_.asap(a),l}},g1=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},v1=async function*(e,t){for await(const n of y1(e))yield*g1(n,t)},y1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Um=(e,t,n,r)=>{const i=v1(e,t);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){a(),l.close();return}let f=d.byteLength;if(n){let u=s+=f;n(u)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},pl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",E0=pl&&typeof ReadableStream=="function",S1=pl&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),T0=(e,...t)=>{try{return!!e(...t)}catch{return!1}},b1=E0&&T0(()=>{let e=!1;const t=new Request(pt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),$m=64*1024,$d=E0&&T0(()=>_.isReadableStream(new Response("").body)),wc={stream:$d&&(e=>e.body)};pl&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!wc[t]&&(wc[t]=_.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new ie(`Response type '${t}' is not supported`,ie.ERR_NOT_SUPPORT,r)})})})(new Response);const w1=async e=>{if(e==null)return 0;if(_.isBlob(e))return e.size;if(_.isSpecCompliantForm(e))return(await new Request(pt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(_.isArrayBufferView(e)||_.isArrayBuffer(e))return e.byteLength;if(_.isURLSearchParams(e)&&(e=e+""),_.isString(e))return(await S1(e)).byteLength},C1=async(e,t)=>{const n=_.toFiniteNumber(e.getContentLength());return n??w1(t)},k1=pl&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:d,withCredentials:f="same-origin",fetchOptions:u}=k0(e);c=c?(c+"").toLowerCase():"text";let h=m1([i,s&&s.toAbortSignal()],o),m;const p=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let v;try{if(l&&b1&&n!=="get"&&n!=="head"&&(v=await C1(d,r))!==0){let k=new Request(t,{method:"POST",body:r,duplex:"half"}),E;if(_.isFormData(r)&&(E=k.headers.get("content-type"))&&d.setContentType(E),k.body){const[T,I]=jm(v,bc(Mm(l)));r=Um(k.body,$m,T,I)}}_.isString(f)||(f=f?"include":"omit");const g="credentials"in Request.prototype;m=new Request(t,{...u,signal:h,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:g?f:void 0});let y=await fetch(m);const S=$d&&(c==="stream"||c==="response");if($d&&(a||S&&p)){const k={};["status","statusText","headers"].forEach(U=>{k[U]=y[U]});const E=_.toFiniteNumber(y.headers.get("content-length")),[T,I]=a&&jm(E,bc(Mm(a),!0))||[];y=new Response(Um(y.body,$m,T,()=>{I&&I(),p&&p()}),k)}c=c||"text";let w=await wc[_.findKey(wc,c)||"text"](y,e);return!S&&p&&p(),await new Promise((k,E)=>{w0(k,E,{data:w,headers:Vt.from(y.headers),status:y.status,statusText:y.statusText,config:e,request:m})})}catch(g){throw p&&p(),g&&g.name==="TypeError"&&/fetch/i.test(g.message)?Object.assign(new ie("Network Error",ie.ERR_NETWORK,e,m),{cause:g.cause||g}):ie.from(g,g&&g.code,e,m)}}),Vd={http:FT,xhr:p1,fetch:k1};_.forEach(Vd,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Vm=e=>`- ${e}`,E1=e=>_.isFunction(e)||e===null||e===!1,x0={getAdapter:e=>{e=_.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){n=e[s];let o;if(r=n,!E1(n)&&(r=Vd[(o=String(n)).toLowerCase()],r===void 0))throw new ie(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(Vm).join(`
`):" "+Vm(s[0]):"as no adapter specified";throw new ie("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Vd};function fu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ds(null,e)}function Bm(e){return fu(e),e.headers=Vt.from(e.headers),e.data=du.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),x0.getAdapter(e.adapter||Do.adapter)(e).then(function(r){return fu(e),r.data=du.call(e,e.transformResponse,r),r.headers=Vt.from(r.headers),r},function(r){return b0(r)||(fu(e),r&&r.response&&(r.response.data=du.call(e,e.transformResponse,r.response),r.response.headers=Vt.from(r.response.headers))),Promise.reject(r)})}const R0="1.7.9",ml={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ml[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const zm={};ml.transitional=function(t,n,r){function i(s,o){return"[Axios v"+R0+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(t===!1)throw new ie(i(o," has been removed"+(n?" in "+n:"")),ie.ERR_DEPRECATED);return n&&!zm[o]&&(zm[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,a):!0}};ml.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function T1(e,t,n){if(typeof e!="object")throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const a=e[s],l=a===void 0||o(a,s,e);if(l!==!0)throw new ie("option "+s+" must be "+l,ie.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ie("Unknown option "+s,ie.ERR_BAD_OPTION)}}const Ua={assertOptions:T1,validators:ml},xn=Ua.validators;class Yr{constructor(t){this.defaults=t,this.interceptors={request:new Dm,response:new Dm}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ni(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Ua.assertOptions(r,{silentJSONParsing:xn.transitional(xn.boolean),forcedJSONParsing:xn.transitional(xn.boolean),clarifyTimeoutError:xn.transitional(xn.boolean)},!1),i!=null&&(_.isFunction(i)?n.paramsSerializer={serialize:i}:Ua.assertOptions(i,{encode:xn.function,serialize:xn.function},!0)),Ua.assertOptions(n,{baseUrl:xn.spelling("baseURL"),withXsrfToken:xn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&_.merge(s.common,s[n.method]);s&&_.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),n.headers=Vt.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(l=l&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const c=[];this.interceptors.response.forEach(function(p){c.push(p.fulfilled,p.rejected)});let d,f=0,u;if(!l){const m=[Bm.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,c),u=m.length,d=Promise.resolve(n);f<u;)d=d.then(m[f++],m[f++]);return d}u=a.length;let h=n;for(f=0;f<u;){const m=a[f++],p=a[f++];try{h=m(h)}catch(v){p.call(this,v);break}}try{d=Bm.call(this,h)}catch(m){return Promise.reject(m)}for(f=0,u=c.length;f<u;)d=d.then(c[f++],c[f++]);return d}getUri(t){t=ni(this.defaults,t);const n=C0(t.baseURL,t.url);return v0(n,t.params,t.paramsSerializer)}}_.forEach(["delete","get","head","options"],function(t){Yr.prototype[t]=function(n,r){return this.request(ni(r||{},{method:t,url:n,data:(r||{}).data}))}});_.forEach(["post","put","patch"],function(t){function n(r){return function(s,o,a){return this.request(ni(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Yr.prototype[t]=n(),Yr.prototype[t+"Form"]=n(!0)});class ph{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},t(function(s,o,a){r.reason||(r.reason=new ds(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new ph(function(i){t=i}),cancel:t}}}function x1(e){return function(n){return e.apply(null,n)}}function R1(e){return _.isObject(e)&&e.isAxiosError===!0}const Bd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Bd).forEach(([e,t])=>{Bd[t]=e});function _0(e){const t=new Yr(e),n=s0(Yr.prototype.request,t);return _.extend(n,Yr.prototype,t,{allOwnKeys:!0}),_.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return _0(ni(e,i))},n}const Ke=_0(Do);Ke.Axios=Yr;Ke.CanceledError=ds;Ke.CancelToken=ph;Ke.isCancel=b0;Ke.VERSION=R0;Ke.toFormData=hl;Ke.AxiosError=ie;Ke.Cancel=Ke.CanceledError;Ke.all=function(t){return Promise.all(t)};Ke.spread=x1;Ke.isAxiosError=R1;Ke.mergeConfig=ni;Ke.AxiosHeaders=Vt;Ke.formToJSON=e=>S0(_.isHTMLForm(e)?new FormData(e):e);Ke.getAdapter=x0.getAdapter;Ke.HttpStatusCode=Bd;Ke.default=Ke;var Pe;(function(e){e[e.cancelled=0]="cancelled",e[e.unknown=1]="unknown",e[e.invalid_argument=2]="invalid_argument",e[e.malformed=3]="malformed",e[e.deadline_exceeded=4]="deadline_exceeded",e[e.not_found=5]="not_found",e[e.bad_route=6]="bad_route",e[e.already_exists=7]="already_exists",e[e.permission_denied=8]="permission_denied",e[e.unauthenticated=9]="unauthenticated",e[e.resource_exhausted=10]="resource_exhausted",e[e.failed_precondition=11]="failed_precondition",e[e.aborted=12]="aborted",e[e.out_of_range=13]="out_of_range",e[e.unimplemented=14]="unimplemented",e[e.internal=15]="internal",e[e.unavailable=16]="unavailable",e[e.dataloss=17]="dataloss"})(Pe||(Pe={}));function _1(e,t,n){if(n)for(let[r,i]of Object.entries(n))if(typeof i=="string")e.append(r,i);else for(let s of i)e.append(r,s);return e.set("Content-Type",t?"application/json":"application/protobuf"),e.set("Accept",t?"application/json":"application/protobuf, application/json"),e}function I1(e){if(!pc(e)||typeof e.code!="string"||typeof e.msg!="string")return new Nt("cannot read twirp error response",Pe[Pe.internal]);let t={};if(pc(e.meta))for(let[n,r]of Object.entries(e.meta))typeof r=="string"&&(t[n]=r);return new Nt(e.msg,e.code,t)}function P1(e){let t={};return e.forEach((n,r)=>{r.toLowerCase()!=="content-type"&&r.toLowerCase()!=="content-length"&&(t.hasOwnProperty(r)?t[r].push(n):t[r]=n)}),t}class O1{constructor(t){this.defaultOptions=t}mergeOptions(t){return YE(this.defaultOptions,t)}unary(t,n,r){var i,s,o;let a=r,l=this.makeUrl(t,a),c=(i=a.fetchInit)!==null&&i!==void 0?i:{},d=a.sendJson?t.I.toJsonString(n,a.jsonOptions):t.I.toBinary(n,a.binaryOptions),f=new ca,u=new ca,h=new ca,m=new ca;return globalThis.fetch(l,Object.assign(Object.assign({},c),{method:"POST",headers:_1(new globalThis.Headers,!!a.sendJson,a.meta),body:d,signal:(s=r.abort)!==null&&s!==void 0?s:null})).then(p=>{f.resolve(P1(p.headers));let v;try{v=p.type}catch{}switch(v){case"error":case"opaque":case"opaqueredirect":throw new Nt(`fetch response type ${p.type}`,Pe[Pe.unknown])}return p.ok?a.sendJson?p.json().then(g=>t.O.fromJson(g,a.jsonOptions),()=>{throw new Nt("unable to read response body as json",Pe[Pe.dataloss])}):p.arrayBuffer().then(g=>t.O.fromBinary(new Uint8Array(g),a.binaryOptions),()=>{throw new Nt("unable to read response body",Pe[Pe.dataloss])}):p.json().then(g=>{throw I1(g)},()=>{throw new Nt("received HTTP "+p.status+", unable to read response body as json",Pe[Pe.internal])})},p=>{throw p instanceof Error&&p.name==="AbortError"?new Nt(p.message,Pe[Pe.cancelled]):new Nt(p instanceof Error?p.message:p)}).then(p=>{u.resolve(p),h.resolve({code:"OK",detail:""}),m.resolve({})}).catch(p=>{let v=p instanceof Nt?p:new Nt(p instanceof Error?p.message:p,Pe[Pe.internal]);v.methodName=t.name,v.serviceName=t.service.typeName,f.rejectPending(v),u.rejectPending(v),h.rejectPending(v),m.rejectPending(v)}),new XE(t,(o=a.meta)!==null&&o!==void 0?o:{},n,f.promise,u.promise,h.promise,m.promise)}makeUrl(t,n){let r=n.baseUrl;r.endsWith("/")&&(r=r.substring(0,r.length-1));let i=t.name;return n.useProtoMethodName!==!0&&(i=yc(i),i=i.substring(0,1).toUpperCase()+i.substring(1)),`${r}/${t.service.typeName}/${i}`}clientStreaming(t){const n=new Nt("Client streaming is not supported by Twirp",Pe[Pe.unimplemented]);throw n.methodName=t.name,n.serviceName=t.service.typeName,n}duplex(t){const n=new Nt("Duplex streaming is not supported by Twirp",Pe[Pe.unimplemented]);throw n.methodName=t.name,n.serviceName=t.service.typeName,n}serverStreaming(t){const n=new Nt("Server streaming is not supported by Twirp",Pe[Pe.unimplemented]);throw n.methodName=t.name,n.serviceName=t.service.typeName,n}}var zd={exports:{}};(function(e,t){(function(n,r){var i="1.0.40",s="",o="?",a="function",l="undefined",c="object",d="string",f="major",u="model",h="name",m="type",p="vendor",v="version",g="architecture",y="console",S="mobile",w="tablet",k="smarttv",E="wearable",T="embedded",I=500,U="Amazon",O="Apple",B="ASUS",P="BlackBerry",j="Browser",H="Chrome",$="Edge",A="Firefox",q="Google",x="Huawei",R="LG",M="Microsoft",J="Motorola",oe="Opera",We="Samsung",Y="Sharp",te="Sony",W="Xiaomi",Z="Zebra",fe="Facebook",Ue="Chromium OS",Ne="Mac OS",ct=" Browser",Pt=function(se,ae){var G={};for(var de in se)ae[de]&&ae[de].length%2===0?G[de]=ae[de].concat(se[de]):G[de]=se[de];return G},en=function(se){for(var ae={},G=0;G<se.length;G++)ae[se[G].toUpperCase()]=se[G];return ae},dn=function(se,ae){return typeof se===d?$e(ae).indexOf($e(se))!==-1:!1},$e=function(se){return se.toLowerCase()},En=function(se){return typeof se===d?se.replace(/[^\d\.]/g,s).split(".")[0]:r},Vn=function(se,ae){if(typeof se===d)return se=se.replace(/^\s\s*/,s),typeof ae===l?se:se.substring(0,I)},sr=function(se,ae){for(var G=0,de,Ot,Bt,he,K,bt;G<ae.length&&!K;){var ms=ae[G],gs=ae[G+1];for(de=Ot=0;de<ms.length&&!K&&ms[de];)if(K=ms[de++].exec(se),K)for(Bt=0;Bt<gs.length;Bt++)bt=K[++Ot],he=gs[Bt],typeof he===c&&he.length>0?he.length===2?typeof he[1]==a?this[he[0]]=he[1].call(this,bt):this[he[0]]=he[1]:he.length===3?typeof he[1]===a&&!(he[1].exec&&he[1].test)?this[he[0]]=bt?he[1].call(this,bt,he[2]):r:this[he[0]]=bt?bt.replace(he[1],he[2]):r:he.length===4&&(this[he[0]]=bt?he[3].call(this,bt.replace(he[1],he[2])):r):this[he]=bt||r;G+=2}},re=function(se,ae){for(var G in ae)if(typeof ae[G]===c&&ae[G].length>0){for(var de=0;de<ae[G].length;de++)if(dn(ae[G][de],se))return G===o?r:G}else if(dn(ae[G],se))return G===o?r:G;return ae.hasOwnProperty("*")?ae["*"]:se},xe={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},be={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,v],[/opios[\/ ]+([\w\.]+)/i],[v,[h,oe+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[v,[h,oe+" GX"]],[/\bopr\/([\w\.]+)/i],[v,[h,oe]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[h,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[v,[h,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,v],[/quark(?:pc)?\/([-\w\.]+)/i],[v,[h,"Quark"]],[/\bddg\/([\w\.]+)/i],[v,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[h,"UC"+j]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[h,"Smart Lenovo "+j]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+j],v],[/\bfocus\/([\w\.]+)/i],[v,[h,A+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[h,oe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[h,oe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[h,"MIUI"+ct]],[/fxios\/([\w\.-]+)/i],[v,[h,A]],[/\bqihoobrowser\/?([\w\.]*)/i],[v,[h,"360"]],[/\b(qq)\/([\w\.]+)/i],[[h,/(.+)/,"$1Browser"],v],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1"+ct],v],[/samsungbrowser\/([\w\.]+)/i],[v,[h,We+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[v,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[h,v],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[h],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[v,h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,fe],v],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[h,H+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,H+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[h,"Android "+j]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[v,re,xe]],[/(webkit|khtml)\/([\w\.]+)/i],[h,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],v],[/(wolvic|librewolf)\/([\w\.]+)/i],[h,v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[h,A+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,[v,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[h,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,$e]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,s,$e]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,$e]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[p,We],[m,w]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[p,We],[m,S]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[p,O],[m,S]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[p,O],[m,w]],[/(macintosh);/i],[u,[p,O]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[p,Y],[m,S]],[/(?:honor)([-\w ]+)[;\)]/i],[u,[p,"Honor"],[m,S]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[p,x],[m,w]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[p,x],[m,S]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[p,W],[m,S]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[p,W],[m,w]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[p,"OPPO"],[m,S]],[/\b(opd2\d{3}a?) bui/i],[u,[p,"OPPO"],[m,w]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[p,"Vivo"],[m,S]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[p,"Realme"],[m,S]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[p,J],[m,S]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[p,J],[m,w]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[p,R],[m,w]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[p,R],[m,S]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[p,"Lenovo"],[m,w]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[p,"Nokia"],[m,S]],[/(pixel c)\b/i],[u,[p,q],[m,w]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[p,q],[m,S]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[p,te],[m,S]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[p,te],[m,w]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[p,"OnePlus"],[m,S]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[p,U],[m,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[p,U],[m,S]],[/(playbook);[-\w\),; ]+(rim)/i],[u,p,[m,w]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[p,P],[m,S]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[p,B],[m,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[p,B],[m,S]],[/(nexus 9)/i],[u,[p,"HTC"],[m,w]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[u,/_/g," "],[m,S]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[p,"TCL"],[m,w]],[/(itel) ((\w+))/i],[[p,$e],u,[m,re,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[p,"Acer"],[m,w]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[p,"Meizu"],[m,S]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[p,"Ulefone"],[m,S]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[u,[p,"Energizer"],[m,S]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[u,[p,"Cat"],[m,S]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[u,[p,"Smartfren"],[m,S]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[p,"Nothing"],[m,S]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,u,[m,S]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,u,[m,w]],[/(surface duo)/i],[u,[p,M],[m,w]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[p,"Fairphone"],[m,S]],[/(u304aa)/i],[u,[p,"AT&T"],[m,S]],[/\bsie-(\w*)/i],[u,[p,"Siemens"],[m,S]],[/\b(rct\w+) b/i],[u,[p,"RCA"],[m,w]],[/\b(venue[\d ]{2,7}) b/i],[u,[p,"Dell"],[m,w]],[/\b(q(?:mv|ta)\w+) b/i],[u,[p,"Verizon"],[m,w]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[p,"Barnes & Noble"],[m,w]],[/\b(tm\d{3}\w+) b/i],[u,[p,"NuVision"],[m,w]],[/\b(k88) b/i],[u,[p,"ZTE"],[m,w]],[/\b(nx\d{3}j) b/i],[u,[p,"ZTE"],[m,S]],[/\b(gen\d{3}) b.+49h/i],[u,[p,"Swiss"],[m,S]],[/\b(zur\d{3}) b/i],[u,[p,"Swiss"],[m,w]],[/\b((zeki)?tb.*\b) b/i],[u,[p,"Zeki"],[m,w]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],u,[m,w]],[/\b(ns-?\w{0,9}) b/i],[u,[p,"Insignia"],[m,w]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[p,"NextBook"],[m,w]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],u,[m,S]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],u,[m,S]],[/\b(ph-1) /i],[u,[p,"Essential"],[m,S]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[p,"Envizen"],[m,w]],[/\b(trio[-\w\. ]+) b/i],[u,[p,"MachSpeed"],[m,w]],[/\btu_(1491) b/i],[u,[p,"Rotor"],[m,w]],[/(shield[\w ]+) b/i],[u,[p,"Nvidia"],[m,w]],[/(sprint) (\w+)/i],[p,u,[m,S]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[p,M],[m,S]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[p,Z],[m,w]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[p,Z],[m,S]],[/smart-tv.+(samsung)/i],[p,[m,k]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[p,We],[m,k]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,R],[m,k]],[/(apple) ?tv/i],[p,[u,O+" TV"],[m,k]],[/crkey/i],[[u,H+"cast"],[p,q],[m,k]],[/droid.+aft(\w+)( bui|\))/i],[u,[p,U],[m,k]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[p,Y],[m,k]],[/(bravia[\w ]+)( bui|\))/i],[u,[p,te],[m,k]],[/(mitv-\w{5}) bui/i],[u,[p,W],[m,k]],[/Hbbtv.*(technisat) (.*);/i],[p,u,[m,k]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,Vn],[u,Vn],[m,k]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,k]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,u,[m,y]],[/droid.+; (shield) bui/i],[u,[p,"Nvidia"],[m,y]],[/(playstation [345portablevi]+)/i],[u,[p,te],[m,y]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[p,M],[m,y]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[p,We],[m,E]],[/((pebble))app/i],[p,u,[m,E]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[p,O],[m,E]],[/droid.+; (glass) \d/i],[u,[p,q],[m,E]],[/droid.+; (wt63?0{2,3})\)/i],[u,[p,Z],[m,E]],[/droid.+; (glass) \d/i],[u,[p,q],[m,E]],[/(pico) (4|neo3(?: link|pro)?)/i],[p,u,[m,E]],[/; (quest( \d| pro)?)/i],[u,[p,fe],[m,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[m,T]],[/(aeobc)\b/i],[u,[p,U],[m,T]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[m,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[m,w]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,w]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,S]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[h,$+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[h,v],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,v],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[v,re,Q]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,re,Q],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,Ne],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,v],[/\(bb(10);/i],[v,[h,P]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[h,A+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[v,[h,H+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,Ue],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,v],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,v]]},Ie=function(se,ae){if(typeof se===c&&(ae=se,se=r),!(this instanceof Ie))return new Ie(se,ae).getResult();var G=typeof n!==l&&n.navigator?n.navigator:r,de=se||(G&&G.userAgent?G.userAgent:s),Ot=G&&G.userAgentData?G.userAgentData:r,Bt=ae?Pt(be,ae):be,he=G&&G.userAgent==de;return this.getBrowser=function(){var K={};return K[h]=r,K[v]=r,sr.call(K,de,Bt.browser),K[f]=En(K[v]),he&&G&&G.brave&&typeof G.brave.isBrave==a&&(K[h]="Brave"),K},this.getCPU=function(){var K={};return K[g]=r,sr.call(K,de,Bt.cpu),K},this.getDevice=function(){var K={};return K[p]=r,K[u]=r,K[m]=r,sr.call(K,de,Bt.device),he&&!K[m]&&Ot&&Ot.mobile&&(K[m]=S),he&&K[u]=="Macintosh"&&G&&typeof G.standalone!==l&&G.maxTouchPoints&&G.maxTouchPoints>2&&(K[u]="iPad",K[m]=w),K},this.getEngine=function(){var K={};return K[h]=r,K[v]=r,sr.call(K,de,Bt.engine),K},this.getOS=function(){var K={};return K[h]=r,K[v]=r,sr.call(K,de,Bt.os),he&&!K[h]&&Ot&&Ot.platform&&Ot.platform!="Unknown"&&(K[h]=Ot.platform.replace(/chrome os/i,Ue).replace(/macos/i,Ne)),K},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return de},this.setUA=function(K){return de=typeof K===d&&K.length>I?Vn(K,I):K,this},this.setUA(de),this};Ie.VERSION=i,Ie.BROWSER=en([h,v,f]),Ie.CPU=en([g]),Ie.DEVICE=en([u,p,m,y,S,k,w,E,T]),Ie.ENGINE=Ie.OS=en([h,v]),e.exports&&(t=e.exports=Ie),t.UAParser=Ie;var ge=typeof n!==l&&(n.jQuery||n.Zepto);if(ge&&!ge.ua){var St=new Ie;ge.ua=St.getResult(),ge.ua.get=function(){return St.getUA()},ge.ua.set=function(se){St.setUA(se);var ae=St.getResult();for(var G in ae)ge.ua[G]=ae[G]}}})(typeof window=="object"?window:jw)})(zd,zd.exports);var N1=zd.exports,Hd=function(e,t){return Hd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Hd(e,t)};function Fn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Hd(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function A1(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function I0(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function es(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ri(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function ts(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Vi(e){return this instanceof Vi?(this.v=e,this):new Vi(e)}function D1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(m){return Promise.resolve(m).then(h,f)}}function a(h,m){r[h]&&(i[h]=function(p){return new Promise(function(v,g){s.push([h,p,v,g])>1||l(h,p)})},m&&(i[h]=m(i[h])))}function l(h,m){try{c(r[h](m))}catch(p){u(s[0][3],p)}}function c(h){h.value instanceof Vi?Promise.resolve(h.value.v).then(d,f):u(s[0][2],h)}function d(h){l("next",h)}function f(h){l("throw",h)}function u(h,m){h(m),s.shift(),s.length&&l(s[0][0],s[0][1])}}function L1(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof es=="function"?es(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,l){o=e[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}function Se(e){return typeof e=="function"}function P0(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var hu=P0(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Cc(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Lo=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=es(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(p){t={error:p}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else o.remove(this);var d=this.initialTeardown;if(Se(d))try{d()}catch(p){s=p instanceof hu?p.errors:[p]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var u=es(f),h=u.next();!h.done;h=u.next()){var m=h.value;try{Hm(m)}catch(p){s=s??[],p instanceof hu?s=ts(ts([],ri(s)),ri(p.errors)):s.push(p)}}}catch(p){r={error:p}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}}if(s)throw new hu(s)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Hm(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Cc(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Cc(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),O0=Lo.EMPTY;function N0(e){return e instanceof Lo||e&&"closed"in e&&Se(e.remove)&&Se(e.add)&&Se(e.unsubscribe)}function Hm(e){Se(e)?e():e.unsubscribe()}var j1={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},A0={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,ts([e,t],ri(n)))},clearTimeout:function(e){var t=A0.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function D0(e){A0.setTimeout(function(){throw e})}function Wm(){}function $a(e){e()}var mh=function(e){Fn(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,N0(n)&&n.add(r)):r.destination=U1,r}return t.create=function(n,r,i){return new mo(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Lo),M1=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){la(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){la(r)}else la(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){la(n)}},e}(),mo=function(e){Fn(t,e);function t(n,r,i){var s=e.call(this)||this,o;return Se(n)||!n?o={next:n??void 0,error:r??void 0,complete:i??void 0}:o=n,s.destination=new M1(o),s}return t}(mh);function la(e){D0(e)}function F1(e){throw e}var U1={closed:!0,next:Wm,error:F1,complete:Wm},gh=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function jo(e){return e}function $1(e){return e.length===0?jo:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var Rt=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,s=B1(t)?t:new mo(t,n,r);return $a(function(){var o=i,a=o.operator,l=o.source;s.add(a?a.call(s,l):l?i._subscribe(s):i._trySubscribe(s))}),s},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=qm(n),new n(function(i,s){var o=new mo({next:function(a){try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});r.subscribe(o)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[gh]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return $1(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=qm(t),new t(function(r,i){var s;n.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},e.create=function(t){return new e(t)},e}();function qm(e){var t;return(t=e??j1.Promise)!==null&&t!==void 0?t:Promise}function V1(e){return e&&Se(e.next)&&Se(e.error)&&Se(e.complete)}function B1(e){return e&&e instanceof mh||V1(e)&&N0(e)}function z1(e){return Se(e==null?void 0:e.lift)}function Un(e){return function(t){if(z1(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function tr(e,t,n,r,i){return new H1(e,t,n,r,i)}var H1=function(e){Fn(t,e);function t(n,r,i,s,o,a){var l=e.call(this,n)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=r?function(c){try{r(c)}catch(d){n.error(d)}}:e.prototype._next,l._error=s?function(c){try{s(c)}catch(d){n.error(d)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=i?function(){try{i()}catch(c){n.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,l}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(mh),W1=P0(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),gl=function(e){Fn(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new Km(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new W1},t.prototype.next=function(n){var r=this;$a(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=es(r.currentObservers),a=o.next();!a.done;a=o.next()){var l=a.value;l.next(n)}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;$a(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;$a(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,s=i.hasError,o=i.isStopped,a=i.observers;return s||o?O0:(this.currentObservers=null,a.push(n),new Lo(function(){r.currentObservers=null,Cc(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,o=r.isStopped;i?n.error(s):o&&n.complete()},t.prototype.asObservable=function(){var n=new Rt;return n.source=this,n},t.create=function(n,r){return new Km(n,r)},t}(Rt),Km=function(e){Fn(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:O0},t}(gl),ce=function(e){Fn(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,s=n._value;if(r)throw i;return this._throwIfClosed(),s},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(gl),vh={now:function(){return(vh.delegate||Date).now()},delegate:void 0},Wd=function(e){Fn(t,e);function t(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=vh);var s=e.call(this)||this;return s._bufferSize=n,s._windowTime=r,s._timestampProvider=i,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=r===1/0,s._bufferSize=Math.max(1,n),s._windowTime=Math.max(1,r),s}return t.prototype.next=function(n){var r=this,i=r.isStopped,s=r._buffer,o=r._infiniteTimeWindow,a=r._timestampProvider,l=r._windowTime;i||(s.push(n),!o&&s.push(a.now()+l)),this._trimBuffer(),e.prototype.next.call(this,n)},t.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,s=i._infiniteTimeWindow,o=i._buffer,a=o.slice(),l=0;l<a.length&&!n.closed;l+=s?1:2)n.next(a[l]);return this._checkFinalizedStatuses(n),r},t.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,s=n._buffer,o=n._infiniteTimeWindow,a=(o?1:2)*r;if(r<1/0&&a<s.length&&s.splice(0,s.length-a),!o){for(var l=i.now(),c=0,d=1;d<s.length&&s[d]<=l;d+=2)c=d;c&&s.splice(0,c+1)}},t}(gl),q1=function(e){Fn(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(Lo),Gm={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,ts([e,t],ri(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},K1=function(e){Fn(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),Gm.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&Gm.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,s;try{this.work(n)}catch(o){i=!0,s=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Cc(s,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(q1),Jm=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=vh.now,e}(),G1=function(e){Fn(t,e);function t(n,r){r===void 0&&(r=Jm.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(Jm),J1=new G1(K1),Y1=new Rt(function(e){return e.complete()});function Q1(e){return e&&Se(e.schedule)}function yh(e){return e[e.length-1]}function X1(e){return Se(yh(e))?e.pop():void 0}function Mo(e){return Q1(yh(e))?e.pop():void 0}function Z1(e,t){return typeof yh(e)=="number"?e.pop():t}var Sh=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function L0(e){return Se(e==null?void 0:e.then)}function j0(e){return Se(e[gh])}function M0(e){return Symbol.asyncIterator&&Se(e==null?void 0:e[Symbol.asyncIterator])}function F0(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function ex(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var U0=ex();function $0(e){return Se(e==null?void 0:e[U0])}function V0(e){return D1(this,arguments,function(){var n,r,i,s;return I0(this,function(o){switch(o.label){case 0:n=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Vi(n.read())];case 3:return r=o.sent(),i=r.value,s=r.done,s?[4,Vi(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Vi(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function B0(e){return Se(e==null?void 0:e.getReader)}function ir(e){if(e instanceof Rt)return e;if(e!=null){if(j0(e))return tx(e);if(Sh(e))return nx(e);if(L0(e))return rx(e);if(M0(e))return z0(e);if($0(e))return ix(e);if(B0(e))return sx(e)}throw F0(e)}function tx(e){return new Rt(function(t){var n=e[gh]();if(Se(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function nx(e){return new Rt(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function rx(e){return new Rt(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,D0)})}function ix(e){return new Rt(function(t){var n,r;try{for(var i=es(e),s=i.next();!s.done;s=i.next()){var o=s.value;if(t.next(o),t.closed)return}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function z0(e){return new Rt(function(t){ox(e,t).catch(function(n){return t.error(n)})})}function sx(e){return z0(V0(e))}function ox(e,t){var n,r,i,s;return A1(this,void 0,void 0,function(){var o,a;return I0(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=L1(e),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),i={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Er(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function H0(e,t){return t===void 0&&(t=0),Un(function(n,r){n.subscribe(tr(r,function(i){return Er(r,e,function(){return r.next(i)},t)},function(){return Er(r,e,function(){return r.complete()},t)},function(i){return Er(r,e,function(){return r.error(i)},t)}))})}function W0(e,t){return t===void 0&&(t=0),Un(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function ax(e,t){return ir(e).pipe(W0(t),H0(t))}function cx(e,t){return ir(e).pipe(W0(t),H0(t))}function lx(e,t){return new Rt(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function ux(e,t){return new Rt(function(n){var r;return Er(n,t,function(){r=e[U0](),Er(n,t,function(){var i,s,o;try{i=r.next(),s=i.value,o=i.done}catch(a){n.error(a);return}o?n.complete():n.next(s)},0,!0)}),function(){return Se(r==null?void 0:r.return)&&r.return()}})}function q0(e,t){if(!e)throw new Error("Iterable cannot be null");return new Rt(function(n){Er(n,t,function(){var r=e[Symbol.asyncIterator]();Er(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function dx(e,t){return q0(V0(e),t)}function fx(e,t){if(e!=null){if(j0(e))return ax(e,t);if(Sh(e))return lx(e,t);if(L0(e))return cx(e,t);if(M0(e))return q0(e,t);if($0(e))return ux(e,t);if(B0(e))return dx(e,t)}throw F0(e)}function di(e,t){return t?fx(e,t):ir(e)}function K0(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Mo(e);return di(e,n)}function Ct(e,t){return Un(function(n,r){var i=0;n.subscribe(tr(r,function(s){r.next(e.call(t,s,i++))}))})}var hx=Array.isArray;function px(e,t){return hx(t)?e.apply(void 0,ts([],ri(t))):e(t)}function G0(e){return Ct(function(t){return px(e,t)})}var mx=Array.isArray,gx=Object.getPrototypeOf,vx=Object.prototype,yx=Object.keys;function Sx(e){if(e.length===1){var t=e[0];if(mx(t))return{args:t,keys:null};if(bx(t)){var n=yx(t);return{args:n.map(function(r){return t[r]}),keys:n}}}return{args:e,keys:null}}function bx(e){return e&&typeof e=="object"&&gx(e)===vx}function wx(e,t){return e.reduce(function(n,r,i){return n[r]=t[i],n},{})}function ii(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Mo(e),r=X1(e),i=Sx(e),s=i.args,o=i.keys;if(s.length===0)return di([],n);var a=new Rt(Cx(s,n,o?function(l){return wx(o,l)}:jo));return r?a.pipe(G0(r)):a}function Cx(e,t,n){return n===void 0&&(n=jo),function(r){Ym(t,function(){for(var i=e.length,s=new Array(i),o=i,a=i,l=function(d){Ym(t,function(){var f=di(e[d],t),u=!1;f.subscribe(tr(r,function(h){s[d]=h,u||(u=!0,a--),a||r.next(n(s.slice()))},function(){--o||r.complete()}))},r)},c=0;c<i;c++)l(c)},r)}}function Ym(e,t,n){e?Er(n,e,t):t()}function kx(e,t,n,r,i,s,o,a){var l=[],c=0,d=0,f=!1,u=function(){f&&!l.length&&!c&&t.complete()},h=function(p){return c<r?m(p):l.push(p)},m=function(p){c++;var v=!1;ir(n(p,d++)).subscribe(tr(t,function(g){t.next(g)},function(){v=!0},void 0,function(){if(v)try{c--;for(var g=function(){var y=l.shift();o||m(y)};l.length&&c<r;)g();u()}catch(y){t.error(y)}}))};return e.subscribe(tr(t,h,function(){f=!0,u()})),function(){}}function go(e,t,n){return n===void 0&&(n=1/0),Se(t)?go(function(r,i){return Ct(function(s,o){return t(r,s,i,o)})(ir(e(r,i)))},n):(typeof t=="number"&&(n=t),Un(function(r,i){return kx(r,i,e,n)}))}function J0(e){return e===void 0&&(e=1/0),go(jo,e)}function Ex(){return J0(1)}function Qm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ex()(di(e,Mo(e)))}var Tx=["addListener","removeListener"],xx=["addEventListener","removeEventListener"],Rx=["on","off"];function qd(e,t,n,r){if(Se(n)&&(r=n,n=void 0),r)return qd(e,t,n).pipe(G0(r));var i=ri(Px(e)?xx.map(function(a){return function(l){return e[a](t,l,n)}}):_x(e)?Tx.map(Xm(e,t)):Ix(e)?Rx.map(Xm(e,t)):[],2),s=i[0],o=i[1];if(!s&&Sh(e))return go(function(a){return qd(a,t,n)})(ir(e));if(!s)throw new TypeError("Invalid event target");return new Rt(function(a){var l=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a.next(1<c.length?c:c[0])};return s(l),function(){return o(l)}})}function Xm(e,t){return function(n){return function(r){return e[n](t,r)}}}function _x(e){return Se(e.addListener)&&Se(e.removeListener)}function Ix(e){return Se(e.on)&&Se(e.off)}function Px(e){return Se(e.addEventListener)&&Se(e.removeEventListener)}function Ox(e,t,n){return new Rt(function(r){var i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return r.next(o.length===1?o[0]:o)},s=e(i);return Se(t)?function(){return t(i,s)}:void 0})}function bh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Mo(e),r=Z1(e,1/0),i=e;return i.length?i.length===1?ir(i[0]):J0(r)(di(i,n)):Y1}function vl(e,t){return Se(t)?go(e,t,1):go(e,1)}function Nx(e,t){return t===void 0&&(t=J1),Un(function(n,r){var i=null,s=null,o=null,a=function(){if(i){i.unsubscribe(),i=null;var c=s;s=null,r.next(c)}};function l(){var c=o+e,d=t.now();if(d<c){i=this.schedule(void 0,c-d),r.add(i);return}a()}n.subscribe(tr(r,function(c){s=c,o=t.now(),i||(i=t.schedule(l,e),r.add(i))},function(){a(),r.complete()},void 0,function(){s=i=null}))})}function Et(e,t){return t===void 0&&(t=jo),e=e??Ax,Un(function(n,r){var i,s=!0;n.subscribe(tr(r,function(o){var a=t(o);(s||!e(i,a))&&(s=!1,i=a,r.next(o))}))})}function Ax(e,t){return e===t}function ua(e,t){return Et(function(n,r){return n[e]===r[e]})}function Dx(){return Un(function(e,t){var n,r=!1;e.subscribe(tr(t,function(i){var s=n;n=i,r&&t.next([s,i]),r=!0}))})}function Lx(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new gl}:t,r=e.resetOnError,i=r===void 0?!0:r,s=e.resetOnComplete,o=s===void 0?!0:s,a=e.resetOnRefCountZero,l=a===void 0?!0:a;return function(c){var d,f,u,h=0,m=!1,p=!1,v=function(){f==null||f.unsubscribe(),f=void 0},g=function(){v(),d=u=void 0,m=p=!1},y=function(){var S=d;g(),S==null||S.unsubscribe()};return Un(function(S,w){h++,!p&&!m&&v();var k=u=u??n();w.add(function(){h--,h===0&&!p&&!m&&(f=pu(y,l))}),k.subscribe(w),!d&&h>0&&(d=new mo({next:function(E){return k.next(E)},error:function(E){p=!0,v(),f=pu(g,i,E),k.error(E)},complete:function(){m=!0,v(),f=pu(g,o),k.complete()}}),ir(S).subscribe(d))})(c)}}function pu(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var i=new mo({next:function(){i.unsubscribe(),e()}});return ir(t.apply(void 0,ts([],ri(n)))).subscribe(i)}}function Lt(e,t,n){var r,i,s,o,a=!1;return e&&typeof e=="object"?(r=e.bufferSize,o=r===void 0?1/0:r,i=e.windowTime,t=i===void 0?1/0:i,s=e.refCount,a=s===void 0?!1:s,n=e.scheduler):o=e??1/0,Lx({connector:function(){return new Wd(o,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function yl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Mo(e);return Un(function(r,i){(n?Qm(e,r,n):Qm(e,r)).subscribe(i)})}function Kd(e,t){return t===void 0&&(t=!1),Un(function(n,r){var i=0;n.subscribe(tr(r,function(s){var o=e(s,i++);(o||t)&&r.next(s),!o&&r.complete()}))})}var Y0={},Q0={exports:{}},Zm=Q0.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=e.raddr!=null?" raddr %s rport %d":"%v%v",t+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(t+=" generation %d"),t+=e["network-id"]!=null?" network-id %d":"%v",t+=e["network-cost"]!=null?" network-cost %d":"%v",t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return e.attribute!=null&&(t+=" %s",e.value!=null&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=e.id!=null?"id=%s %s":"%v%s",t+=e.mediaClockValue!=null?"=%s":"",t+=e.rateNumerator!=null?" rate=%s":"",t+=e.rateDenominator!=null?"/%s":"",t}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(Zm).forEach(function(e){var t=Zm[e];t.forEach(function(n){n.reg||(n.reg=/(.*)/),n.format||(n.format="%s")})});var X0=Q0.exports;(function(e){var t=function(a){return String(Number(a))===a?Number(a):a},n=function(a,l,c,d){if(d&&!c)l[d]=t(a[1]);else for(var f=0;f<c.length;f+=1)a[f+1]!=null&&(l[c[f]]=t(a[f+1]))},r=function(a,l,c){var d=a.name&&a.names;a.push&&!l[a.push]?l[a.push]=[]:d&&!l[a.name]&&(l[a.name]={});var f=a.push?{}:d?l[a.name]:l;n(c.match(a.reg),f,a.names,a.name),a.push&&l[a.push].push(f)},i=X0,s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(a){var l={},c=[],d=l;return a.split(/(\r\n|\r|\n)/).filter(s).forEach(function(f){var u=f[0],h=f.slice(2);u==="m"&&(c.push({rtp:[],fmtp:[]}),d=c[c.length-1]);for(var m=0;m<(i[u]||[]).length;m+=1){var p=i[u][m];if(p.reg.test(h))return r(p,d,h)}}),l.media=c,l};var o=function(a,l){var c=l.split(/=(.+)/,2);return c.length===2?a[c[0]]=t(c[1]):c.length===1&&l.length>1&&(a[c[0]]=void 0),a};e.parseParams=function(a){return a.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(a){return a.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(a){for(var l=[],c=a.split(" ").map(t),d=0;d<c.length;d+=3)l.push({component:c[d],ip:c[d+1],port:c[d+2]});return l},e.parseImageAttributes=function(a){return a.split(" ").map(function(l){return l.substring(1,l.length-1).split(",").reduce(o,{})})},e.parseSimulcastStreamList=function(a){return a.split(";").map(function(l){return l.split(",").map(function(c){var d,f=!1;return c[0]!=="~"?d=t(c):(d=t(c.substring(1,c.length)),f=!0),{scid:d,paused:f}})})}})(Y0);var mu=X0,jx=/%[sdv%]/g,Mx=function(e){var t=1,n=arguments,r=n.length;return e.replace(jx,function(i){if(t>=r)return i;var s=n[t];switch(t+=1,i){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},xs=function(e,t,n){var r=t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format,i=[e+"="+r];if(t.names)for(var s=0;s<t.names.length;s+=1){var o=t.names[s];t.name?i.push(n[t.name][o]):i.push(n[t.names[s]])}else i.push(n[t.name]);return Mx.apply(null,i)},Fx=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Ux=["i","c","b","a"],$x=function(e,t){t=t||{},e.version==null&&(e.version=0),e.name==null&&(e.name=" "),e.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var n=t.outerOrder||Fx,r=t.innerOrder||Ux,i=[];return n.forEach(function(s){mu[s].forEach(function(o){o.name in e&&e[o.name]!=null?i.push(xs(s,o,e)):o.push in e&&e[o.push]!=null&&e[o.push].forEach(function(a){i.push(xs(s,o,a))})})}),e.media.forEach(function(s){i.push(xs("m",mu.m[0],s)),r.forEach(function(o){mu[o].forEach(function(a){a.name in s&&s[a.name]!=null?i.push(xs(o,a,s)):a.push in s&&s[a.push]!=null&&s[a.push].forEach(function(l){i.push(xs(o,a,l))})})})}),i.join(`\r
`)+`\r
`},fi=Y0,Vx=$x,Z0=Vx,wh=fi.parse;fi.parseParams;fi.parseFmtpConfig;fi.parsePayloads;fi.parseRemoteCandidates;fi.parseImageAttributes;fi.parseSimulcastStreamList;const gu={AVAILABLE:"available",DISABLED:"disabled",AUTO_ON:"auto-on"},ee={BLOCK_USERS:"block-users",CHANGE_MAX_DURATION:"change-max-duration",CREATE_CALL:"create-call",CREATE_REACTION:"create-reaction",ENABLE_NOISE_CANCELLATION:"enable-noise-cancellation",END_CALL:"end-call",JOIN_BACKSTAGE:"join-backstage",JOIN_CALL:"join-call",JOIN_ENDED_CALL:"join-ended-call",MUTE_USERS:"mute-users",PIN_FOR_EVERYONE:"pin-for-everyone",READ_CALL:"read-call",REMOVE_CALL_MEMBER:"remove-call-member",SCREENSHARE:"screenshare",SEND_AUDIO:"send-audio",SEND_VIDEO:"send-video",START_BROADCAST_CALL:"start-broadcast-call",START_RECORD_CALL:"start-record-call",START_TRANSCRIPTION_CALL:"start-transcription-call",STOP_BROADCAST_CALL:"stop-broadcast-call",STOP_RECORD_CALL:"stop-record-call",STOP_TRANSCRIPTION_CALL:"stop-transcription-call",UPDATE_CALL:"update-call",UPDATE_CALL_MEMBER:"update-call-member",UPDATE_CALL_PERMISSIONS:"update-call-permissions",UPDATE_CALL_SETTINGS:"update-call-settings"};class eb extends Error{}var kc;(function(e){e[e.NULL_VALUE=0]="NULL_VALUE"})(kc||(kc={}));class Bx extends F{constructor(){super("google.protobuf.Struct",[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:()=>Bi}}])}internalJsonWrite(t,n){let r={};for(let[i,s]of Object.entries(t.fields))r[i]=Bi.toJson(s);return r}internalJsonRead(t,n,r){if(!pc(t))throw new globalThis.Error("Unable to parse message "+this.typeName+" from JSON "+ls(t)+".");r||(r=this.create());for(let[i,s]of globalThis.Object.entries(t))r.fields[i]=Bi.fromJson(s);return r}}const Ec=new Bx;class zx extends F{constructor(){super("google.protobuf.Value",[{no:1,name:"null_value",kind:"enum",oneof:"kind",T:()=>["google.protobuf.NullValue",kc]},{no:2,name:"number_value",kind:"scalar",oneof:"kind",T:1},{no:3,name:"string_value",kind:"scalar",oneof:"kind",T:9},{no:4,name:"bool_value",kind:"scalar",oneof:"kind",T:8},{no:5,name:"struct_value",kind:"message",oneof:"kind",T:()=>Ec},{no:6,name:"list_value",kind:"message",oneof:"kind",T:()=>eg}])}internalJsonWrite(t,n){if(t.kind.oneofKind===void 0)throw new globalThis.Error;switch(t.kind.oneofKind){case void 0:throw new globalThis.Error;case"boolValue":return t.kind.boolValue;case"nullValue":return null;case"numberValue":let r=t.kind.numberValue;if(typeof r=="number"&&!Number.isFinite(r))throw new globalThis.Error;return r;case"stringValue":return t.kind.stringValue;case"listValue":let i=this.fields.find(o=>o.no===6);if((i==null?void 0:i.kind)!=="message")throw new globalThis.Error;return i.T().toJson(t.kind.listValue);case"structValue":let s=this.fields.find(o=>o.no===5);if((s==null?void 0:s.kind)!=="message")throw new globalThis.Error;return s.T().toJson(t.kind.structValue)}}internalJsonRead(t,n,r){switch(r||(r=this.create()),typeof t){case"number":r.kind={oneofKind:"numberValue",numberValue:t};break;case"string":r.kind={oneofKind:"stringValue",stringValue:t};break;case"boolean":r.kind={oneofKind:"boolValue",boolValue:t};break;case"object":t===null?r.kind={oneofKind:"nullValue",nullValue:kc.NULL_VALUE}:globalThis.Array.isArray(t)?r.kind={oneofKind:"listValue",listValue:eg.fromJson(t)}:r.kind={oneofKind:"structValue",structValue:Ec.fromJson(t)};break;default:throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+ls(t))}return r}}const Bi=new zx;class Hx extends F{constructor(){super("google.protobuf.ListValue",[{no:1,name:"values",kind:"message",repeat:1,T:()=>Bi}])}internalJsonWrite(t,n){return t.values.map(r=>Bi.toJson(r))}internalJsonRead(t,n,r){if(!globalThis.Array.isArray(t))throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+ls(t));r||(r=this.create());let i=t.map(s=>Bi.fromJson(s));return r.values.push(...i),r}}const eg=new Hx;class Wx extends F{constructor(){super("google.protobuf.Timestamp",[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}])}now(){const t=this.create(),n=Date.now();return t.seconds=Te.from(Math.floor(n/1e3)).toString(),t.nanos=n%1e3*1e6,t}toDate(t){return new Date(Te.from(t.seconds).toNumber()*1e3+Math.ceil(t.nanos/1e6))}fromDate(t){const n=this.create(),r=t.getTime();return n.seconds=Te.from(Math.floor(r/1e3)).toString(),n.nanos=r%1e3*1e6,n}internalJsonWrite(t,n){let r=Te.from(t.seconds).toNumber()*1e3;if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");if(t.nanos<0)throw new Error("Unable to encode invalid Timestamp to JSON. Nanos must not be negative.");let i="Z";if(t.nanos>0){let s=(t.nanos+1e9).toString().substring(1);s.substring(3)==="000000"?i="."+s.substring(0,3)+"Z":s.substring(6)==="000"?i="."+s.substring(0,6)+"Z":i="."+s+"Z"}return new Date(r).toISOString().replace(".000Z",i)}internalJsonRead(t,n,r){if(typeof t!="string")throw new Error("Unable to parse Timestamp from JSON "+ls(t)+".");let i=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("Unable to parse Timestamp from JSON. Invalid format.");let s=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(s))throw new Error("Unable to parse Timestamp from JSON. Invalid value.");if(s<Date.parse("0001-01-01T00:00:00Z")||s>Date.parse("9999-12-31T23:59:59Z"))throw new globalThis.Error("Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");return r||(r=this.create()),r.seconds=Te.from(s/1e3).toString(),r.nanos=0,i[7]&&(r.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),r}}const vo=new Wx;var mt;(function(e){e[e.PUBLISHER_UNSPECIFIED=0]="PUBLISHER_UNSPECIFIED",e[e.SUBSCRIBER=1]="SUBSCRIBER"})(mt||(mt={}));var yo;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.POOR=1]="POOR",e[e.GOOD=2]="GOOD",e[e.EXCELLENT=3]="EXCELLENT"})(yo||(yo={}));var Tr;(function(e){e[e.LOW_UNSPECIFIED=0]="LOW_UNSPECIFIED",e[e.MID=1]="MID",e[e.HIGH=2]="HIGH",e[e.OFF=3]="OFF"})(Tr||(Tr={}));var D;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.AUDIO=1]="AUDIO",e[e.VIDEO=2]="VIDEO",e[e.SCREEN_SHARE=3]="SCREEN_SHARE",e[e.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO"})(D||(D={}));var ns;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.PUBLISH_TRACK_NOT_FOUND=100]="PUBLISH_TRACK_NOT_FOUND",e[e.PUBLISH_TRACKS_MISMATCH=101]="PUBLISH_TRACKS_MISMATCH",e[e.PUBLISH_TRACK_OUT_OF_ORDER=102]="PUBLISH_TRACK_OUT_OF_ORDER",e[e.PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND=103]="PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND",e[e.LIVE_ENDED=104]="LIVE_ENDED",e[e.PARTICIPANT_NOT_FOUND=200]="PARTICIPANT_NOT_FOUND",e[e.PARTICIPANT_MIGRATING_OUT=201]="PARTICIPANT_MIGRATING_OUT",e[e.PARTICIPANT_MIGRATION_FAILED=202]="PARTICIPANT_MIGRATION_FAILED",e[e.PARTICIPANT_MIGRATING=203]="PARTICIPANT_MIGRATING",e[e.PARTICIPANT_RECONNECT_FAILED=204]="PARTICIPANT_RECONNECT_FAILED",e[e.PARTICIPANT_MEDIA_TRANSPORT_FAILURE=205]="PARTICIPANT_MEDIA_TRANSPORT_FAILURE",e[e.CALL_NOT_FOUND=300]="CALL_NOT_FOUND",e[e.REQUEST_VALIDATION_FAILED=400]="REQUEST_VALIDATION_FAILED",e[e.UNAUTHENTICATED=401]="UNAUTHENTICATED",e[e.PERMISSION_DENIED=403]="PERMISSION_DENIED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.SFU_SHUTTING_DOWN=600]="SFU_SHUTTING_DOWN",e[e.SFU_FULL=700]="SFU_FULL"})(ns||(ns={}));var Or;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.REACT=1]="REACT",e[e.ANGULAR=2]="ANGULAR",e[e.ANDROID=3]="ANDROID",e[e.IOS=4]="IOS",e[e.FLUTTER=5]="FLUTTER",e[e.REACT_NATIVE=6]="REACT_NATIVE",e[e.UNITY=7]="UNITY",e[e.GO=8]="GO",e[e.PLAIN_JAVASCRIPT=9]="PLAIN_JAVASCRIPT"})(Or||(Or={}));var So;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.USER_MUTED=1]="USER_MUTED",e[e.PERMISSION_REVOKED=2]="PERMISSION_REVOKED",e[e.MODERATION=3]="MODERATION"})(So||(So={}));var Tc;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SHUTTING_DOWN=1]="SHUTTING_DOWN",e[e.REBALANCE=2]="REBALANCE"})(Tc||(Tc={}));var bo;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ENDED=1]="ENDED",e[e.LIVE_ENDED=2]="LIVE_ENDED",e[e.KICKED=3]="KICKED",e[e.SESSION_ENDED=4]="SESSION_ENDED"})(bo||(bo={}));var le;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.DISCONNECT=1]="DISCONNECT",e[e.FAST=2]="FAST",e[e.REJOIN=3]="REJOIN",e[e.MIGRATE=4]="MIGRATE"})(le||(le={}));var xc;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.NONE=1]="NONE",e[e.LIGHT=2]="LIGHT",e[e.MODERATE=3]="MODERATE",e[e.SEVERE=4]="SEVERE",e[e.CRITICAL=5]="CRITICAL",e[e.EMERGENCY=6]="EMERGENCY",e[e.SHUTDOWN=7]="SHUTDOWN"})(xc||(xc={}));var Rc;(function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.NOMINAL=1]="NOMINAL",e[e.FAIR=2]="FAIR",e[e.SERIOUS=3]="SERIOUS",e[e.CRITICAL=4]="CRITICAL"})(Rc||(Rc={}));class qx extends F{constructor(){super("stream.video.sfu.models.CallState",[{no:1,name:"participants",kind:"message",repeat:1,T:()=>hi},{no:2,name:"started_at",kind:"message",T:()=>vo},{no:3,name:"participant_count",kind:"message",T:()=>Ch},{no:4,name:"pins",kind:"message",repeat:1,T:()=>kh}])}}const tb=new qx;class Kx extends F{constructor(){super("stream.video.sfu.models.ParticipantCount",[{no:1,name:"total",kind:"scalar",T:13},{no:2,name:"anonymous",kind:"scalar",T:13}])}}const Ch=new Kx;class Gx extends F{constructor(){super("stream.video.sfu.models.Pin",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}}const kh=new Gx;class Jx extends F{constructor(){super("stream.video.sfu.models.Participant",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"published_tracks",kind:"enum",repeat:1,T:()=>["stream.video.sfu.models.TrackType",D,"TRACK_TYPE_"]},{no:4,name:"joined_at",kind:"message",T:()=>vo},{no:5,name:"track_lookup_prefix",kind:"scalar",T:9},{no:6,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",yo,"CONNECTION_QUALITY_"]},{no:7,name:"is_speaking",kind:"scalar",T:8},{no:8,name:"is_dominant_speaker",kind:"scalar",T:8},{no:9,name:"audio_level",kind:"scalar",T:2},{no:10,name:"name",kind:"scalar",T:9},{no:11,name:"image",kind:"scalar",T:9},{no:12,name:"custom",kind:"message",T:()=>Ec},{no:13,name:"roles",kind:"scalar",repeat:2,T:9}])}}const hi=new Jx;class Yx extends F{constructor(){super("stream.video.sfu.models.StreamQuality",[{no:1,name:"video_quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",Tr,"VIDEO_QUALITY_"]},{no:2,name:"user_id",kind:"scalar",T:9}])}}const Qx=new Yx;class Xx extends F{constructor(){super("stream.video.sfu.models.VideoDimension",[{no:1,name:"width",kind:"scalar",T:13},{no:2,name:"height",kind:"scalar",T:13}])}}const Eh=new Xx;class Zx extends F{constructor(){super("stream.video.sfu.models.VideoLayer",[{no:1,name:"rid",kind:"scalar",T:9},{no:2,name:"video_dimension",kind:"message",T:()=>Eh},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"fps",kind:"scalar",T:13},{no:6,name:"quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",Tr,"VIDEO_QUALITY_"]}])}}const nb=new Zx;class eR extends F{constructor(){super("stream.video.sfu.models.PublishOptions",[{no:1,name:"codecs",kind:"message",repeat:1,T:()=>Th}])}}const rb=new eR;class tR extends F{constructor(){super("stream.video.sfu.models.PublishOption",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",D,"TRACK_TYPE_"]},{no:2,name:"codec",kind:"message",T:()=>Fo},{no:3,name:"bitrate",kind:"scalar",T:5},{no:4,name:"fps",kind:"scalar",T:5},{no:5,name:"max_spatial_layers",kind:"scalar",T:5},{no:6,name:"max_temporal_layers",kind:"scalar",T:5}])}}const Th=new tR;class nR extends F{constructor(){super("stream.video.sfu.models.Codec",[{no:11,name:"payload_type",kind:"scalar",T:13},{no:10,name:"name",kind:"scalar",T:9},{no:14,name:"clock_rate",kind:"scalar",T:13},{no:13,name:"encoding_parameters",kind:"scalar",T:9},{no:12,name:"fmtp",kind:"scalar",T:9}])}}const Fo=new nR;let rR=class extends F{constructor(){super("stream.video.sfu.models.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",mt,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}};const xh=new rR;class iR extends F{constructor(){super("stream.video.sfu.models.TrackInfo",[{no:1,name:"track_id",kind:"scalar",T:9},{no:2,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",D,"TRACK_TYPE_"]},{no:5,name:"layers",kind:"message",repeat:1,T:()=>nb},{no:6,name:"mid",kind:"scalar",T:9},{no:7,name:"dtx",kind:"scalar",T:8},{no:8,name:"stereo",kind:"scalar",T:8},{no:9,name:"red",kind:"scalar",T:8},{no:10,name:"muted",kind:"scalar",T:8}])}}const Sl=new iR;let sR=class extends F{constructor(){super("stream.video.sfu.models.Error",[{no:1,name:"code",kind:"enum",T:()=>["stream.video.sfu.models.ErrorCode",ns,"ERROR_CODE_"]},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"should_retry",kind:"scalar",T:8}])}};const kn=new sR;class oR extends F{constructor(){super("stream.video.sfu.models.ClientDetails",[{no:1,name:"sdk",kind:"message",T:()=>sb},{no:2,name:"os",kind:"message",T:()=>ob},{no:3,name:"browser",kind:"message",T:()=>ab},{no:4,name:"device",kind:"message",T:()=>cb}])}}const ib=new oR;class aR extends F{constructor(){super("stream.video.sfu.models.Sdk",[{no:1,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.SdkType",Or,"SDK_TYPE_"]},{no:2,name:"major",kind:"scalar",T:9},{no:3,name:"minor",kind:"scalar",T:9},{no:4,name:"patch",kind:"scalar",T:9}])}}const sb=new aR;class cR extends F{constructor(){super("stream.video.sfu.models.OS",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"architecture",kind:"scalar",T:9}])}}const ob=new cR;class lR extends F{constructor(){super("stream.video.sfu.models.Browser",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}}const ab=new lR;class uR extends F{constructor(){super("stream.video.sfu.models.Device",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}}const cb=new uR;class dR extends F{constructor(){super("stream.video.sfu.models.Call",[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:9},{no:3,name:"created_by_user_id",kind:"scalar",T:9},{no:4,name:"host_user_id",kind:"scalar",T:9},{no:5,name:"custom",kind:"message",T:()=>Ec},{no:6,name:"created_at",kind:"message",T:()=>vo},{no:7,name:"updated_at",kind:"message",T:()=>vo}])}}const fR=new dR;class hR extends F{constructor(){super("stream.video.sfu.models.CallGrants",[{no:1,name:"can_publish_audio",kind:"scalar",T:8},{no:2,name:"can_publish_video",kind:"scalar",T:8},{no:3,name:"can_screenshare",kind:"scalar",T:8}])}}const lb=new hR;class pR extends F{constructor(){super("stream.video.sfu.models.InputDevices",[{no:1,name:"available_devices",kind:"scalar",repeat:2,T:9},{no:2,name:"current_device",kind:"scalar",T:9},{no:3,name:"is_permitted",kind:"scalar",T:8}])}}const Gd=new pR;class mR extends F{constructor(){super("stream.video.sfu.models.AndroidState",[{no:1,name:"thermal_state",kind:"enum",T:()=>["stream.video.sfu.models.AndroidThermalState",xc,"ANDROID_THERMAL_STATE_"]},{no:2,name:"is_power_saver_mode",kind:"scalar",T:8}])}}const ub=new mR;class gR extends F{constructor(){super("stream.video.sfu.models.AppleState",[{no:1,name:"thermal_state",kind:"enum",T:()=>["stream.video.sfu.models.AppleThermalState",Rc,"APPLE_THERMAL_STATE_"]},{no:2,name:"is_low_power_mode_enabled",kind:"scalar",T:8}])}}const db=new gR;var Jd=Object.freeze({__proto__:null,AndroidState:ub,get AndroidThermalState(){return xc},AppleState:db,get AppleThermalState(){return Rc},Browser:ab,Call:fR,get CallEndedReason(){return bo},CallGrants:lb,CallState:tb,ClientDetails:ib,Codec:Fo,get ConnectionQuality(){return yo},Device:cb,Error:kn,get ErrorCode(){return ns},get GoAwayReason(){return Tc},ICETrickle:xh,InputDevices:Gd,OS:ob,Participant:hi,ParticipantCount:Ch,get PeerType(){return mt},Pin:kh,PublishOption:Th,PublishOptions:rb,Sdk:sb,get SdkType(){return Or},StreamQuality:Qx,TrackInfo:Sl,get TrackType(){return D},get TrackUnpublishReason(){return So},VideoDimension:Eh,VideoLayer:nb,get VideoQuality(){return Tr},get WebsocketReconnectStrategy(){return le}});class vR extends F{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}}const yR=new vR;class SR extends F{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>kn}])}}const bR=new SR;class wR extends F{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}}const CR=new wR;class kR extends F{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>kn}])}}const ER=new kR;class TR extends F{constructor(){super("stream.video.sfu.signal.Reconnection",[{no:1,name:"time_seconds",kind:"scalar",T:2},{no:2,name:"strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",le,"WEBSOCKET_RECONNECT_STRATEGY_"]}])}}const xR=new TR;class RR extends F{constructor(){super("stream.video.sfu.signal.Telemetry",[{no:1,name:"connection_time_seconds",kind:"scalar",oneof:"data",T:2},{no:2,name:"reconnection",kind:"message",oneof:"data",T:()=>xR}])}}const _R=new RR;class IR extends F{constructor(){super("stream.video.sfu.signal.SendStatsRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"subscriber_stats",kind:"scalar",T:9},{no:3,name:"publisher_stats",kind:"scalar",T:9},{no:4,name:"webrtc_version",kind:"scalar",T:9},{no:5,name:"sdk",kind:"scalar",T:9},{no:6,name:"sdk_version",kind:"scalar",T:9},{no:7,name:"audio_devices",kind:"message",T:()=>Gd},{no:8,name:"video_devices",kind:"message",T:()=>Gd},{no:9,name:"android",kind:"message",oneof:"deviceState",T:()=>ub},{no:10,name:"apple",kind:"message",oneof:"deviceState",T:()=>db},{no:11,name:"telemetry",kind:"message",T:()=>_R}])}}const PR=new IR;class OR extends F{constructor(){super("stream.video.sfu.signal.SendStatsResponse",[{no:1,name:"error",kind:"message",T:()=>kn}])}}const NR=new OR;class AR extends F{constructor(){super("stream.video.sfu.signal.ICERestartRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",mt,"PEER_TYPE_"]}])}}const DR=new AR;class LR extends F{constructor(){super("stream.video.sfu.signal.ICERestartResponse",[{no:1,name:"error",kind:"message",T:()=>kn}])}}const jR=new LR;class MR extends F{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:3,name:"mute_states",kind:"message",repeat:1,T:()=>BR}])}}const FR=new MR;class UR extends F{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesResponse",[{no:4,name:"error",kind:"message",T:()=>kn}])}}const $R=new UR;class VR extends F{constructor(){super("stream.video.sfu.signal.TrackMuteState",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",D,"TRACK_TYPE_"]},{no:2,name:"muted",kind:"scalar",T:8}])}}const BR=new VR;class zR extends F{constructor(){super("stream.video.sfu.signal.AudioMuteChanged",[{no:1,name:"muted",kind:"scalar",T:8}])}}new zR;class HR extends F{constructor(){super("stream.video.sfu.signal.VideoMuteChanged",[{no:2,name:"muted",kind:"scalar",T:8}])}}new HR;class WR extends F{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsRequest",[{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:1,T:()=>Rh}])}}const qR=new WR;class KR extends F{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsResponse",[{no:4,name:"error",kind:"message",T:()=>kn}])}}const GR=new KR;class JR extends F{constructor(){super("stream.video.sfu.signal.TrackSubscriptionDetails",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",D,"TRACK_TYPE_"]},{no:4,name:"dimension",kind:"message",T:()=>Eh}])}}const Rh=new JR;class YR extends F{constructor(){super("stream.video.sfu.signal.SendAnswerRequest",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",mt,"PEER_TYPE_"]},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}}const QR=new YR;class XR extends F{constructor(){super("stream.video.sfu.signal.SendAnswerResponse",[{no:4,name:"error",kind:"message",T:()=>kn}])}}const ZR=new XR;class e_ extends F{constructor(){super("stream.video.sfu.signal.ICETrickleResponse",[{no:4,name:"error",kind:"message",T:()=>kn}])}}const t_=new e_;class n_ extends F{constructor(){super("stream.video.sfu.signal.SetPublisherRequest",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:1,T:()=>Sl}])}}const r_=new n_;class i_ extends F{constructor(){super("stream.video.sfu.signal.SetPublisherResponse",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"ice_restart",kind:"scalar",T:8},{no:4,name:"error",kind:"message",T:()=>kn}])}}const s_=new i_,vu=new JE("stream.video.sfu.signal.SignalServer",[{name:"SetPublisher",options:{},I:r_,O:s_},{name:"SendAnswer",options:{},I:QR,O:ZR},{name:"IceTrickle",options:{},I:xh,O:t_},{name:"UpdateSubscriptions",options:{},I:qR,O:GR},{name:"UpdateMuteStates",options:{},I:FR,O:$R},{name:"IceRestart",options:{},I:DR,O:jR},{name:"SendStats",options:{},I:PR,O:NR},{name:"StartNoiseCancellation",options:{},I:yR,O:bR},{name:"StopNoiseCancellation",options:{},I:CR,O:ER}]);class o_ extends F{constructor(){super("stream.video.sfu.event.SfuEvent",[{no:1,name:"subscriber_offer",kind:"message",oneof:"eventPayload",T:()=>W_},{no:2,name:"publisher_answer",kind:"message",oneof:"eventPayload",T:()=>K_},{no:3,name:"connection_quality_changed",kind:"message",oneof:"eventPayload",T:()=>J_},{no:4,name:"audio_level_changed",kind:"message",oneof:"eventPayload",T:()=>rI},{no:5,name:"ice_trickle",kind:"message",oneof:"eventPayload",T:()=>xh},{no:6,name:"change_publish_quality",kind:"message",oneof:"eventPayload",T:()=>dI},{no:10,name:"participant_joined",kind:"message",oneof:"eventPayload",T:()=>U_},{no:11,name:"participant_left",kind:"message",oneof:"eventPayload",T:()=>V_},{no:12,name:"dominant_speaker_changed",kind:"message",oneof:"eventPayload",T:()=>Z_},{no:13,name:"join_response",kind:"message",oneof:"eventPayload",T:()=>M_},{no:14,name:"health_check_response",kind:"message",oneof:"eventPayload",T:()=>x_},{no:16,name:"track_published",kind:"message",oneof:"eventPayload",T:()=>__},{no:17,name:"track_unpublished",kind:"message",oneof:"eventPayload",T:()=>P_},{no:18,name:"error",kind:"message",oneof:"eventPayload",T:()=>g_},{no:19,name:"call_grants_updated",kind:"message",oneof:"eventPayload",T:()=>hI},{no:20,name:"go_away",kind:"message",oneof:"eventPayload",T:()=>mI},{no:21,name:"ice_restart",kind:"message",oneof:"eventPayload",T:()=>S_},{no:22,name:"pins_updated",kind:"message",oneof:"eventPayload",T:()=>p_},{no:23,name:"call_ended",kind:"message",oneof:"eventPayload",T:()=>vI},{no:24,name:"participant_updated",kind:"message",oneof:"eventPayload",T:()=>z_},{no:25,name:"participant_migration_complete",kind:"message",oneof:"eventPayload",T:()=>f_},{no:26,name:"codec_negotiation_complete",kind:"message",oneof:"eventPayload",T:()=>u_},{no:27,name:"change_publish_options",kind:"message",oneof:"eventPayload",T:()=>c_}])}}const tg=new o_;class a_ extends F{constructor(){super("stream.video.sfu.event.ChangePublishOptions",[{no:1,name:"publish_option",kind:"message",T:()=>Th}])}}const c_=new a_;class l_ extends F{constructor(){super("stream.video.sfu.event.CodecNegotiationComplete",[])}}const u_=new l_;class d_ extends F{constructor(){super("stream.video.sfu.event.ParticipantMigrationComplete",[])}}const f_=new d_;class h_ extends F{constructor(){super("stream.video.sfu.event.PinsChanged",[{no:1,name:"pins",kind:"message",repeat:1,T:()=>kh}])}}const p_=new h_;class m_ extends F{constructor(){super("stream.video.sfu.event.Error",[{no:4,name:"error",kind:"message",T:()=>kn},{no:5,name:"reconnect_strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",le,"WEBSOCKET_RECONNECT_STRATEGY_"]}])}}const g_=new m_;class v_ extends F{constructor(){super("stream.video.sfu.event.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",mt,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9}])}}new v_;class y_ extends F{constructor(){super("stream.video.sfu.event.ICERestart",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",mt,"PEER_TYPE_"]}])}}const S_=new y_;class b_ extends F{constructor(){super("stream.video.sfu.event.SfuRequest",[{no:1,name:"join_request",kind:"message",oneof:"requestPayload",T:()=>fb},{no:2,name:"health_check_request",kind:"message",oneof:"requestPayload",T:()=>E_},{no:3,name:"leave_call_request",kind:"message",oneof:"requestPayload",T:()=>C_}])}}const Rs=new b_;class w_ extends F{constructor(){super("stream.video.sfu.event.LeaveCallRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9}])}}const C_=new w_;class k_ extends F{constructor(){super("stream.video.sfu.event.HealthCheckRequest",[])}}const E_=new k_;class T_ extends F{constructor(){super("stream.video.sfu.event.HealthCheckResponse",[{no:1,name:"participant_count",kind:"message",T:()=>Ch}])}}const x_=new T_;class R_ extends F{constructor(){super("stream.video.sfu.event.TrackPublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",D,"TRACK_TYPE_"]},{no:4,name:"participant",kind:"message",T:()=>hi}])}}const __=new R_;class I_ extends F{constructor(){super("stream.video.sfu.event.TrackUnpublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",D,"TRACK_TYPE_"]},{no:4,name:"cause",kind:"enum",T:()=>["stream.video.sfu.models.TrackUnpublishReason",So,"TRACK_UNPUBLISH_REASON_"]},{no:5,name:"participant",kind:"message",T:()=>hi}])}}const P_=new I_;class O_ extends F{constructor(){super("stream.video.sfu.event.JoinRequest",[{no:1,name:"token",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"subscriber_sdp",kind:"scalar",T:9},{no:8,name:"publisher_sdp",kind:"scalar",T:9},{no:4,name:"client_details",kind:"message",T:()=>ib},{no:5,name:"migration",kind:"message",T:()=>L_},{no:6,name:"fast_reconnect",kind:"scalar",T:8},{no:7,name:"reconnect_details",kind:"message",T:()=>A_}])}}const fb=new O_;class N_ extends F{constructor(){super("stream.video.sfu.event.ReconnectDetails",[{no:1,name:"strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",le,"WEBSOCKET_RECONNECT_STRATEGY_"]},{no:3,name:"announced_tracks",kind:"message",repeat:1,T:()=>Sl},{no:4,name:"subscriptions",kind:"message",repeat:1,T:()=>Rh},{no:5,name:"reconnect_attempt",kind:"scalar",T:13},{no:6,name:"from_sfu_id",kind:"scalar",T:9},{no:7,name:"previous_session_id",kind:"scalar",T:9}])}}const A_=new N_;class D_ extends F{constructor(){super("stream.video.sfu.event.Migration",[{no:1,name:"from_sfu_id",kind:"scalar",T:9},{no:2,name:"announced_tracks",kind:"message",repeat:1,T:()=>Sl},{no:3,name:"subscriptions",kind:"message",repeat:1,T:()=>Rh}])}}const L_=new D_;class j_ extends F{constructor(){super("stream.video.sfu.event.JoinResponse",[{no:1,name:"call_state",kind:"message",T:()=>tb},{no:2,name:"reconnected",kind:"scalar",T:8},{no:3,name:"fast_reconnect_deadline_seconds",kind:"scalar",T:5},{no:4,name:"publish_options",kind:"message",T:()=>rb}])}}const M_=new j_;class F_ extends F{constructor(){super("stream.video.sfu.event.ParticipantJoined",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>hi}])}}const U_=new F_;class $_ extends F{constructor(){super("stream.video.sfu.event.ParticipantLeft",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>hi}])}}const V_=new $_;class B_ extends F{constructor(){super("stream.video.sfu.event.ParticipantUpdated",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>hi}])}}const z_=new B_;class H_ extends F{constructor(){super("stream.video.sfu.event.SubscriberOffer",[{no:1,name:"ice_restart",kind:"scalar",T:8},{no:2,name:"sdp",kind:"scalar",T:9}])}}const W_=new H_;class q_ extends F{constructor(){super("stream.video.sfu.event.PublisherAnswer",[{no:1,name:"sdp",kind:"scalar",T:9}])}}const K_=new q_;class G_ extends F{constructor(){super("stream.video.sfu.event.ConnectionQualityChanged",[{no:1,name:"connection_quality_updates",kind:"message",repeat:1,T:()=>Q_}])}}const J_=new G_;class Y_ extends F{constructor(){super("stream.video.sfu.event.ConnectionQualityInfo",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",yo,"CONNECTION_QUALITY_"]}])}}const Q_=new Y_;class X_ extends F{constructor(){super("stream.video.sfu.event.DominantSpeakerChanged",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}}const Z_=new X_;class eI extends F{constructor(){super("stream.video.sfu.event.AudioLevel",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"level",kind:"scalar",T:2},{no:4,name:"is_speaking",kind:"scalar",T:8}])}}const tI=new eI;class nI extends F{constructor(){super("stream.video.sfu.event.AudioLevelChanged",[{no:1,name:"audio_levels",kind:"message",repeat:1,T:()=>tI}])}}const rI=new nI;class iI extends F{constructor(){super("stream.video.sfu.event.AudioSender",[{no:2,name:"codec",kind:"message",T:()=>Fo}])}}const sI=new iI;class oI extends F{constructor(){super("stream.video.sfu.event.VideoLayerSetting",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"active",kind:"scalar",T:8},{no:3,name:"max_bitrate",kind:"scalar",T:5},{no:4,name:"scale_resolution_down_by",kind:"scalar",T:2},{no:6,name:"codec",kind:"message",T:()=>Fo},{no:7,name:"max_framerate",kind:"scalar",T:13},{no:8,name:"scalability_mode",kind:"scalar",T:9}])}}const aI=new oI;class cI extends F{constructor(){super("stream.video.sfu.event.VideoSender",[{no:2,name:"codec",kind:"message",T:()=>Fo},{no:3,name:"layers",kind:"message",repeat:1,T:()=>aI}])}}const lI=new cI;class uI extends F{constructor(){super("stream.video.sfu.event.ChangePublishQuality",[{no:1,name:"audio_senders",kind:"message",repeat:1,T:()=>sI},{no:2,name:"video_senders",kind:"message",repeat:1,T:()=>lI}])}}const dI=new uI;class fI extends F{constructor(){super("stream.video.sfu.event.CallGrantsUpdated",[{no:1,name:"current_grants",kind:"message",T:()=>lb},{no:2,name:"message",kind:"scalar",T:9}])}}const hI=new fI;class pI extends F{constructor(){super("stream.video.sfu.event.GoAway",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.GoAwayReason",Tc,"GO_AWAY_REASON_"]}])}}const mI=new pI;class gI extends F{constructor(){super("stream.video.sfu.event.CallEnded",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.CallEndedReason",bo,"CALL_ENDED_REASON_"]}])}}const vI=new gI;var et;(function(e){e.UNKNOWN="UNKNOWN",e.VISIBLE="VISIBLE",e.INVISIBLE="INVISIBLE"})(et||(et={}));var _n;(function(e){e[e.IMMEDIATE=20]="IMMEDIATE",e[e.FAST=100]="FAST",e[e.MEDIUM=600]="MEDIUM",e[e.SLOW=1200]="SLOW"})(_n||(_n={}));class yI{constructor(t){this._transport=t,this.typeName=vu.typeName,this.methods=vu.methods,this.options=vu.options}setPublisher(t,n){const r=this.methods[0],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}sendAnswer(t,n){const r=this.methods[1],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}iceTrickle(t,n){const r=this.methods[2],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}updateSubscriptions(t,n){const r=this.methods[3],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}updateMuteStates(t,n){const r=this.methods[4],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}iceRestart(t,n){const r=this.methods[5],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}sendStats(t,n){const r=this.methods[6],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}startNoiseCancellation(t,n){const r=this.methods[7],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}stopNoiseCancellation(t,n){const r=this.methods[8],i=this._transport.mergeOptions(n);return Bn("unary",this._transport,r,i,t)}}const SI={baseUrl:"",sendJson:!0,timeout:5*1e3,jsonOptions:{ignoreUnknownFields:!0}},bI=e=>({interceptUnary(t,n,r,i){return i.meta={...i.meta,...e},t(n,r,i)}}),wI=(e,t)=>({interceptUnary:(n,r,i,s)=>(e(t,`Calling SFU RPC method ${r.name}`,{input:i,options:s}),n(r,i,s))}),CI=e=>{const t=new O1({...SI,...e});return new yI(t)},zi=e=>new Promise(t=>setTimeout(t,e));function Yd(e){return e&&(Object.prototype.toString.call(e)==="[object Function]"||typeof e=="function"||e instanceof Function)}const bi={TOKEN_EXPIRED:40,WS_CLOSED_SUCCESS:1e3,WS_CLOSED_ABRUPTLY:1006,WS_POLICY_VIOLATION:1008};function _h(e){const t=Math.min(500+e*2e3,5e3),n=Math.min(Math.max(250,(e-1)*2e3),5e3);return Math.floor(Math.random()*(t-n)+n)}function Qd(){return hb()}function _s(e){let t="";for(let n=0;n<e.length;n++)t+=e[n].toString(16).padStart(2,"0");return t}function hb(){const e=TI(16);return e[6]=e[6]&15|64,e[8]=e[8]&191|128,_s(e.subarray(0,4))+"-"+_s(e.subarray(4,6))+"-"+_s(e.subarray(6,8))+"-"+_s(e.subarray(8,10))+"-"+_s(e.subarray(10,16))}function kI(e){const t=Math.pow(2,8*e.byteLength/e.length);for(let n=0;n<e.length;n++)e[n]=Math.random()*t}const EI=typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)<"u"?crypto.getRandomValues.bind(crypto):typeof msCrypto<"u"?msCrypto.getRandomValues.bind(msCrypto):kI;function TI(e){const t=new Uint8Array(e);return EI(t),t}function Xd(e){typeof window<"u"&&window.addEventListener&&(window.addEventListener("offline",e),window.addEventListener("online",e))}function pb(e){typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("offline",e),window.removeEventListener("online",e))}function xI(e){return!e.status||e.status<200||300<=e.status}function RI(e){return e.code!==void 0}const Je=()=>{var e;return typeof navigator>"u"?!1:((e=navigator.product)==null?void 0:e.toLowerCase())==="reactnative"},ng=Object.freeze({trace:0,debug:1,info:2,warn:3,error:4});let mb,Ih="info";const gb=(e,t,...n)=>{let r;switch(e){case"error":if(Je()){t=`ERROR: ${t}`,r=console.info;break}r=console.error;break;case"warn":if(Je()){t=`WARN: ${t}`,r=console.info;break}r=console.warn;break;case"info":r=console.info;break;case"trace":r=console.trace;break;default:r=console.log;break}r(t,...n)},_I=(e,t)=>{mb=e,t&&II(t)},II=e=>{Ih=e},PI=()=>Ih,we=e=>{const t=mb||gb,n=(e||[]).filter(Boolean).join(":");return(i,s,...o)=>{ng[i]>=ng[Ih]&&t(i,`[${n}]: ${s}`,...o)}},zn=async(e,t)=>{var i;let n=0,r;do{n>0&&await zi(_h(n));try{r=await e()}catch(s){const o=s instanceof Nt&&s.code===Pe[Pe.cancelled],a=(t==null?void 0:t.aborted)??!1;if(o||a)throw s;we(["sfu-client","rpc"])("debug",`rpc failed (${n})`,s),n++}}while(!r||(i=r.response.error)!=null&&i.shouldRetry);return r},OI="1.13.1",[NI,AI,DI]=OI.split(".");let vb={type:Or.PLAIN_JAVASCRIPT,major:NI,minor:AI,patch:DI},LI,jI,MI={oneofKind:void 0};const FI=e=>{vb=e},Zd=()=>vb,UI=()=>LI,$I=()=>jI,VI=()=>MI,rg=()=>{if(Je())return{sdk:Zd(),os:UI(),device:$I()};const e=new N1.UAParser(navigator.userAgent),{browser:t,os:n,device:r,cpu:i}=e.getResult();return{sdk:Zd(),browser:{name:t.name||navigator.userAgent,version:t.version||""},os:{name:n.name||"",version:n.version||"",architecture:i.architecture||""},device:{name:[r.vendor,r.model,r.type].filter(Boolean).join(" "),version:""}}},bl=()=>typeof navigator>"u"?!1:/^((?!chrome|android).)*safari/i.test(navigator.userAgent||""),fs=()=>{var e;return typeof navigator>"u"?!1:(e=navigator.userAgent)==null?void 0:e.includes("Firefox")},BI=()=>{var e;return typeof navigator>"u"?!1:(e=navigator.userAgent)==null?void 0:e.includes("Chrome")};var ig=Object.freeze({__proto__:null,isChrome:BI,isFirefox:fs,isSafari:bl});const sg=(e,t,n,r)=>{const i=r==="receiver"?RTCRtpReceiver:RTCRtpSender;if(!("getCapabilities"in i))return;const s=i.getCapabilities(e);if(!s)return;const o=[],a=[],l=[],c=`${e}/${t.toLowerCase()}`,d=n&&`${e}/${n.toLowerCase()}`;for(const f of s.codecs){const u=f.mimeType.toLowerCase();if(u===d)continue;if(!(u===c)){l.push(f);continue}if(u!=="video/h264"){o.push(f);continue}const p=f.sdpFmtpLine;if(!p||!p.includes("profile-level-id=42")){a.push(f);continue}p.includes("packetization-mode=1")?o.unshift(f):o.push(f)}return[...o,...a,...l]},zI=async e=>{const t=new RTCPeerConnection;t.addTransceiver("video",{direction:e}),t.addTransceiver("audio",{direction:e});const r=(await t.createOffer()).sdp??"";return t.getTransceivers().forEach(i=>{var s;(s=i.stop)==null||s.call(i)}),t.close(),r},yu=e=>Je()?og(e,"h264"):bl()?"h264":fs()?"vp8":og(e,"vp8"),og=(e,t)=>{if(!e||!("getCapabilities"in RTCRtpSender))return t;const n=RTCRtpSender.getCapabilities("video");if(!n||_c(e)&&(bl()||fs()))return t;const{codecs:r}=n,i=`video/${e}`.toLowerCase();return r.some(s=>s.mimeType.toLowerCase()===i)?e:t},_c=e=>e?(e=e.toLowerCase(),e==="vp9"||e==="av1"||e==="video/vp9"||e==="video/av1"):!1,HI={subscriberOffer:void 0,publisherAnswer:void 0,connectionQualityChanged:void 0,audioLevelChanged:void 0,iceTrickle:void 0,changePublishQuality:void 0,participantJoined:void 0,participantLeft:void 0,dominantSpeakerChanged:void 0,joinResponse:void 0,healthCheckResponse:void 0,trackPublished:void 0,trackUnpublished:void 0,error:void 0,callGrantsUpdated:void 0,goAway:void 0,iceRestart:void 0,pinsUpdated:void 0,callEnded:void 0,participantUpdated:void 0,participantMigrationComplete:void 0,codecNegotiationComplete:void 0,changePublishOptions:void 0},ag=e=>Object.prototype.hasOwnProperty.call(HI,e);class WI{constructor(){this.logger=we(["Dispatcher"]),this.subscribers={},this.dispatch=(t,n="0")=>{const r=t.eventPayload.oneofKind;if(!r)return;const i=t.eventPayload[r];this.logger("debug",`Dispatching ${r}, tag=${n}`,i);const s=this.subscribers[r];if(s)for(const o of s)try{o(i)}catch(a){this.logger("warn","Listener failed with error",a)}},this.on=(t,n)=>{var r;return((r=this.subscribers)[t]??(r[t]=[])).push(n),()=>{this.off(t,n)}},this.off=(t,n)=>{this.subscribers[t]=(this.subscribers[t]||[]).filter(r=>r!==n)},this.offAll=t=>{t?this.subscribers[t]=[]:this.subscribers={}}}}class qI{constructor(){this.subscriberCandidates=new Wd,this.publisherCandidates=new Wd,this.push=t=>{t.peerType===mt.SUBSCRIBER?this.subscriberCandidates.next(t):t.peerType===mt.PUBLISHER_UNSPECIFIED?this.publisherCandidates.next(t):we(["sfu-client"])("warn","ICETrickle, Unknown peer type",t)}}}function yb(e){if(e.usernameFragment)return JSON.stringify(e.toJSON());{const t=e.candidate.split(" "),n=t.findIndex(i=>i==="ufrag")+1,r=t[n];return JSON.stringify({...e,usernameFragment:r})}}const KI={h264:{2160:5e6,1440:3e6,1080:2e6,720:125e4,540:75e4,360:4e5,default:125e4},vp8:{2160:5e6,1440:275e4,1080:2e6,720:125e4,540:6e5,360:35e4,default:125e4},vp9:{2160:3e6,1440:2e6,1080:15e5,720:125e4,540:5e5,360:275e3,default:125e4},av1:{2160:2e6,1440:155e4,1080:1e6,720:6e5,540:35e4,360:2e5,default:6e5}},GI=(e,t)=>{const n=KI[e];if(!n)throw new Error(`Unknown codec: ${e}`);let r=n[t];if(!r){const s=Object.keys(n).map(Number).reduce((o,a)=>Math.abs(a-t)<Math.abs(o-t)?a:o);r=n[s]}return r??n.default},Sb=125e4,JI={bitrate:Sb,width:1280,height:720},YI={q:3e5,h:75e4,f:Sb},QI=e=>e==null?void 0:e.filter(t=>t.rid==="f").map(t=>({...t,rid:"q"})),XI=e=>e==="q"?Tr.LOW_UNSPECIFIED:e==="h"?Tr.MID:Tr.HIGH,ZI=(e,t=JI,n,r)=>{const i=[],s=e.getSettings(),{width:o=0,height:a=0}=s,{scalabilityMode:l,bitrateDownscaleFactor:c=2,maxSimulcastLayers:d=3}=r||{},f=eP(t,o,a,n,r);let u=1,h=1;const m=_c(n),p=m?3:Math.min(3,d);for(const v of["f","h","q"].slice(0,p)){const g={active:!0,rid:v,width:Math.round(o/u),height:Math.round(a/u),maxBitrate:Math.round(f/h)||YI[v],maxFramerate:30};m?g.scalabilityMode=l||"L3T2_KEY":g.scaleResolutionDownBy=u,u*=2,h*=c,i.unshift(g)}return tP(s,i)},eP=(e,t,n,r,i)=>{const{width:s,height:o,bitrate:a}=e,{preferredBitrate:l}=i||{},c=t>n?n:t,d=l||(r?GI(r,c):a);if(t<s||n<o){const f=t*n,u=s*o,h=f/u;return Math.round(d*h)}return d},tP=(e,t)=>{let n;const r=Math.max(e.width||0,e.height||0);r<=320?n=t.filter(s=>s.rid==="f"):r<=640?n=t.filter(s=>s.rid!=="h"):n=t;const i=["q","h","f"];return n.map((s,o)=>({...s,rid:i[o]}))},nP=(e,t,n=3e6)=>{const{screenShareSettings:r}=t||{},i=e.getSettings();return[{active:!0,rid:"q",width:i.width||0,height:i.height||0,scaleResolutionDownBy:1,maxBitrate:(r==null?void 0:r.maxBitrate)??n,maxFramerate:(r==null?void 0:r.maxFramerate)??30}]},Ic=(e,t)=>{we(["helpers"])("warn",t,e)},Ph=e=>{switch(e){case D.SCREEN_SHARE:return"screenShareStream";case D.SCREEN_SHARE_AUDIO:return"screenShareAudioStream";case D.VIDEO:return"videoStream";case D.AUDIO:return"audioStream";case D.UNSPECIFIED:throw new Error("Track type is unspecified");default:Ic(e,"Unknown track type")}},rP=e=>{switch(e){case"audio":return D.AUDIO;case"video":return D.VIDEO;case"screenshare":return D.SCREEN_SHARE;case"screenshare_audio":return D.SCREEN_SHARE_AUDIO;default:Ic(e,"Unknown mute type")}},iP=e=>{switch(e){case"TRACK_TYPE_AUDIO":return D.AUDIO;case"TRACK_TYPE_VIDEO":return D.VIDEO;case"TRACK_TYPE_SCREEN_SHARE":return D.SCREEN_SHARE;case"TRACK_TYPE_SCREEN_SHARE_AUDIO":return D.SCREEN_SHARE_AUDIO;default:return}},xt=bb(oP),Su=bb(aP),wo=new Map;async function sP(e){var t;await((t=wo.get(e))==null?void 0:t.promise)}function bb(e){return function(n,r){const{cb:i,onContinued:s}=e(n,r),o=wo.get(n);o==null||o.onContinued();const a=o?o.promise.then(i,i):i();return wo.set(n,{promise:a,onContinued:s}),a}}function oP(e,t){let n=!1;return{cb:()=>t().finally(()=>{n||wo.delete(e)}),onContinued:()=>n=!0}}function aP(e,t){const n=new AbortController;return{cb:()=>n.signal.aborted?Promise.resolve("canceled"):t(n.signal).finally(()=>{n.signal.aborted||wo.delete(e)}),onContinued:()=>n.abort()}}const cP=e=>typeof e=="function",an=e=>{let t,n;if(ii([e]).subscribe({next:([r])=>{t=r},error:r=>{n=r}}).unsubscribe(),n)throw n;return t},Nr=(e,t)=>{const n=cP(t)?t(an(e)):t;return e.next(n),n},Wt=(e,t,n=r=>we(["RxUtils"])("warn","An observable emitted an error",r))=>{const r=e.subscribe({next:t,error:n});return()=>{r.unsubscribe()}},wb=(e,t)=>{const n=Symbol();return Wt(e,r=>{xt(n,()=>t(r))})};var lP=Object.freeze({__proto__:null,createSafeAsyncSubscription:wb,createSubscription:Wt,getCurrentValue:an,setCurrentValue:Nr}),V;(function(e){e.UNKNOWN="unknown",e.IDLE="idle",e.RINGING="ringing",e.JOINING="joining",e.JOINED="joined",e.LEFT="left",e.RECONNECTING="reconnecting",e.MIGRATING="migrating",e.RECONNECTING_FAILED="reconnecting-failed",e.OFFLINE="offline"})(V||(V={}));class uP{constructor(){this.connectedUserSubject=new ce(void 0),this.callsSubject=new ce([]),this.setConnectedUser=t=>Nr(this.connectedUserSubject,t),this.setCalls=t=>Nr(this.callsSubject,t),this.registerCall=t=>{this.calls.find(n=>n.cid===t.cid)||this.setCalls(n=>[...n,t])},this.unregisterCall=t=>this.setCalls(n=>n.filter(r=>r!==t)),this.findCall=(t,n)=>this.calls.find(r=>r.type===t&&r.id===n),this.connectedUserSubject.subscribe(async t=>{if(!t){const n=we(["client-state"]);for(const r of this.calls)r.state.callingState!==V.LEFT&&(n("info",`User disconnected, leaving call: ${r.cid}`),await r.leave({reason:"client.disconnectUser() called"}).catch(i=>{n("error",`Error leaving call: ${r.cid}`,i)}))}})}get connectedUser(){return an(this.connectedUserSubject)}get calls(){return an(this.callsSubject)}}class dP{constructor(t){this.getCurrentValue=an,this.connectedUser$=t.connectedUserSubject.asObservable(),this.calls$=t.callsSubject.asObservable()}get connectedUser(){return an(this.connectedUser$)}get calls(){return an(this.calls$)}}const si=(...e)=>(t,n)=>{for(const r of e){const i=r(t,n);if(i!==0)return i}return 0},fP=e=>t=>(n,r)=>e(n,r)?t(n,r):0,On=e=>e.publishedTracks.includes(D.VIDEO),mr=e=>e.publishedTracks.includes(D.AUDIO),yn=e=>e.publishedTracks.includes(D.SCREEN_SHARE),wl=e=>e.publishedTracks.includes(D.SCREEN_SHARE_AUDIO),Oh=(e,t)=>e.isDominantSpeaker&&!t.isDominantSpeaker?-1:!e.isDominantSpeaker&&t.isDominantSpeaker?1:0,Nh=(e,t)=>e.isSpeaking&&!t.isSpeaking?-1:!e.isSpeaking&&t.isSpeaking?1:0,Ah=(e,t)=>yn(e)&&!yn(t)?-1:!yn(e)&&yn(t)?1:0,Dh=(e,t)=>On(e)&&!On(t)?-1:!On(e)&&On(t)?1:0,Lh=(e,t)=>mr(e)&&!mr(t)?-1:!mr(e)&&mr(t)?1:0,Cb=(e,t)=>{if(e.pin&&t.pin){if(!e.pin.isLocalPin&&t.pin.isLocalPin)return-1;if(e.pin.isLocalPin&&!t.pin.isLocalPin)return 1;if(e.pin.pinnedAt>t.pin.pinnedAt)return-1;if(e.pin.pinnedAt<t.pin.pinnedAt)return 1}return e.pin&&!t.pin?-1:!e.pin&&t.pin?1:0},jh=e=>(t,n)=>{var r,i,s,o;return((r=t.reaction)==null?void 0:r.type)===e&&((i=n.reaction)==null?void 0:i.type)!==e?-1:((s=t.reaction)==null?void 0:s.type)!==e&&((o=n.reaction)==null?void 0:o.type)===e?1:0},hP=(...e)=>(t,n)=>da(t,e)&&!da(n,e)?-1:!da(t,e)&&da(n,e)?1:0,da=(e,t)=>(e.roles||[]).some(n=>t.includes(n)),Mh=fP((e,t)=>{var n,r;return((n=e.viewportVisibilityState)==null?void 0:n.videoTrack)===et.INVISIBLE||((r=t.viewportVisibilityState)==null?void 0:r.videoTrack)===et.INVISIBLE}),Co=si(Cb,Ah,Mh(si(Oh,Nh,jh("raised-hand"),Dh,Lh))),pP=si(Cb,Ah,Oh,Mh(si(Nh,jh("raised-hand"),Dh,Lh))),cg=si(Mh(si(Oh,Nh,jh("raised-hand"),Dh,Lh)),hP("admin","host","speaker")),bu={broadcasting:!1,hls:{playlist_url:""},rtmps:[]};class kb{constructor(){this.backstageSubject=new ce(!0),this.blockedUserIdsSubject=new ce([]),this.createdAtSubject=new ce(new Date),this.endedAtSubject=new ce(void 0),this.startsAtSubject=new ce(void 0),this.updatedAtSubject=new ce(new Date),this.createdBySubject=new ce(void 0),this.customSubject=new ce({}),this.egressSubject=new ce(void 0),this.ingressSubject=new ce(void 0),this.recordingSubject=new ce(!1),this.sessionSubject=new ce(void 0),this.settingsSubject=new ce(void 0),this.transcribingSubject=new ce(!1),this.endedBySubject=new ce(void 0),this.thumbnailsSubject=new ce(void 0),this.membersSubject=new ce([]),this.ownCapabilitiesSubject=new ce([]),this.callingStateSubject=new ce(V.UNKNOWN),this.startedAtSubject=new ce(void 0),this.participantCountSubject=new ce(0),this.anonymousParticipantCountSubject=new ce(0),this.participantsSubject=new ce([]),this.callStatsReportSubject=new ce(void 0),this.orphanedTracks=[],this.logger=we(["CallState"]),this.sortParticipantsBy=Co,this.setSortParticipantsBy=r=>{this.sortParticipantsBy=r,this.setCurrentValue(this.participantsSubject,i=>i)},this.getCurrentValue=an,this.setCurrentValue=Nr,this.setParticipantCount=r=>this.setCurrentValue(this.participantCountSubject,r),this.setStartedAt=r=>this.setCurrentValue(this.startedAtSubject,r),this.setAnonymousParticipantCount=r=>this.setCurrentValue(this.anonymousParticipantCountSubject,r),this.setParticipants=r=>this.setCurrentValue(this.participantsSubject,r),this.setCallingState=r=>this.setCurrentValue(this.callingStateSubject,r),this.setCallStatsReport=r=>this.setCurrentValue(this.callStatsReportSubject,r),this.setMembers=r=>{this.setCurrentValue(this.membersSubject,r)},this.setOwnCapabilities=r=>this.setCurrentValue(this.ownCapabilitiesSubject,r),this.setEndedAt=r=>this.setCurrentValue(this.endedAtSubject,r),this.findParticipantBySessionId=r=>this.participants.find(i=>i.sessionId===r),this.getParticipantLookupBySessionId=()=>this.participants.reduce((r,i)=>(r[i.sessionId]=i,r),{}),this.updateParticipant=(r,i)=>{const s=this.findParticipantBySessionId(r);if(!s){this.logger("warn",`Participant with sessionId ${r} not found`);return}const o=typeof i=="function"?i(s):i,a={...s,...o};return this.setParticipants(l=>l.map(c=>c.sessionId===r?a:c))},this.updateOrAddParticipant=(r,i)=>this.setParticipants(s=>{let o=!0;const a=s.map(l=>l.sessionId===r?(o=!1,{...l,...i}):l);return o&&a.push(i),a}),this.updateParticipants=r=>Object.keys(r).length===0?this.participants:this.setParticipants(i=>i.map(s=>{const o=r[s.sessionId];return o?{...s,...o}:s})),this.updateParticipantTracks=(r,i)=>this.updateParticipants(Object.entries(i).reduce((s,[o,a])=>{a.dimension&&(a.dimension.height=Math.ceil(a.dimension.height),a.dimension.width=Math.ceil(a.dimension.width));const l=r==="videoTrack"?"videoDimension":r==="screenShareTrack"?"screenShareDimension":void 0;return l&&(s[o]={[l]:a.dimension}),s},{})),this.updateFromEvent=r=>{const i=this.eventHandlers[r.type];i&&i(r)},this.setServerSidePins=r=>{const i=r.reduce((s,o)=>(s[o.sessionId]=Date.now(),s),{});return this.setParticipants(s=>s.map(o=>{const a=i[o.sessionId];return a?{...o,pin:{isLocalPin:!1,pinnedAt:a}}:o.pin&&!o.pin.isLocalPin?{...o,pin:void 0}:o}))},this.registerOrphanedTrack=r=>{this.orphanedTracks.push(r)},this.removeOrphanedTrack=r=>{this.orphanedTracks=this.orphanedTracks.filter(i=>i.id!==r)},this.takeOrphanedTracks=r=>{const i=this.orphanedTracks.filter(s=>s.trackLookupPrefix===r);return i.length>0&&(this.orphanedTracks=this.orphanedTracks.filter(s=>s.trackLookupPrefix!==r)),i},this.updateFromCallResponse=r=>{this.setCurrentValue(this.backstageSubject,r.backstage),this.setCurrentValue(this.blockedUserIdsSubject,r.blocked_user_ids),this.setCurrentValue(this.createdAtSubject,new Date(r.created_at)),this.setCurrentValue(this.updatedAtSubject,new Date(r.updated_at)),this.setCurrentValue(this.startsAtSubject,r.starts_at?new Date(r.starts_at):void 0),this.setEndedAt(r.ended_at?new Date(r.ended_at):void 0),this.setCurrentValue(this.createdBySubject,r.created_by),this.setCurrentValue(this.customSubject,r.custom),this.setCurrentValue(this.egressSubject,r.egress),this.setCurrentValue(this.ingressSubject,r.ingress),this.setCurrentValue(this.recordingSubject,r.recording);const i=this.setCurrentValue(this.sessionSubject,r.session);this.updateParticipantCountFromSession(i),this.setCurrentValue(this.settingsSubject,r.settings),this.setCurrentValue(this.transcribingSubject,r.transcribing),this.setCurrentValue(this.thumbnailsSubject,r.thumbnails)},this.updateFromSfuCallState=(r,i,s)=>{const{participants:o,participantCount:a,startedAt:l,pins:c}=r,d=(s==null?void 0:s.announcedTracks.map(f=>f.trackType))??[];this.setParticipants(()=>{const f=this.getParticipantLookupBySessionId();return o.map(u=>{const h=f[u.sessionId],m=u.sessionId===i;return Object.assign({},h,u,{isLocalParticipant:m,publishedTracks:m?d:u.publishedTracks,viewportVisibilityState:(h==null?void 0:h.viewportVisibilityState)??{videoTrack:et.UNKNOWN,screenShareTrack:et.UNKNOWN}})})}),this.setParticipantCount((a==null?void 0:a.total)||0),this.setAnonymousParticipantCount((a==null?void 0:a.anonymous)||0),this.setStartedAt(l?vo.toDate(l):new Date),this.setServerSidePins(c)},this.updateFromMemberRemoved=r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.membersSubject,i=>i.filter(s=>r.members.indexOf(s.user_id)===-1))},this.updateFromMemberAdded=r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.membersSubject,i=>[...i,...r.members])},this.updateFromHLSBroadcastStopped=()=>{this.setCurrentValue(this.egressSubject,(r=bu)=>({...r,broadcasting:!1}))},this.updateFromHLSBroadcastingFailed=()=>{this.setCurrentValue(this.egressSubject,(r=bu)=>({...r,broadcasting:!1}))},this.updateFromHLSBroadcastStarted=r=>{this.setCurrentValue(this.egressSubject,(i=bu)=>({...i,broadcasting:!0,hls:{...i.hls,playlist_url:r.hls_playlist_url}}))},this.updateParticipantCountFromSession=r=>{if(!r||this.callingState===V.JOINED)return;const i=Object.values(r.participants_count_by_role).reduce((o,a)=>o+a,0),s=Math.max(i,r.participants.length);this.setParticipantCount(s),this.setAnonymousParticipantCount(r.anonymous_participant_count||0)},this.updateFromSessionParticipantCountUpdate=r=>{const i=this.setCurrentValue(this.sessionSubject,s=>s&&{...s,anonymous_participant_count:r.anonymous_participant_count,participants_count_by_role:r.participants_count_by_role});this.updateParticipantCountFromSession(i)},this.updateFromSessionParticipantLeft=r=>{const i=this.setCurrentValue(this.sessionSubject,s=>{if(!s)return s;const{participants:o,participants_count_by_role:a}=s,{user:l,user_session_id:c}=r.participant;return{...s,participants:o.filter(d=>d.user_session_id!==c),participants_count_by_role:{...a,[l.role]:Math.max(0,(a[l.role]||0)-1)}}});this.updateParticipantCountFromSession(i)},this.updateFromSessionParticipantJoined=r=>{const i=this.setCurrentValue(this.sessionSubject,s=>{if(!s)return s;const{participants:o,participants_count_by_role:a}=s,{user:l,user_session_id:c}=r.participant;let d=!0;const f=o.map(h=>h.user_session_id===c?(d=!1,r.participant):h);d&&f.push(r.participant);const u=d?1:0;return{...s,participants:f,participants_count_by_role:{...a,[l.role]:(a[l.role]||0)+u}}});this.updateParticipantCountFromSession(i)},this.updateMembers=r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.membersSubject,i=>i.map(s=>{const o=r.members.find(a=>a.user_id===s.user_id);return o||s}))},this.updateParticipantReaction=r=>{const{user:i,custom:s,type:o,emoji_code:a}=r.reaction;this.setParticipants(l=>l.map(c=>c.userId!==i.id?c:{...c,reaction:{type:o,emoji_code:a,custom:s}}))},this.unblockUser=r=>{this.setCurrentValue(this.blockedUserIdsSubject,i=>i&&i.filter(s=>s!==r.user.id))},this.blockUser=r=>{this.setCurrentValue(this.blockedUserIdsSubject,i=>[...i||[],r.user.id])},this.updateOwnCapabilities=r=>{var i;r.user.id===((i=this.localParticipant)==null?void 0:i.userId)&&this.setCurrentValue(this.ownCapabilitiesSubject,r.own_capabilities)},this.participants$=this.participantsSubject.asObservable().pipe(Ct(r=>r.sort(this.sortParticipantsBy)),Lt({bufferSize:1,refCount:!0})),this.localParticipant$=this.participants$.pipe(Ct(r=>r.find(i=>i.isLocalParticipant)),Lt({bufferSize:1,refCount:!0})),this.remoteParticipants$=this.participants$.pipe(Ct(r=>r.filter(i=>!i.isLocalParticipant)),Lt({bufferSize:1,refCount:!0})),this.pinnedParticipants$=this.participants$.pipe(Ct(r=>r.filter(i=>!!i.pin)),Lt({bufferSize:1,refCount:!0})),this.dominantSpeaker$=this.participants$.pipe(Ct(r=>r.find(i=>i.isDominantSpeaker)),Lt({bufferSize:1,refCount:!0})),this.hasOngoingScreenShare$=this.participants$.pipe(Ct(r=>r.some(i=>yn(i))),Et(),Lt({bufferSize:1,refCount:!0})),this.createdAt$=this.createdAtSubject.asObservable(),this.endedAt$=this.endedAtSubject.asObservable(),this.startsAt$=this.startsAtSubject.asObservable(),this.startedAt$=this.startedAtSubject.asObservable(),this.updatedAt$=this.updatedAtSubject.asObservable(),this.callStatsReport$=this.callStatsReportSubject.asObservable(),this.members$=this.membersSubject.asObservable(),this.createdBy$=this.createdBySubject.asObservable(),this.custom$=this.customSubject.asObservable(),this.egress$=this.egressSubject.asObservable(),this.ingress$=this.ingressSubject.asObservable(),this.session$=this.sessionSubject.asObservable(),this.settings$=this.settingsSubject.asObservable(),this.endedBy$=this.endedBySubject.asObservable(),this.thumbnails$=this.thumbnailsSubject.asObservable();const t=(r,i)=>{if(r.length!==i.length)return!1;for(const s of r)if(!i.includes(s))return!1;for(const s of i)if(!r.includes(s))return!1;return!0},n=(r,i)=>r.asObservable().pipe(Et(i));this.anonymousParticipantCount$=n(this.anonymousParticipantCountSubject),this.blockedUserIds$=n(this.blockedUserIdsSubject,t),this.backstage$=n(this.backstageSubject),this.callingState$=n(this.callingStateSubject),this.ownCapabilities$=n(this.ownCapabilitiesSubject,t),this.participantCount$=n(this.participantCountSubject),this.recording$=n(this.recordingSubject),this.transcribing$=n(this.transcribingSubject),this.eventHandlers={"call.closed_caption":void 0,"call.deleted":void 0,"call.permission_request":void 0,"call.recording_ready":void 0,"call.transcription_ready":void 0,"call.user_muted":void 0,"connection.error":void 0,"connection.ok":void 0,"health.check":void 0,"user.banned":void 0,"user.deactivated":void 0,"user.deleted":void 0,"user.muted":void 0,"user.presence.changed":void 0,"user.reactivated":void 0,"user.unbanned":void 0,"user.updated":void 0,custom:void 0,"call.accepted":r=>this.updateFromCallResponse(r.call),"call.blocked_user":this.blockUser,"call.created":r=>this.updateFromCallResponse(r.call),"call.ended":r=>{this.updateFromCallResponse(r.call),this.setCurrentValue(this.endedBySubject,r.user)},"call.hls_broadcasting_failed":this.updateFromHLSBroadcastingFailed,"call.hls_broadcasting_started":this.updateFromHLSBroadcastStarted,"call.hls_broadcasting_stopped":this.updateFromHLSBroadcastStopped,"call.live_started":r=>this.updateFromCallResponse(r.call),"call.member_added":this.updateFromMemberAdded,"call.member_removed":this.updateFromMemberRemoved,"call.member_updated_permission":this.updateMembers,"call.member_updated":this.updateMembers,"call.notification":r=>{this.updateFromCallResponse(r.call),this.setMembers(r.members)},"call.permissions_updated":this.updateOwnCapabilities,"call.reaction_new":this.updateParticipantReaction,"call.recording_started":()=>this.setCurrentValue(this.recordingSubject,!0),"call.recording_stopped":()=>this.setCurrentValue(this.recordingSubject,!1),"call.recording_failed":()=>this.setCurrentValue(this.recordingSubject,!1),"call.rejected":r=>this.updateFromCallResponse(r.call),"call.ring":r=>this.updateFromCallResponse(r.call),"call.missed":r=>this.updateFromCallResponse(r.call),"call.session_ended":r=>this.updateFromCallResponse(r.call),"call.session_participant_count_updated":this.updateFromSessionParticipantCountUpdate,"call.session_participant_joined":this.updateFromSessionParticipantJoined,"call.session_participant_left":this.updateFromSessionParticipantLeft,"call.session_started":r=>this.updateFromCallResponse(r.call),"call.transcription_started":()=>{this.setCurrentValue(this.transcribingSubject,!0)},"call.transcription_stopped":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.transcription_failed":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.unblocked_user":this.unblockUser,"call.updated":r=>this.updateFromCallResponse(r.call)}}get participantCount(){return this.getCurrentValue(this.participantCount$)}get startedAt(){return this.getCurrentValue(this.startedAt$)}get anonymousParticipantCount(){return this.getCurrentValue(this.anonymousParticipantCount$)}get participants(){return this.getCurrentValue(this.participants$)}get localParticipant(){return this.getCurrentValue(this.localParticipant$)}get remoteParticipants(){return this.getCurrentValue(this.remoteParticipants$)}get dominantSpeaker(){return this.getCurrentValue(this.dominantSpeaker$)}get pinnedParticipants(){return this.getCurrentValue(this.pinnedParticipants$)}get hasOngoingScreenShare(){return this.getCurrentValue(this.hasOngoingScreenShare$)}get callingState(){return this.getCurrentValue(this.callingState$)}get callStatsReport(){return this.getCurrentValue(this.callStatsReport$)}get members(){return this.getCurrentValue(this.members$)}get ownCapabilities(){return this.getCurrentValue(this.ownCapabilities$)}get backstage(){return this.getCurrentValue(this.backstage$)}get blockedUserIds(){return this.getCurrentValue(this.blockedUserIds$)}get createdAt(){return this.getCurrentValue(this.createdAt$)}get endedAt(){return this.getCurrentValue(this.endedAt$)}get startsAt(){return this.getCurrentValue(this.startsAt$)}get updatedAt(){return this.getCurrentValue(this.updatedAt$)}get createdBy(){return this.getCurrentValue(this.createdBy$)}get custom(){return this.getCurrentValue(this.custom$)}get egress(){return this.getCurrentValue(this.egress$)}get ingress(){return this.getCurrentValue(this.ingress$)}get recording(){return this.getCurrentValue(this.recording$)}get session(){return this.getCurrentValue(this.session$)}get settings(){return this.getCurrentValue(this.settings$)}get transcribing(){return this.getCurrentValue(this.transcribing$)}get endedBy(){return this.getCurrentValue(this.endedBy$)}get thumbnails(){return this.getCurrentValue(this.thumbnails$)}}const mP=e=>{const n=/^a=rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/.exec(e);if(n)return{original:n[0],payload:n[1],codec:n[2]}},gP=e=>{const n=/^a=fmtp:(\d*) (.*)/.exec(e);if(n)return{original:n[0],payload:n[1],config:n[2]}},vP=(e,t)=>{const r=new RegExp(`(m=${t} \\d+ [\\w/]+) ([\\d\\s]+)`).exec(e);if(r)return{original:r[0],mediaWithPorts:r[1],codecOrder:r[2]}},yP=(e,t)=>{let n;const r=[],i=[];let s=!1;if(e.split(/(\r\n|\r|\n)/).forEach(o=>{if(!/^([a-z])=(.*)/.test(o))return;const l=o[0];if(l==="m"){const c=vP(o,t);s=!!c,c&&(n=c)}else if(s&&l==="a"){const c=mP(o),d=gP(o);c?r.push(c):d&&i.push(d)}}),n)return{media:n,rtpMap:r,fmtp:i}},SP=e=>{const t=yP(e,"audio"),n=t==null?void 0:t.rtpMap.find(i=>i.codec.toLowerCase()==="opus"),r=n==null?void 0:n.payload;if(r)return t==null?void 0:t.fmtp.find(i=>i.payload===r)},bP=(e,t)=>{const n=SP(e);if(!n)return e;const r=/usedtx=(\d)/.exec(n.config),i=`usedtx=${t?"1":"0"}`,s=r?n.original.replace(/usedtx=(\d)/,i):`${n.original};${i}`;return e.replace(n.original,s)},wP=(e,t,n)=>{var c;const[r,i]=n.mimeType.toLowerCase().split("/"),s=d=>new Set(d.split(";").map(f=>f.trim().toLowerCase())),o=(d,f)=>{if(d.size!==f.size)return!1;for(const u of d)if(!f.has(u))return!1;return!0},a=s(n.sdpFmtpLine||""),l=wh(e);for(const d of l.media){if(d.type!==r||String(d.mid)!==t)continue;const f=new Set;for(const u of d.rtp){if(u.codec.toLowerCase()!==i)continue;(i==="vp8"?!0:d.fmtp.some(m=>m.payload===u.payload&&o(s(m.config),a)))&&f.add(u.payload)}for(const u of d.fmtp){const h=u.config.match(/(apt)=(\d+)/);if(!h)continue;const[,,m]=h;f.has(Number(m))&&f.add(u.payload)}d.rtp=d.rtp.filter(u=>f.has(u.payload)),d.fmtp=d.fmtp.filter(u=>f.has(u.payload)),d.rtcpFb=(c=d.rtcpFb)==null?void 0:c.filter(u=>f.has(u.payload)),d.payloads=Array.from(f).join(" ")}return Z0(l)},CP=(e,t,n=51e4)=>{n=Math.max(Math.min(n,51e4),96e3);const r=wh(e),i=r.media.find(a=>a.type==="audio"&&String(a.mid)===t);if(!i)return e;const s=i.rtp.find(a=>a.codec==="opus");if(!s)return e;const o=i.fmtp.find(a=>a.payload===s.payload);return o?(o.config.match(/stereo=(\d)/)?o.config=o.config.replace(/stereo=(\d)/,"stereo=1"):o.config=`${o.config};stereo=1`,o.config.match(/maxaveragebitrate=(\d*)/)?o.config=o.config.replace(/maxaveragebitrate=(\d*)/,`maxaveragebitrate=${n}`):o.config=`${o.config};maxaveragebitrate=${n}`,Z0(r)):e},wu=(e,t,n)=>{if(e.mid)return e.mid;if(!n)return"";const r=e.sender.track,s=wh(n).media.find(o=>{var a;return o.type===r.kind&&(((a=o.msid)==null?void 0:a.includes(r.id))??!0)});return typeof(s==null?void 0:s.mid)<"u"?String(s.mid):t===-1?"":String(t)};class kP{constructor({connectionConfig:t,sfuClient:n,dispatcher:r,state:i,isDtxEnabled:s,isRedEnabled:o,onUnrecoverableError:a,logTag:l}){this.transceiverCache=new Map,this.trackLayersCache=new Map,this.publishOptsForTrack=new Map,this.transceiverInitOrder=[],this.isIceRestarting=!1,this.createPeerConnection=c=>{const d=new RTCPeerConnection(c);return d.addEventListener("icecandidate",this.onIceCandidate),d.addEventListener("negotiationneeded",this.onNegotiationNeeded),d.addEventListener("icecandidateerror",this.onIceCandidateError),d.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),d.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),d.addEventListener("signalingstatechange",this.onSignalingStateChange),d},this.close=({stopTracks:c})=>{c&&(this.stopPublishing(),this.transceiverCache.clear(),this.trackLayersCache.clear()),this.detachEventHandlers(),this.pc.close()},this.detachEventHandlers=()=>{this.unsubscribeOnIceRestart(),this.unsubscribeChangePublishQuality(),this.pc.removeEventListener("icecandidate",this.onIceCandidate),this.pc.removeEventListener("negotiationneeded",this.onNegotiationNeeded),this.pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this.pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange),this.pc.removeEventListener("signalingstatechange",this.onSignalingStateChange)},this.publishStream=async(c,d,f,u={})=>{if(d.readyState==="ended")throw new Error("Can't publish a track that has ended already.");d.enabled||(d.enabled=!0);const h=this.transceiverCache.get(f);if(!h||!h.sender.track){const m=()=>{this.logger("info",`Track ${D[f]} has ended abruptly`),d.removeEventListener("ended",m),this.notifyTrackMuteStateChanged(c,f,!0).catch(p=>this.logger("warn","Couldn't notify track mute state",p))};d.addEventListener("ended",m),this.addTransceiver(f,d,u,c)}else await this.updateTransceiver(h,d);await this.notifyTrackMuteStateChanged(c,f,!1)},this.addTransceiver=(c,d,f,u)=>{const{forceCodec:h,preferredCodec:m}=f,p=h||yu(m),v=this.computeLayers(c,d,f),g=this.pc.addTransceiver(d,{direction:"sendonly",streams:c===D.VIDEO||c===D.SCREEN_SHARE?[u]:void 0,sendEncodings:_c(p)?QI(v):v});if(this.logger("debug",`Added ${D[c]} transceiver`),this.transceiverInitOrder.push(c),this.transceiverCache.set(c,g),this.publishOptsForTrack.set(c,f),!("setCodecPreferences"in g))return;const y=this.getCodecPreferences(c,c===D.VIDEO?p:void 0,"receiver");if(y)try{this.logger("info",`Setting ${D[c]} codec preferences`,y),g.setCodecPreferences(y)}catch(S){this.logger("warn","Couldn't set codec preferences",S)}},this.updateTransceiver=async(c,d)=>{const f=c.sender.track;f&&f!==d&&f.stop(),await c.sender.replaceTrack(d)},this.unpublishStream=async(c,d)=>{var u;const f=this.transceiverCache.get(c);f&&f.sender.track&&(d?f.sender.track.readyState==="live":f.sender.track.enabled)&&(d?f.sender.track.stop():f.sender.track.enabled=!1,(u=this.state.localParticipant)!=null&&u.publishedTracks.includes(c)&&await this.notifyTrackMuteStateChanged(void 0,c,!0))},this.isPublishing=c=>{const d=this.transceiverCache.get(c);if(!d||!d.sender)return!1;const f=d.sender.track;return!!f&&f.readyState==="live"&&f.enabled},this.notifyTrackMuteStateChanged=async(c,d,f)=>{await this.sfuClient.updateMuteState(d,f);const u=Ph(d);u&&(f?this.state.updateParticipant(this.sfuClient.sessionId,h=>({publishedTracks:h.publishedTracks.filter(m=>m!==d),[u]:void 0})):this.state.updateParticipant(this.sfuClient.sessionId,h=>({publishedTracks:h.publishedTracks.includes(d)?h.publishedTracks:[...h.publishedTracks,d],[u]:c})))},this.stopPublishing=()=>{this.logger("debug","Stopping publishing all tracks"),this.pc.getSenders().forEach(c=>{var d;(d=c.track)==null||d.stop(),this.pc.signalingState!=="closed"&&this.pc.removeTrack(c)})},this.changePublishQuality=async c=>{var v;this.logger("info","Update publish quality, requested layers by SFU:",c);const d=(v=this.transceiverCache.get(D.VIDEO))==null?void 0:v.sender;if(!d){this.logger("warn","Update publish quality, no video sender found.");return}const f=d.getParameters();if(f.encodings.length===0){this.logger("warn","Update publish quality, No suitable video encoding quality found");return}const[u]=f.codecs,h=u&&_c(u.mimeType);let m=!1;for(const g of f.encodings){const y=h?c[0]:c.find(I=>I.name===g.rid)??(f.encodings.length===1?c[0]:void 0),S=!!(y!=null&&y.active);if(S!==g.active&&(g.active=S,m=!0),!y)continue;const{maxFramerate:w,scaleResolutionDownBy:k,maxBitrate:E,scalabilityMode:T}=y;k>=1&&k!==g.scaleResolutionDownBy&&(g.scaleResolutionDownBy=k,m=!0),E>0&&E!==g.maxBitrate&&(g.maxBitrate=E,m=!0),w>0&&w!==g.maxFramerate&&(g.maxFramerate=w,m=!0),T&&T!==g.scalabilityMode&&(g.scalabilityMode=T,m=!0)}const p=f.encodings.filter(g=>g.active);if(!m){this.logger("info","Update publish quality, no change:",p);return}await d.setParameters(f),this.logger("info","Update publish quality, enabled rids:",p)},this.getStats=c=>this.pc.getStats(c),this.getCodecPreferences=(c,d,f)=>{if(c===D.VIDEO)return sg("video",d||"vp8",void 0,f);if(c===D.AUDIO){const u=this.isRedEnabled?"red":"opus",h=this.isRedEnabled?void 0:"red";return sg("audio",d??u,h,f)}},this.onIceCandidate=c=>{const{candidate:d}=c;if(!d){this.logger("debug","null ice candidate");return}this.sfuClient.iceTrickle({iceCandidate:yb(d),peerType:mt.PUBLISHER_UNSPECIFIED}).catch(f=>{this.logger("warn","ICETrickle failed",f)})},this.setSfuClient=c=>{this.sfuClient=c},this.restartIce=async()=>{this.logger("debug","Restarting ICE connection");const c=this.pc.signalingState;if(this.isIceRestarting||c==="have-local-offer"){this.logger("debug","ICE restart is already in progress");return}await this.negotiate({iceRestart:!0})},this.onNegotiationNeeded=()=>{this.negotiate().catch(c=>{var d;this.logger("error","Negotiation failed.",c),(d=this.onUnrecoverableError)==null||d.call(this)})},this.negotiate=async c=>{const d=await this.pc.createOffer(c);d.sdp&&(d.sdp=bP(d.sdp,this.isDtxEnabled),this.isPublishing(D.SCREEN_SHARE_AUDIO)&&(d.sdp=this.enableHighQualityAudio(d.sdp)),this.isPublishing(D.VIDEO)&&(d.sdp=this.removeUnpreferredCodecs(d.sdp,D.VIDEO)));const f=this.getAnnouncedTracks(d.sdp);if(f.length===0)throw new Error("Can't negotiate without announcing any tracks");try{this.isIceRestarting=(c==null?void 0:c.iceRestart)??!1,await this.pc.setLocalDescription(d);const{response:u}=await this.sfuClient.setPublisher({sdp:d.sdp||"",tracks:f});if(u.error)throw new Error(u.error.message);await this.pc.setRemoteDescription({type:"answer",sdp:u.sdp})}finally{this.isIceRestarting=!1}this.sfuClient.iceTrickleBuffer.publisherCandidates.subscribe(async u=>{try{const h=JSON.parse(u.iceCandidate);await this.pc.addIceCandidate(h)}catch(h){this.logger("warn","ICE candidate error",h,u)}})},this.enableHighQualityAudio=c=>{const d=this.transceiverCache.get(D.SCREEN_SHARE_AUDIO);if(!d)return c;const f=this.transceiverInitOrder.indexOf(D.SCREEN_SHARE_AUDIO),u=wu(d,f,c);return CP(c,u)},this.getAnnouncedTracks=c=>{var d;return c=c||((d=this.pc.localDescription)==null?void 0:d.sdp),this.pc.getTransceivers().filter(f=>f.direction==="sendonly"&&f.sender.track).map(f=>{let u;this.transceiverCache.forEach((k,E)=>{k===f&&(u=E)});const h=f.sender.track;let m;const p=h.readyState==="live";p?(m=this.computeLayers(u,h)||[],this.trackLayersCache.set(u,m)):(m=this.trackLayersCache.get(u)||[],this.logger("debug",`Track ${D[u]} is ended. Announcing last known optimal layers`,m));const v=m.map(k=>({rid:k.rid||"",bitrate:k.maxBitrate||0,fps:k.maxFramerate||0,quality:XI(k.rid||""),videoDimension:{width:k.width,height:k.height}})),g=[D.AUDIO,D.SCREEN_SHARE_AUDIO].includes(u),y=h.getSettings(),S=g&&y.channelCount===2,w=this.transceiverInitOrder.indexOf(u);return{trackId:h.id,layers:v,trackType:u,mid:wu(f,w,c),stereo:S,dtx:g&&this.isDtxEnabled,red:g&&this.isRedEnabled,muted:!p}})},this.computeLayers=(c,d,f)=>{var g;const{settings:u}=this.state,h=u==null?void 0:u.video.target_resolution,m=(g=u==null?void 0:u.screensharing.target_resolution)==null?void 0:g.bitrate,p=f||this.publishOptsForTrack.get(c),v=(f==null?void 0:f.forceCodec)||yu(f==null?void 0:f.preferredCodec);return c===D.VIDEO?ZI(d,h,v,p):c===D.SCREEN_SHARE?nP(d,p,m):void 0},this.onIceCandidateError=c=>{const d=c instanceof RTCPeerConnectionIceErrorEvent&&`${c.errorCode}: ${c.errorText}`,f=this.pc.iceConnectionState,u=f==="connected"||f==="checking"?"debug":"warn";this.logger(u,"ICE Candidate error",d)},this.onIceConnectionStateChange=()=>{const c=this.pc.iceConnectionState;this.logger("debug","ICE Connection state changed to",c),this.state.callingState!==V.RECONNECTING&&(c==="failed"||c==="disconnected")&&(this.logger("debug","Attempting to restart ICE"),this.restartIce().catch(d=>{var f;this.logger("error","ICE restart error",d),(f=this.onUnrecoverableError)==null||f.call(this)}))},this.onIceGatheringStateChange=()=>{this.logger("debug","ICE Gathering State",this.pc.iceGatheringState)},this.onSignalingStateChange=()=>{this.logger("debug","Signaling state changed",this.pc.signalingState)},this.logger=we(["Publisher",l]),this.pc=this.createPeerConnection(t),this.sfuClient=n,this.state=i,this.isDtxEnabled=s,this.isRedEnabled=o,this.onUnrecoverableError=a,this.unsubscribeOnIceRestart=r.on("iceRestart",c=>{c.peerType===mt.PUBLISHER_UNSPECIFIED&&this.restartIce().catch(d=>{var f;this.logger("warn","ICERestart failed",d),(f=this.onUnrecoverableError)==null||f.call(this)})}),this.unsubscribeChangePublishQuality=r.on("changePublishQuality",({videoSenders:c})=>{xt("publisher.changePublishQuality",async()=>{for(const d of c){const{layers:f}=d,u=f.filter(h=>h.active);await this.changePublishQuality(u)}}).catch(d=>{this.logger("warn","Failed to change publish quality",d)})})}removeUnpreferredCodecs(t,n){const r=this.publishOptsForTrack.get(n),i=!!(r!=null&&r.forceSingleCodec)||Je()||fs();if(!r||!i)return t;const s=r.forceCodec||yu(r.preferredCodec),o=this.getCodecPreferences(n,s,"sender");if(!o||o.length===0)return t;const a=this.transceiverCache.get(n);if(!a)return t;const l=this.transceiverInitOrder.indexOf(n),c=wu(a,l,t),[d]=o;return wP(t,c,d)}}class EP{constructor({sfuClient:t,dispatcher:n,state:r,connectionConfig:i,onUnrecoverableError:s,logTag:o}){this.isIceRestarting=!1,this.createPeerConnection=c=>{const d=new RTCPeerConnection(c);return d.addEventListener("icecandidate",this.onIceCandidate),d.addEventListener("track",this.handleOnTrack),d.addEventListener("icecandidateerror",this.onIceCandidateError),d.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),d.addEventListener("icegatheringstatechange",this.onIceGatheringStateChange),d},this.close=()=>{this.detachEventHandlers(),this.pc.close()},this.detachEventHandlers=()=>{this.unregisterOnSubscriberOffer(),this.unregisterOnIceRestart(),this.pc.removeEventListener("icecandidate",this.onIceCandidate),this.pc.removeEventListener("track",this.handleOnTrack),this.pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this.pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.pc.removeEventListener("icegatheringstatechange",this.onIceGatheringStateChange)},this.getStats=c=>this.pc.getStats(c),this.setSfuClient=c=>{this.sfuClient=c},this.restartIce=async()=>{if(this.logger("debug","Restarting ICE connection"),this.pc.signalingState==="have-remote-offer"){this.logger("debug","ICE restart is already in progress");return}if(this.pc.connectionState==="new"){this.logger("debug","ICE connection is not yet established, skipping restart.");return}const c=this.isIceRestarting;try{this.isIceRestarting=!0,await this.sfuClient.iceRestart({peerType:mt.SUBSCRIBER})}catch(d){throw this.isIceRestarting=c,d}},this.handleOnTrack=c=>{const[d]=c.streams,[f,u]=d.id.split(":"),h=this.state.participants.find(y=>y.trackLookupPrefix===f);this.logger("debug",`[onTrack]: Got remote ${u} track for userId: ${h==null?void 0:h.userId}`,c.track.id,c.track);const m=`${h==null?void 0:h.userId} ${u}:${f}`;c.track.addEventListener("mute",()=>{this.logger("info",`[onTrack]: Track muted: ${m}`)}),c.track.addEventListener("unmute",()=>{this.logger("info",`[onTrack]: Track unmuted: ${m}`)}),c.track.addEventListener("ended",()=>{this.logger("info",`[onTrack]: Track ended: ${m}`),this.state.removeOrphanedTrack(d.id)});const p=iP(u);if(!p)return this.logger("error",`Unknown track type: ${u}`);if(!h){this.logger("warn",`[onTrack]: Received track for unknown participant: ${f}`,c),this.state.registerOrphanedTrack({id:d.id,trackLookupPrefix:f,track:d,trackType:p});return}const v=Ph(p);if(!v){this.logger("error",`Unknown track type: ${u}`);return}const g=h[v];g&&(this.logger("info",`[onTrack]: Cleaning up previous remote ${c.track.kind} tracks for userId: ${h.userId}`),g.getTracks().forEach(y=>{y.stop(),g.removeTrack(y)})),this.state.updateParticipant(h.sessionId,{[v]:d})},this.onIceCandidate=c=>{const{candidate:d}=c;if(!d){this.logger("debug","null ice candidate");return}this.sfuClient.iceTrickle({iceCandidate:yb(d),peerType:mt.SUBSCRIBER}).catch(f=>{this.logger("warn","ICETrickle failed",f)})},this.negotiate=async c=>{this.logger("info","Received subscriberOffer",c),await this.pc.setRemoteDescription({type:"offer",sdp:c.sdp}),this.sfuClient.iceTrickleBuffer.subscriberCandidates.subscribe(async f=>{try{const u=JSON.parse(f.iceCandidate);await this.pc.addIceCandidate(u)}catch(u){this.logger("warn","ICE candidate error",[u,f])}});const d=await this.pc.createAnswer();await this.pc.setLocalDescription(d),await this.sfuClient.sendAnswer({peerType:mt.SUBSCRIBER,sdp:d.sdp||""}),this.isIceRestarting=!1},this.onIceConnectionStateChange=()=>{const c=this.pc.iceConnectionState;this.logger("debug","ICE connection state changed",c),this.state.callingState!==V.RECONNECTING&&(this.isIceRestarting||(c==="failed"||c==="disconnected")&&(this.logger("debug","Attempting to restart ICE"),this.restartIce().catch(d=>{var f;this.logger("error","ICE restart failed",d),(f=this.onUnrecoverableError)==null||f.call(this)})))},this.onIceGatheringStateChange=()=>{this.logger("debug","ICE gathering state changed",this.pc.iceGatheringState)},this.onIceCandidateError=c=>{const d=c instanceof RTCPeerConnectionIceErrorEvent&&`${c.errorCode}: ${c.errorText}`,f=this.pc.iceConnectionState,u=f==="connected"||f==="checking"?"debug":"warn";this.logger(u,"ICE Candidate error",d)},this.logger=we(["Subscriber",o]),this.sfuClient=t,this.state=r,this.onUnrecoverableError=s,this.pc=this.createPeerConnection(i);const a=Symbol("subscriberOffer");this.unregisterOnSubscriberOffer=n.on("subscriberOffer",c=>{xt(a,()=>this.negotiate(c)).catch(d=>{this.logger("error","Negotiation failed.",d)})});const l=Symbol("iceRestart");this.unregisterOnIceRestart=n.on("iceRestart",c=>{xt(l,async()=>{c.peerType===mt.SUBSCRIBER&&await this.restartIce()}).catch(d=>{var f;this.logger("error","ICERestart failed",d),(f=this.onUnrecoverableError)==null||f.call(this)})})}}const TP=e=>{const{endpoint:t,onMessage:n,logTag:r}=e,i=we(["SfuClientWS",r]),s=new WebSocket(t);return s.binaryType="arraybuffer",s.addEventListener("error",o=>{i("error","Signaling WS channel error",o)}),s.addEventListener("close",o=>{i("info","Signaling WS channel is closed",o)}),s.addEventListener("open",o=>{i("info","Signaling WS channel is open",o)}),s.addEventListener("message",o=>{try{const a=o.data instanceof ArrayBuffer?tg.fromBinary(new Uint8Array(o.data)):tg.fromJsonString(o.data.toString());n(a)}catch(a){i("error","Failed to decode a message. Check whether the Proto models match.",{event:o,error:a})}}),s};function ko(e){let t=!0;const n=e.then(i=>({status:"resolved",result:i}),i=>({status:"rejected",error:i})).finally(()=>t=!1),r=()=>n.then(i=>{if(i.status==="rejected")throw i.error;return i.result});return r.checkPending=()=>t,r}const Ls=()=>{let e,t;const n=new Promise((a,l)=>{e=a,t=l});let r=!1,i=!1;return{promise:n,resolve:a=>{r=!0,e(a)},reject:a=>{i=!0,t(a)},isResolved:r,isRejected:i}},lg=Symbol("uninitialized");function pi(e){let t=lg;return()=>(t===lg&&(t=e()),t)}const xP={src:`const timerIdMapping = new Map();
self.addEventListener('message', (event) => {
    const request = event.data;
    switch (request.type) {
        case 'setTimeout':
        case 'setInterval':
            timerIdMapping.set(request.id, (request.type === 'setTimeout' ? setTimeout : setInterval)(() => {
                tick(request.id);
                if (request.type === 'setTimeout') {
                    timerIdMapping.delete(request.id);
                }
            }, request.timeout));
            break;
        case 'clearTimeout':
        case 'clearInterval':
            (request.type === 'clearTimeout' ? clearTimeout : clearInterval)(timerIdMapping.get(request.id));
            timerIdMapping.delete(request.id);
            break;
    }
});
function tick(id) {
    const message = { type: 'tick', id };
    self.postMessage(message);
}`};class RP{constructor(){this.currentTimerId=1,this.callbacks=new Map,this.fallback=!1}setup({useTimerWorker:t=!0}={}){if(!t){this.fallback=!0;return}try{const n=xP.src,r=new Blob([n],{type:"application/javascript; charset=utf-8"}),i=URL.createObjectURL(r);this.worker=new Worker(i,{name:"str-timer-worker"}),this.worker.addEventListener("message",s=>{var l;const{type:o,id:a}=s.data;o==="tick"&&((l=this.callbacks.get(a))==null||l())})}catch(n){we(["timer-worker"])("error",n),this.fallback=!0}}destroy(){var t;this.callbacks.clear(),(t=this.worker)==null||t.terminate(),this.worker=void 0,this.fallback=!1}get ready(){return this.fallback||!!this.worker}setInterval(t,n){return this.setTimer("setInterval",t,n)}clearInterval(t){this.clearTimer("clearInterval",t)}setTimeout(t,n){return this.setTimer("setTimeout",t,n)}clearTimeout(t){this.clearTimer("clearTimeout",t)}setTimer(t,n,r){if(this.ready||this.setup(),this.fallback)return(t==="setTimeout"?setTimeout:setInterval)(n,r);const i=this.getTimerId();return this.callbacks.set(i,()=>{n(),t==="setTimeout"&&this.callbacks.delete(i)}),this.sendMessage({type:t,id:i,timeout:r}),i}clearTimer(t,n){if(n){if(this.ready||this.setup(),this.fallback){(t==="clearTimeout"?clearTimeout:clearInterval)(n);return}this.callbacks.delete(n),this.sendMessage({type:t,id:n})}}getTimerId(){return this.currentTimerId++}sendMessage(t){if(!this.worker)throw new Error("Cannot use timer worker before it's set up");this.worker.postMessage(t)}}let Eb=!1;const ug=()=>{Eb=!0},Pc=pi(()=>{const e=new RP;return e.setup({useTimerWorker:Eb}),e});class jn{constructor({dispatcher:t,credentials:n,sessionId:r,logTag:i,joinResponseTimeout:s=5e3,onSignalClose:o,streamClient:a}){this.iceTrickleBuffer=new qI,this.isLeaving=!1,this.pingIntervalInMs=10*1e3,this.unhealthyTimeoutInMs=this.pingIntervalInMs+5*1e3,this.joinResponseTask=Ls(),this.abortController=new AbortController,this.createWebSocket=()=>{this.signalWs=TP({logTag:this.logTag,endpoint:`${this.credentials.server.ws_endpoint}?tag=${this.logTag}`,onMessage:d=>{this.lastMessageTimestamp=new Date,this.scheduleConnectionCheck(),this.dispatcher.dispatch(d,this.logTag)}}),this.signalWs.addEventListener("close",this.handleWebSocketClose),this.signalReady=ko(Promise.race([new Promise(d=>{const f=()=>{this.signalWs.removeEventListener("open",f),d(this.signalWs)};this.signalWs.addEventListener("open",f)}),new Promise((d,f)=>{setTimeout(()=>f(new Error("SFU WS connection timed out")),this.joinResponseTimeout)})]))},this.cleanUpWebSocket=()=>{this.signalWs.removeEventListener("close",this.handleWebSocketClose)},this.handleWebSocketClose=()=>{var d;this.signalWs.removeEventListener("close",this.handleWebSocketClose),Pc().clearInterval(this.keepAliveInterval),clearTimeout(this.connectionCheckTimeout),(d=this.onSignalClose)==null||d.call(this)},this.close=(d=jn.NORMAL_CLOSURE,f)=>{this.signalWs.readyState===WebSocket.OPEN&&(this.logger("debug",`Closing SFU WS connection: ${d} - ${f}`),this.signalWs.close(d,`js-client: ${f}`),this.cleanUpWebSocket()),this.dispose()},this.dispose=()=>{var d;this.logger("debug","Disposing SFU client"),this.unsubscribeIceTrickle(),this.unsubscribeNetworkChanged(),clearInterval(this.keepAliveInterval),clearTimeout(this.connectionCheckTimeout),clearTimeout(this.migrateAwayTimeout),this.abortController.abort(),(d=this.migrationTask)==null||d.resolve()},this.leaveAndClose=async d=>{await this.joinTask;try{this.isLeaving=!0,await this.notifyLeave(d)}catch(f){this.logger("debug","Error notifying SFU about leaving call",f)}this.close(jn.NORMAL_CLOSURE,d.substring(0,115))},this.updateSubscriptions=async d=>(await this.joinTask,zn(()=>this.rpc.updateSubscriptions({sessionId:this.sessionId,tracks:d}),this.abortController.signal)),this.setPublisher=async d=>(await this.joinTask,zn(()=>this.rpc.setPublisher({...d,sessionId:this.sessionId}),this.abortController.signal)),this.sendAnswer=async d=>(await this.joinTask,zn(()=>this.rpc.sendAnswer({...d,sessionId:this.sessionId}),this.abortController.signal)),this.iceTrickle=async d=>(await this.joinTask,zn(()=>this.rpc.iceTrickle({...d,sessionId:this.sessionId}),this.abortController.signal)),this.iceRestart=async d=>(await this.joinTask,zn(()=>this.rpc.iceRestart({...d,sessionId:this.sessionId}),this.abortController.signal)),this.updateMuteState=async(d,f)=>(await this.joinTask,this.updateMuteStates({muteStates:[{trackType:d,muted:f}]})),this.updateMuteStates=async d=>(await this.joinTask,zn(()=>this.rpc.updateMuteStates({...d,sessionId:this.sessionId}),this.abortController.signal)),this.sendStats=async d=>(await this.joinTask,zn(()=>this.rpc.sendStats({...d,sessionId:this.sessionId}),this.abortController.signal)),this.startNoiseCancellation=async()=>(await this.joinTask,zn(()=>this.rpc.startNoiseCancellation({sessionId:this.sessionId}),this.abortController.signal)),this.stopNoiseCancellation=async()=>(await this.joinTask,zn(()=>this.rpc.stopNoiseCancellation({sessionId:this.sessionId}),this.abortController.signal)),this.enterMigration=async(d={})=>{var m;this.isLeaving=!0;const{timeout:f=7*1e3}=d;(m=this.migrationTask)==null||m.reject(new Error("Cancelled previous migration"));const u=this.migrationTask=Ls(),h=this.dispatcher.on("participantMigrationComplete",()=>{h(),clearTimeout(this.migrateAwayTimeout),u.resolve()});return this.migrateAwayTimeout=setTimeout(()=>{h(),u.reject(new Error(`Migration (${this.logTag}) failed to complete in ${f}ms`))},f),u.promise},this.join=async d=>{await this.signalReady(),(this.joinResponseTask.isResolved||this.joinResponseTask.isRejected)&&(this.joinResponseTask=Ls());const f=this.joinResponseTask;let u;const h=this.dispatcher.on("joinResponse",m=>{this.logger("debug","Received joinResponse",m),clearTimeout(u),h(),this.keepAlive(),f.resolve(m)});return u=setTimeout(()=>{h(),f.reject(new Error('Waiting for "joinResponse" has timed out'))},this.joinResponseTimeout),await this.send(Rs.create({requestPayload:{oneofKind:"joinRequest",joinRequest:fb.create({...d,sessionId:this.sessionId,token:this.credentials.token})}})),f.promise},this.ping=async()=>this.send(Rs.create({requestPayload:{oneofKind:"healthCheckRequest",healthCheckRequest:{}}})),this.notifyLeave=async d=>this.send(Rs.create({requestPayload:{oneofKind:"leaveCallRequest",leaveCallRequest:{sessionId:this.sessionId,reason:d}}})),this.send=async d=>{await this.signalReady();const f=Rs.toJson(d);if(this.signalWs.readyState!==WebSocket.OPEN){this.logger("debug","Signal WS is not open. Skipping message",f);return}this.logger("debug",`Sending message to: ${this.edgeName}`,f),this.signalWs.send(Rs.toBinary(d))},this.keepAlive=()=>{const d=Pc();d.clearInterval(this.keepAliveInterval),this.keepAliveInterval=d.setInterval(()=>{this.ping().catch(f=>{this.logger("error","Error sending healthCheckRequest to SFU",f)})},this.pingIntervalInMs)},this.scheduleConnectionCheck=()=>{clearTimeout(this.connectionCheckTimeout),this.connectionCheckTimeout=setTimeout(()=>{this.lastMessageTimestamp&&new Date().getTime()-this.lastMessageTimestamp.getTime()>this.unhealthyTimeoutInMs&&this.close(jn.ERROR_CONNECTION_UNHEALTHY,`SFU connection unhealthy. Didn't receive any message for ${this.unhealthyTimeoutInMs}ms`)},this.unhealthyTimeoutInMs)},this.dispatcher=t,this.sessionId=r||hb(),this.onSignalClose=o,this.credentials=n;const{server:l,token:c}=n;this.edgeName=l.edge_name,this.joinResponseTimeout=s,this.logTag=i,this.logger=we(["SfuClient",i]),this.rpc=CI({baseUrl:l.url,interceptors:[bI({Authorization:`Bearer ${c}`}),PI()==="trace"&&wI(this.logger,"trace")].filter(d=>!!d)}),this.unsubscribeIceTrickle=t.on("iceTrickle",d=>{this.iceTrickleBuffer.push(d)}),this.unsubscribeNetworkChanged=a.on("network.changed",d=>{var f;d.online?(f=this.networkAvailableTask)==null||f.resolve():this.networkAvailableTask=Ls()}),this.createWebSocket()}get isHealthy(){return this.signalWs.readyState===WebSocket.OPEN}get joinTask(){return this.joinResponseTask.promise}}jn.NORMAL_CLOSURE=1e3;jn.ERROR_CONNECTION_UNHEALTHY=4001;jn.DISPOSE_OLD_SOCKET=4002;const _P=e=>({iceServers:e.map(t=>({urls:t.urls,username:t.username,credential:t.password}))}),IP=e=>async function(n){if(n.user.id===e.currentUserId)return;const{state:r}=e;n.call.created_by.id===e.currentUserId&&r.callingState===V.RINGING&&await e.join()},PP=e=>async function(n){if(n.user.id===e.currentUserId)return;const{call:r}=n,{session:i}=r;if(!i){e.logger("warn","No call session provided. Ignoring call.rejected event.",n);return}const s=i.rejected_by,{members:o,callingState:a}=e.state;if(a!==V.RINGING){e.logger("info","Call is not in ringing mode (it is either accepted or rejected already). Ignoring call.rejected event.",n);return}e.isCreatedByMe?o.filter(c=>c.user_id!==e.currentUserId).every(c=>s[c.user_id])&&(e.logger("info","everyone rejected, leaving the call"),await e.leave({reason:"ring: everyone rejected"})):s[r.created_by.id]&&(e.logger("info","call creator rejected, leaving call"),await e.leave({reason:"ring: creator rejected"}))},OP=e=>function(){const{callingState:n}=e.state;n!==V.IDLE&&n!==V.LEFT&&e.leave({reason:"call.ended event received",reject:!1}).catch(r=>{e.logger("error","Failed to leave call after call.ended ",r)})},NP=e=>e.on("callEnded",async t=>{if(e.state.callingState!==V.LEFT)try{e.state.setEndedAt(new Date);const n=bo[t.reason];await e.leave({reason:`callEnded received: ${n}`})}catch(n){e.logger("error","Failed to leave call after being ended by the SFU",n)}}),AP=e=>function(n){const{currentGrants:r}=n;if(r){const{canPublishAudio:i,canPublishVideo:s,canScreenshare:o}=r,a={[ee.SEND_AUDIO]:i,[ee.SEND_VIDEO]:s,[ee.SCREENSHARE]:o},l=e.ownCapabilities.filter(c=>a[c]!==!1);Object.entries(a).forEach(([c,d])=>{d&&!l.includes(c)&&l.push(c)}),e.setOwnCapabilities(l)}},DP=(e,t)=>e.on("connectionQualityChanged",n=>{const{connectionQualityUpdates:r}=n;r&&t.updateParticipants(r.reduce((i,s)=>{const{sessionId:o,connectionQuality:a}=s;return i[o]={connectionQuality:a},i},{}))}),LP=(e,t)=>e.on("healthCheckResponse",n=>{const{participantCount:r}=n;r&&(t.setParticipantCount(r.total),t.setAnonymousParticipantCount(r.anonymous))}),jP=(e,t)=>e.on("error",n=>{n.error&&n.error.code!==ns.LIVE_ENDED||t.permissionsContext.hasPermission(ee.JOIN_BACKSTAGE)||t.leave({reason:"live ended"}).catch(r=>{t.logger("error","Failed to leave call after live ended",r)})}),MP=e=>e.on("error",t=>{if(!t.error)return;const n=we(["SfuClient"]),{error:r,reconnectStrategy:i}=t;n("error","SFU reported error",{code:ns[r.code],reconnectStrategy:le[i],message:r.message,shouldRetry:r.shouldRetry})}),FP=e=>function(n){const{pins:r}=n;e.setServerSidePins(r)},UP=e=>e.on("trackUnpublished",async t=>{const{cause:n,type:r,sessionId:i}=t,{localParticipant:s}=e.state;if(n===So.MODERATION&&i===(s==null?void 0:s.sessionId)){const o=e.logger;o("info",`Local participant's ${D[r]} track is muted remotely`);try{r===D.VIDEO?await e.camera.disable():r===D.AUDIO?await e.microphone.disable():r===D.SCREEN_SHARE||r===D.SCREEN_SHARE_AUDIO?await e.screenShare.disable():o("warn","Unsupported track type to soft mute",D[r])}catch(a){o("error","Failed to stop publishing",a)}}}),$P=e=>function(n){const{participant:r}=n;if(!r)return;const i=Fh(e,r);e.updateOrAddParticipant(r.sessionId,Object.assign(r,i,{viewportVisibilityState:{videoTrack:et.UNKNOWN,screenShareTrack:et.UNKNOWN}}))},VP=e=>function(n){const{participant:r}=n;r&&e.setParticipants(i=>i.filter(s=>s.sessionId!==r.sessionId))},BP=e=>function(n){const{participant:r}=n;r&&e.updateParticipant(r.sessionId,r)},zP=e=>function(n){const{type:r,sessionId:i}=n;if(n.participant){const s=Fh(e,n.participant),o=Object.assign(n.participant,s);e.updateOrAddParticipant(i,o)}else e.updateParticipant(i,s=>({publishedTracks:[...s.publishedTracks,r].filter(WP)}))},HP=e=>function(n){const{type:r,sessionId:i}=n;if(n.participant){const s=Fh(e,n.participant),o=Object.assign(n.participant,s);e.updateOrAddParticipant(i,o)}else e.updateParticipant(i,s=>({publishedTracks:s.publishedTracks.filter(o=>o!==r)}))},WP=(e,t,n)=>n.indexOf(e)===t,Fh=(e,t)=>{const n=e.takeOrphanedTracks(t.trackLookupPrefix);if(!n.length)return;const r={};for(const i of n){const s=Ph(i.trackType);s&&(r[s]=i.track)}return r},qP=(e,t)=>e.on("dominantSpeakerChanged",n=>{var i;const{sessionId:r}=n;r!==((i=t.dominantSpeaker)==null?void 0:i.sessionId)&&t.setParticipants(s=>s.map(o=>o.sessionId===r?{...o,isDominantSpeaker:!0}:o.isDominantSpeaker?{...o,isDominantSpeaker:!1}:o))}),KP=(e,t)=>e.on("audioLevelChanged",n=>{const{audioLevels:r}=n;t.updateParticipants(r.reduce((i,s)=>(i[s.sessionId]={audioLevel:s.level,isSpeaking:s.isSpeaking},i),{}))}),GP=(e,t)=>{const n=e.state,r=[e.on("call.ended",OP(e)),NP(e),jP(t,e),MP(t),DP(t,n),LP(t,n),e.on("participantJoined",$P(n)),e.on("participantLeft",VP(n)),e.on("participantUpdated",BP(n)),e.on("trackPublished",zP(n)),e.on("trackUnpublished",HP(n)),KP(t,n),qP(t,n),e.on("callGrantsUpdated",AP(n)),e.on("pinsUpdated",FP(n)),UP(e)];return e.ringing&&r.push(Tb(e)),()=>{r.forEach(i=>i())}},Tb=e=>{const t={"call.accepted":IP(e),"call.rejected":PP(e)},n=Object.keys(t).map(r=>{const i=r;return e.on(i,t[i])});return()=>{n.forEach(r=>r())}},Oc=e=>{const t=[];return e.forEach(n=>{t.push(n)}),t},JP=e=>{const{sdk:t,...n}=e,r=xb(t),i=Rb(t);return{sdkName:r,sdkVersion:i,...n}},xb=e=>e&&e.type===Or.REACT?"stream-react":e&&e.type===Or.REACT_NATIVE?"stream-react-native":"stream-js",Rb=e=>e?`${e.major}.${e.minor}.${e.patch}`:"0.0.0-development",YP=({subscriber:e,publisher:t,state:n,datacenter:r,pollingIntervalInMs:i=2e3})=>{const s=we(["stats"]),o=async(m,p)=>m==="subscriber"&&e?e.getStats(p):m==="publisher"&&t?t.getStats(p):void 0,a=async(m,p)=>{const v=m==="subscriber"?e:t;if(!v)return[];const g=[];for(let y of p.getTracks()){const S=await v.getStats(y),w=Cu(S,{trackKind:y.kind,kind:m});g.push(w)}return g},l=m=>{d.add(m),f()},c=m=>{d.delete(m),f()},d=new Set,f=async()=>{var w,k;const m={},p=new Set(d);if(p.size>0)for(let E of n.participants){if(!p.has(E.sessionId))continue;const T=E.isLocalParticipant?"publisher":"subscriber";try{const I=new MediaStream([...((w=E.videoStream)==null?void 0:w.getVideoTracks())||[],...((k=E.audioStream)==null?void 0:k.getAudioTracks())||[]]);m[E.sessionId]=await a(T,I),I.getTracks().forEach(U=>{I.removeTrack(U)})}catch(I){s("error",`Failed to collect stats for ${T} of ${E.userId}`,I)}}const[v,g]=await Promise.all([e.getStats().then(E=>Cu(E,{kind:"subscriber",trackKind:"video"})).then(dg),t?t.getStats().then(E=>Cu(E,{kind:"publisher",trackKind:"video"})).then(dg):_b()]),[y,S]=await Promise.all([o("subscriber"),t?o("publisher"):void 0]);n.setCallStatsReport({datacenter:r,publisherStats:g,subscriberStats:v,subscriberRawStats:y,publisherRawStats:S,participants:m,timestamp:Date.now()})};let u;if(i>0){const m=async()=>{await f().catch(p=>{s("debug","Failed to collect stats",p)}),u=setTimeout(m,i)};m()}return{getRawStatsForTrack:o,getStatsForStream:a,startReportingStatsFor:l,stopReportingStatsFor:c,stop:()=>{u&&clearTimeout(u)}}},Cu=(e,t)=>{const{trackKind:n,kind:r}=t,i=r==="subscriber"?"inbound-rtp":"outbound-rtp",s=Oc(e),o=s.filter(a=>a.type===i&&a.kind===n).map(a=>{const l=a,c=s.find(u=>u.type==="codec"&&u.id===l.codecId),d=s.find(u=>u.type==="transport"&&u.id===l.transportId);let f;if(d&&d.dtlsState==="connected"){const u=s.find(h=>h.type==="candidate-pair"&&h.id===d.selectedCandidatePairId);f=u==null?void 0:u.currentRoundTripTime}return{bytesSent:l.bytesSent,bytesReceived:l.bytesReceived,codec:c==null?void 0:c.mimeType,currentRoundTripTime:f,frameHeight:l.frameHeight,frameWidth:l.frameWidth,framesPerSecond:l.framesPerSecond,jitter:l.jitter,kind:l.kind,qualityLimitationReason:l.qualityLimitationReason,rid:l.rid,ssrc:l.ssrc}});return{rawStats:e,streams:o,timestamp:Date.now()}},_b=e=>({rawReport:e??{streams:[],timestamp:Date.now()},totalBytesSent:0,totalBytesReceived:0,averageJitterInMs:0,averageRoundTripTimeInMs:0,qualityLimitationReasons:"none",highestFrameWidth:0,highestFrameHeight:0,highestFramesPerSecond:0,codec:"",timestamp:Date.now()}),dg=e=>{const t=_b(e);let n=-1;const r=(l,c)=>l*c,i=new Set,s=e.streams,o=s.reduce((l,c)=>{l.totalBytesSent+=c.bytesSent||0,l.totalBytesReceived+=c.bytesReceived||0,l.averageJitterInMs+=c.jitter||0,l.averageRoundTripTimeInMs+=c.currentRoundTripTime||0;const d=r(c.frameWidth||0,c.frameHeight||0);return d>n&&(l.highestFrameWidth=c.frameWidth||0,l.highestFrameHeight=c.frameHeight||0,l.highestFramesPerSecond=c.framesPerSecond||0,n=d),i.add(c.qualityLimitationReason||""),l},t);s.length>0&&(o.averageJitterInMs=Math.round(o.averageJitterInMs/s.length*1e3),o.averageRoundTripTimeInMs=Math.round(o.averageRoundTripTimeInMs/s.length*1e3),o.codec=s[0].codec||"");const a=[i.has("cpu")&&"cpu",i.has("bandwidth")&&"bandwidth",i.has("other")&&"other"].filter(Boolean).join(", ");return a&&(o.qualityLimitationReasons=a),o};class QP{constructor(t,{options:n,clientDetails:r,subscriber:i,publisher:s,microphone:o,camera:a,state:l}){this.logger=we(["SfuStatsReporter"]),this.inputDevices=new Map,this.observeDevice=(f,u)=>{var m;const{hasBrowserPermission$:h}=f.state;(m=this.unsubscribeDevicePermissionsSubscription)==null||m.call(this),this.unsubscribeDevicePermissionsSubscription=Wt(ii([h,this.state.ownCapabilities$]),([p,v])=>{var y;(y=this.unsubscribeListDevicesSubscription)==null||y.call(this);const g=u==="mic"?v.includes(ee.SEND_AUDIO):v.includes(ee.SEND_VIDEO);if(!p||!g){this.inputDevices.set(u,{currentDevice:"",availableDevices:[],isPermitted:!1});return}this.unsubscribeListDevicesSubscription=Wt(ii([f.listDevices(),f.state.selectedDevice$]),([S,w])=>{const k=S.find(E=>E.deviceId===w);this.inputDevices.set(u,{currentDevice:(k==null?void 0:k.label)||w||"",availableDevices:S.map(E=>E.label),isPermitted:!0})})})},this.sendTelemetryData=async f=>this.run(f),this.run=async f=>{var m;const[u,h]=await Promise.all([this.subscriber.getStats().then(Oc).then(JSON.stringify),((m=this.publisher)==null?void 0:m.getStats().then(Oc).then(JSON.stringify))??"[]"]);await this.sfuClient.sendStats({sdk:this.sdkName,sdkVersion:this.sdkVersion,webrtcVersion:this.webRTCVersion,subscriberStats:u,publisherStats:h,audioDevices:this.inputDevices.get("mic"),videoDevices:this.inputDevices.get("camera"),deviceState:VI(),telemetry:f})},this.start=()=>{this.options.reporting_interval_ms<=0||(this.observeDevice(this.microphone,"mic"),this.observeDevice(this.camera,"camera"),clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.run().catch(f=>{this.logger("warn","Failed to report stats",f)})},this.options.reporting_interval_ms))},this.stop=()=>{var f,u;(f=this.unsubscribeDevicePermissionsSubscription)==null||f.call(this),this.unsubscribeDevicePermissionsSubscription=void 0,(u=this.unsubscribeListDevicesSubscription)==null||u.call(this),this.unsubscribeListDevicesSubscription=void 0,this.inputDevices.clear(),clearInterval(this.intervalId),this.intervalId=void 0},this.sfuClient=t,this.options=n,this.subscriber=i,this.publisher=s,this.microphone=o,this.camera=a,this.state=l;const{sdk:c,browser:d}=r;this.sdkName=xb(c),this.sdkVersion=Rb(c),this.webRTCVersion=`${(d==null?void 0:d.name)||""}-${(d==null?void 0:d.version)||""}`||"N/A"}}const XP=.35;class ZP{constructor(){this.elementHandlerMap=new Map,this.observer=null,this.queueSet=new Set,this.setViewport=(t,n)=>{const r=()=>{var i;(i=this.observer)==null||i.disconnect(),this.observer=null,this.elementHandlerMap.clear()};return this.observer=new IntersectionObserver(i=>{i.forEach(s=>{const o=this.elementHandlerMap.get(s.target);o==null||o(s)})},{root:t,...n,threshold:(n==null?void 0:n.threshold)??XP}),this.queueSet.size&&(this.queueSet.forEach(([i,s])=>{t.contains(i)&&(this.observer.observe(i),this.elementHandlerMap.set(i,s))}),this.queueSet.clear()),r},this.observe=(t,n)=>{const r=[t,n],i=()=>{var s;this.elementHandlerMap.delete(t),(s=this.observer)==null||s.unobserve(t),this.queueSet.delete(r)};return this.elementHandlerMap.has(t)?i:this.observer?(this.observer.root.contains(t)&&(this.elementHandlerMap.set(t,n),this.observer.observe(t)),i):(this.queueSet.add(r),i)}}}const fg={videoTrack:et.UNKNOWN,screenShareTrack:et.UNKNOWN},fa=Symbol("globalOverrideKey");class eO{constructor(t,n){this.viewportTracker=new ZP,this.logger=we(["DynascaleManager"]),this.pendingSubscriptionsUpdate=null,this.videoTrackSubscriptionOverridesSubject=new ce({}),this.videoTrackSubscriptionOverrides$=this.videoTrackSubscriptionOverridesSubject.asObservable(),this.incomingVideoSettings$=this.videoTrackSubscriptionOverrides$.pipe(Ct(r=>{const{[fa]:i,...s}=r;return{enabled:(i==null?void 0:i.enabled)!==!1,preferredResolution:i!=null&&i.enabled?i.dimension:void 0,participants:Object.fromEntries(Object.entries(s).map(([o,a])=>[o,{enabled:(a==null?void 0:a.enabled)!==!1,preferredResolution:a!=null&&a.enabled?a.dimension:void 0}])),isParticipantVideoEnabled:o=>{var a,l;return((a=r[o])==null?void 0:a.enabled)??((l=r[fa])==null?void 0:l.enabled)??!0}}}),Lt(1)),this.setVideoTrackSubscriptionOverrides=(r,i)=>i?Nr(this.videoTrackSubscriptionOverridesSubject,s=>({...s,...Object.fromEntries(i.map(o=>[o,r]))})):Nr(this.videoTrackSubscriptionOverridesSubject,r?{[fa]:r}:{}),this.applyTrackSubscriptions=(r=_n.SLOW)=>{this.pendingSubscriptionsUpdate&&clearTimeout(this.pendingSubscriptionsUpdate);const i=()=>{var s;this.pendingSubscriptionsUpdate=null,(s=this.sfuClient)==null||s.updateSubscriptions(this.trackSubscriptions).catch(o=>{this.logger("debug","Failed to update track subscriptions",o)})};r?this.pendingSubscriptionsUpdate=setTimeout(i,r):i()},this.trackElementVisibility=(r,i,s)=>{const o=this.viewportTracker.observe(r,a=>{this.callState.updateParticipant(i,l=>{const c=l.viewportVisibilityState??fg,d=a.isIntersecting||document.fullscreenElement===r?et.VISIBLE:et.INVISIBLE;return{...l,viewportVisibilityState:{...c,[s]:d}}})});return()=>{o(),this.callState.updateParticipant(i,a=>{const l=a.viewportVisibilityState??fg;return{...a,viewportVisibilityState:{...l,[s]:et.UNKNOWN}}})}},this.setViewport=r=>this.viewportTracker.setViewport(r),this.bindVideoElement=(r,i,s)=>{const o=this.callState.findParticipantBySessionId(i);if(!o)return;const a=(p,v)=>{v&&(v.width===0||v.height===0)&&(this.logger("debug","Ignoring 0x0 dimension",o),v=void 0),this.callState.updateParticipantTracks(s,{[i]:{dimension:v}}),this.applyTrackSubscriptions(p)},l=this.callState.participants$.pipe(Ct(p=>p.find(v=>v.sessionId===i)),Kd(p=>!!p),Et(),Lt({bufferSize:1,refCount:!0}));let c;const d=o.isLocalParticipant?null:l.pipe(Ct(p=>{var v;return(v=p.viewportVisibilityState)==null?void 0:v[s]}),Et()).subscribe(p=>{if(!c){c=p??et.UNKNOWN;return}if(c=p??et.UNKNOWN,p===et.INVISIBLE)return a(_n.MEDIUM,void 0);a(_n.MEDIUM,{width:r.clientWidth,height:r.clientHeight})});let f;const u=o.isLocalParticipant?null:new ResizeObserver(()=>{const p={width:r.clientWidth,height:r.clientHeight};if(!f){f=p;return}if(f.width===p.width&&f.height===p.height||c===et.INVISIBLE)return;const g=Math.max(p.width/f.width,p.height/f.height)>1.2?_n.IMMEDIATE:_n.MEDIUM;a(g,{width:r.clientWidth,height:r.clientHeight}),f=p});u==null||u.observe(r);const h=o.isLocalParticipant?null:l.pipe(ua("publishedTracks"),Ct(p=>s==="videoTrack"?On(p):yn(p)),Et()).subscribe(p=>{p?a(_n.IMMEDIATE,{width:r.clientWidth,height:r.clientHeight}):a(_n.FAST,void 0)});r.autoplay=!0,r.playsInline=!0,r.muted=!0;const m=l.pipe(ua(s==="videoTrack"?"videoStream":"screenShareStream")).subscribe(p=>{const v=s==="videoTrack"?p.videoStream:p.screenShareStream;r.srcObject!==v&&(r.srcObject=v??null,(bl()||fs())&&setTimeout(()=>{r.srcObject=v??null,r.play().catch(g=>{this.logger("warn","Failed to play stream",g)})},25))});return()=>{a(_n.FAST,void 0),d==null||d.unsubscribe(),h==null||h.unsubscribe(),m.unsubscribe(),u==null||u.disconnect()}},this.bindAudioElement=(r,i,s)=>{const o=this.callState.findParticipantBySessionId(i);if(!o||o.isLocalParticipant)return;const a=this.callState.participants$.pipe(Ct(f=>f.find(u=>u.sessionId===i)),Kd(f=>!!f),Et(),Lt({bufferSize:1,refCount:!0})),l=a.pipe(ua(s==="screenShareAudioTrack"?"screenShareAudioStream":"audioStream")).subscribe(f=>{const u=s==="screenShareAudioTrack"?f.screenShareAudioStream:f.audioStream;r.srcObject!==u&&setTimeout(()=>{if(r.srcObject=u??null,r.srcObject){r.play().catch(m=>{this.logger("warn","Failed to play stream",m)});const{selectedDevice:h}=this.speaker.state;h&&"setSinkId"in r&&r.setSinkId(h)}})}),c="setSinkId"in r?this.speaker.state.selectedDevice$.subscribe(f=>{f&&r.setSinkId(f)}):null,d=ii([this.speaker.state.volume$,a.pipe(ua("audioVolume"))]).subscribe(([f,u])=>{r.volume=u.audioVolume??f});return r.autoplay=!0,()=>{c==null||c.unsubscribe(),d.unsubscribe(),l.unsubscribe()}},this.callState=t,this.speaker=n}setSfuClient(t){this.sfuClient=t}get trackSubscriptions(){const t=[];for(const n of this.callState.remoteParticipants){if(n.videoDimension&&On(n)){const r=this.videoTrackSubscriptionOverrides[n.sessionId]??this.videoTrackSubscriptionOverrides[fa];(r==null?void 0:r.enabled)!==!1&&t.push({userId:n.userId,sessionId:n.sessionId,trackType:D.VIDEO,dimension:(r==null?void 0:r.dimension)??n.videoDimension})}n.screenShareDimension&&yn(n)&&t.push({userId:n.userId,sessionId:n.sessionId,trackType:D.SCREEN_SHARE,dimension:n.screenShareDimension}),wl(n)&&t.push({userId:n.userId,sessionId:n.sessionId,trackType:D.SCREEN_SHARE_AUDIO})}return t}get videoTrackSubscriptionOverrides(){return an(this.videoTrackSubscriptionOverrides$)}}class tO{constructor(){this.permissions=[],this.setPermissions=t=>{this.permissions=t||[]},this.setCallSettings=t=>{this.settings=t},this.hasPermission=t=>this.permissions.includes(t),this.canRequest=(t,n=this.settings)=>{if(!n)return!1;const{audio:r,video:i,screensharing:s}=n;switch(t){case ee.SEND_AUDIO:return r.access_request_enabled;case ee.SEND_VIDEO:return i.access_request_enabled;case ee.SCREENSHARE:return s.access_request_enabled;default:return!1}}}}class js{constructor(t,n={sortParticipantsBy:Co}){this.name=t,this.options=n}}class nO{constructor(t){this.register=n=>{this.callTypes[n.name]=n},this.unregister=n=>{delete this.callTypes[n]},this.get=n=>(this.callTypes[n]||this.register(new js(n)),this.callTypes[n]),this.callTypes=t.reduce((n,r)=>(n[r.name]=r,n),{})}}const Ib=new nO([new js("default",{sortParticipantsBy:Co}),new js("development",{sortParticipantsBy:Co}),new js("livestream",{sortParticipantsBy:cg}),new js("audio_room",{sortParticipantsBy:cg})]);class Pb{constructor(t){this.permission=t,this.disposeController=new AbortController,this.wasPrompted=!1,this.listeners=new Set,this.logger=we(["permissions"]);const n=this.disposeController.signal;this.ready=(async()=>{const r=i=>{this.setState("prompt")};if(!rO())return r();try{const i=await navigator.permissions.query({name:t.queryName});n.aborted||(this.setState(i.state),i.addEventListener("change",()=>this.setState(i.state),{signal:n}))}catch{r()}})()}dispose(){this.state=void 0,this.disposeController.abort()}async getState(){if(await this.ready,!this.state)throw new Error("BrowserPermission instance possibly disposed");return this.state}async prompt({forcePrompt:t=!1,throwOnNotAllowed:n=!1}={}){return await xt(`permission-prompt-${this.permission.queryName}`,async()=>{if(await this.getState()!=="prompt"||this.wasPrompted&&!t){const r=this.state==="granted";if(!r&&n)throw new Error("Permission was not granted previously, and prompting again is not allowed");return r}try{this.wasPrompted=!0;const r=await navigator.mediaDevices.getUserMedia(this.permission.constraints);return lO(r),this.setState("granted"),!0}catch(r){if(r&&typeof r=="object"&&"name"in r&&(r.name==="NotAllowedError"||r.name==="SecurityError")){if(this.logger("info","Browser permission was not granted",{permission:this.permission}),this.setState("denied"),n)throw r;return!1}throw this.logger("error","Failed to getUserMedia",{error:r,permission:this.permission}),r}})}listen(t){return this.listeners.add(t),this.state&&t(this.state),()=>this.listeners.delete(t)}asObservable(){return Ox(t=>this.listen(t),(t,n)=>n()).pipe(Ct(t=>t!=="denied"))}setState(t){this.state!==t&&(this.state=t,this.listeners.forEach(n=>n(t)))}}function rO(){var e;return!Je()&&typeof navigator<"u"&&!!((e=navigator.permissions)!=null&&e.query)}const Uh=(e,t)=>di((async()=>{let n=await navigator.mediaDevices.enumerateDevices();return n.some(i=>i.kind===t&&i.label==="")&&await e.prompt()&&(n=await navigator.mediaDevices.enumerateDevices()),n.filter(i=>i.kind===t&&i.label!==""&&i.deviceId!=="default")})()),iO=()=>typeof document>"u"?!1:"setSinkId"in document.createElement("audio"),Ob={audio:{autoGainControl:!0,noiseSuppression:!0,echoCancellation:!0}},Nb={video:{width:1280,height:720}},rs=pi(()=>new Pb({constraints:Ob,queryName:"microphone"})),Nc=pi(()=>new Pb({constraints:Nb,queryName:"camera"})),Cl=pi(()=>navigator.mediaDevices.addEventListener?qd(navigator.mediaDevices,"devicechange").pipe(Ct(()=>{}),Nx(500)):di([])),sO=pi(()=>bh(Cl(),rs().asObservable()).pipe(yl(void 0),vl(()=>Uh(rs(),"audioinput")),Lt(1))),oO=pi(()=>bh(Cl(),Nc().asObservable()).pipe(yl(void 0),vl(()=>Uh(Nc(),"videoinput")),Lt(1))),aO=pi(()=>bh(Cl(),rs().asObservable()).pipe(yl(void 0),vl(()=>Uh(rs(),"audiooutput")),Lt(1))),Ab=async e=>{const t=await navigator.mediaDevices.getUserMedia(e);return fs()&&navigator.mediaDevices.dispatchEvent(new Event("devicechange")),t};function Db(e){return e&&typeof e=="object"&&("name"in e&&e.name==="OverconstrainedError"||"message"in e&&typeof e.message=="string"&&e.message.startsWith("OverconstrainedError"))}const Lb=async e=>{const t={audio:{...Ob.audio,...e}};try{return await rs().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),await Ab(t)}catch(n){if(Db(n)&&(e!=null&&e.deviceId)){const{deviceId:r,...i}=e;return we(["devices"])("warn","Failed to get audio stream, will try again with relaxed constraints",{error:n,constraints:t,relaxedConstraints:i}),Lb(i)}throw we(["devices"])("error","Failed to get audio stream",{error:n,constraints:t}),n}},jb=async e=>{const t={video:{...Nb.video,...e}};try{return await Nc().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),await Ab(t)}catch(n){if(Db(n)&&(e!=null&&e.deviceId)){const{deviceId:r,...i}=e;return we(["devices"])("warn","Failed to get video stream, will try again with relaxed constraints",{error:n,constraints:t,relaxedConstraints:i}),jb(i)}throw we(["devices"])("error","Failed to get video stream",{error:n,constraints:t}),n}},cO=async e=>{try{return await navigator.mediaDevices.getDisplayMedia({video:!0,audio:{channelCount:{ideal:2},echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1},systemAudio:"include",...e})}catch(t){throw we(["devices"])("error","Failed to get screen share stream",t),t}},Ac=typeof navigator<"u"&&typeof navigator.mediaDevices<"u"?Cl().pipe(yl(void 0),vl(()=>navigator.mediaDevices.enumerateDevices()),Lt(1)):void 0,lO=e=>{e.active&&(e.getTracks().forEach(t=>{t.stop()}),typeof e.release=="function"&&e.release())};class $h{constructor(t,n,r){this.call=t,this.state=n,this.trackType=r,this.stopOnLeave=!0,this.subscriptions=[],this.isTrackStoppedDueToTrackEnd=!1,this.filters=[],this.statusChangeConcurrencyTag=Symbol("statusChangeConcurrencyTag"),this.filterRegistrationConcurrencyTag=Symbol("filterRegistrationConcurrencyTag"),this.dispose=()=>{this.subscriptions.forEach(i=>i())},this.logger=we([`${D[r].toLowerCase()} manager`]),Ac&&!Je()&&(this.trackType===D.AUDIO||this.trackType===D.VIDEO)&&this.handleDisconnectedOrReplacedDevices()}listDevices(){return this.getDevices()}get enabled(){return this.state.status==="enabled"}async enable(){this.state.prevStatus=this.state.optimisticStatus,this.state.optimisticStatus!=="enabled"&&(this.state.setPendingStatus("enabled"),await Su(this.statusChangeConcurrencyTag,async t=>{try{await this.unmuteStream(),this.state.setStatus("enabled")}finally{t.aborted||this.state.setPendingStatus(this.state.status)}}))}async disable(t=!1){this.state.prevStatus=this.state.optimisticStatus,!(!t&&this.state.optimisticStatus==="disabled")&&(this.state.setPendingStatus("disabled"),await Su(this.statusChangeConcurrencyTag,async n=>{try{const r=t||this.state.disableMode==="stop-tracks";await this.muteStream(r),this.state.setStatus("disabled")}finally{n.aborted||this.state.setPendingStatus(this.state.status)}}))}async statusChangeSettled(){await sP(this.statusChangeConcurrencyTag)}async resume(){this.state.prevStatus==="enabled"&&this.state.status!=="enabled"&&await this.enable()}async toggle(){return this.state.optimisticStatus==="enabled"?await this.disable():await this.enable()}registerFilter(t){const n={start:t,stop:void 0};return{registered:xt(this.filterRegistrationConcurrencyTag,async()=>{this.filters.push(n),await this.applySettingsToStream()}),unregister:()=>xt(this.filterRegistrationConcurrencyTag,async()=>{var i;(i=n.stop)==null||i.call(n),this.filters=this.filters.filter(s=>s!==n),await this.applySettingsToStream()})}}setDefaultConstraints(t){this.state.setDefaultConstraints(t)}async select(t){if(Je())throw new Error("This method is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for reference.");const n=this.state.selectedDevice;if(t!==n)try{this.state.setDevice(t),await this.applySettingsToStream()}catch(r){throw this.state.setDevice(n),r}}async applySettingsToStream(){await Su(this.statusChangeConcurrencyTag,async()=>{this.enabled&&(await this.muteStream(),await this.unmuteStream())})}getTracks(){var t;return((t=this.state.mediaStream)==null?void 0:t.getTracks())??[]}async muteStream(t=!0){if(!this.state.mediaStream)return;this.logger("debug",`${t?"Stopping":"Disabling"} stream`),this.call.state.callingState===V.JOINED&&await this.stopPublishStream(t),this.muteLocalStream(t),this.getTracks().every(r=>r.readyState==="ended")&&(this.state.mediaStream&&typeof this.state.mediaStream.release=="function"&&this.state.mediaStream.release(),this.state.setMediaStream(void 0,void 0),this.filters.forEach(r=>{var i;return(i=r.stop)==null?void 0:i.call(r)}))}muteTracks(){this.getTracks().forEach(t=>{t.enabled&&(t.enabled=!1)})}unmuteTracks(){this.getTracks().forEach(t=>{t.enabled||(t.enabled=!0)})}stopTracks(){this.getTracks().forEach(t=>{t.readyState==="live"&&t.stop()})}muteLocalStream(t){this.state.mediaStream&&(t?this.stopTracks():this.muteTracks())}async unmuteStream(){this.logger("debug","Starting stream");let t,n;if(this.state.mediaStream&&this.getTracks().every(r=>r.readyState==="live"))t=this.state.mediaStream,this.unmuteTracks();else{const i={...this.state.defaultConstraints,deviceId:this.state.selectedDevice?{exact:this.state.selectedDevice}:void 0},s=o=>async a=>{if(!o)return a;const l=await o;return a.getTracks().forEach(c=>{const d=c.stop;c.stop=function(){d.call(c),l.getTracks().forEach(u=>{u.kind===c.kind&&u.stop()})}}),l.getTracks().forEach(c=>{const d=()=>{a.getTracks().forEach(f=>{c.kind===f.kind&&(f.stop(),f.dispatchEvent(new Event("ended")))})};c.addEventListener("ended",d),this.subscriptions.push(()=>{c.removeEventListener("ended",d)})}),a};n=this.getStream(i),t=await this.filters.reduce((o,a)=>o.then(l=>{const{stop:c,output:d}=a.start(l);return a.stop=c,d}).then(s(o),l=>(this.logger("warn","Filter failed to start and will be ignored",l),o)),n)}if(this.call.state.callingState===V.JOINED&&await this.publishStream(t),this.state.mediaStream!==t){this.state.setMediaStream(t,await n);const r=async()=>{await this.statusChangeSettled(),this.enabled&&(this.isTrackStoppedDueToTrackEnd=!0,setTimeout(()=>{this.isTrackStoppedDueToTrackEnd=!1},2e3),await this.disable())};this.getTracks().forEach(i=>{i.addEventListener("ended",r),this.subscriptions.push(()=>i.removeEventListener("ended",r))})}}get mediaDeviceKind(){return this.trackType===D.AUDIO?"audioinput":this.trackType===D.VIDEO?"videoinput":""}handleDisconnectedOrReplacedDevices(){this.subscriptions.push(Wt(ii([Ac.pipe(Dx()),this.state.selectedDevice$]),async([[t,n],r])=>{try{if(!r)return;await this.statusChangeSettled();let i=!1,s=!1;const o=this.findDeviceInList(n,r),a=this.findDeviceInList(t,r);!o&&a?i=!0:o&&a&&o.deviceId===a.deviceId&&o.groupId!==a.groupId&&(s=!0),i&&(await this.disable(),await this.select(void 0)),s&&(this.isTrackStoppedDueToTrackEnd&&this.state.status==="disabled"?(await this.enable(),this.isTrackStoppedDueToTrackEnd=!1):await this.applySettingsToStream())}catch(i){this.logger("warn","Unexpected error while handling disconnected or replaced device",i)}}))}findDeviceInList(t,n){return t.find(r=>r.deviceId===n&&r.kind===this.mediaDeviceKind)}}class Vh{constructor(t="stop-tracks",n){this.disableMode=t,this.statusSubject=new ce(void 0),this.optimisticStatusSubject=new ce(void 0),this.mediaStreamSubject=new ce(void 0),this.selectedDeviceSubject=new ce(void 0),this.defaultConstraintsSubject=new ce(void 0),this.mediaStream$=this.mediaStreamSubject.asObservable(),this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(Et()),this.status$=this.statusSubject.asObservable().pipe(Et()),this.optimisticStatus$=this.optimisticStatusSubject.asObservable().pipe(Et()),this.defaultConstraints$=this.defaultConstraintsSubject.asObservable(),this.getCurrentValue=an,this.setCurrentValue=Nr,this.hasBrowserPermission$=n?n.asObservable().pipe(Lt(1)):K0(!0)}get status(){return this.getCurrentValue(this.status$)}get optimisticStatus(){return this.getCurrentValue(this.optimisticStatus$)}get selectedDevice(){return this.getCurrentValue(this.selectedDevice$)}get mediaStream(){return this.getCurrentValue(this.mediaStream$)}setStatus(t){this.setCurrentValue(this.statusSubject,t)}setPendingStatus(t){this.setCurrentValue(this.optimisticStatusSubject,t)}setMediaStream(t,n){this.setCurrentValue(this.mediaStreamSubject,t),n&&this.setDevice(this.getDeviceIdFromStream(n))}setDevice(t){this.setCurrentValue(this.selectedDeviceSubject,t)}get defaultConstraints(){return this.getCurrentValue(this.defaultConstraints$)}setDefaultConstraints(t){this.setCurrentValue(this.defaultConstraintsSubject,t)}}class uO extends Vh{constructor(){super("stop-tracks",Nc()),this.directionSubject=new ce(void 0),this.direction$=this.directionSubject.asObservable().pipe(Et())}get direction(){return this.getCurrentValue(this.direction$)}setDirection(t){this.setCurrentValue(this.directionSubject,t)}setMediaStream(t,n){var r;if(super.setMediaStream(t,n),t){const i=Je()?this.direction:((r=t.getVideoTracks()[0])==null?void 0:r.getSettings().facingMode)==="environment"?"back":"front";this.setDirection(i)}}getDeviceIdFromStream(t){const[n]=t.getVideoTracks();return n==null?void 0:n.getSettings().deviceId}}const dO=()=>/Mobi/i.test(navigator.userAgent);class fO extends $h{constructor(t){super(t,new uO,D.VIDEO),this.targetResolution={width:1280,height:720}}isDirectionSupportedByDevice(){return Je()||dO()}async selectDirection(t){this.isDirectionSupportedByDevice()?(this.state.setDirection(t),this.state.setDevice(void 0),await this.applySettingsToStream()):this.logger("warn","Camera direction ignored for desktop devices")}async flip(){const t=this.state.direction==="front"?"back":"front";await this.selectDirection(t)}async selectTargetResolution(t){if(this.targetResolution.height=t.height,this.targetResolution.width=t.width,this.state.optimisticStatus==="enabled")try{await this.statusChangeSettled()}catch(n){this.logger("warn","could not apply target resolution",n)}if(this.enabled&&this.state.mediaStream){const[n]=this.state.mediaStream.getVideoTracks();if(!n)return;const{width:r,height:i}=n.getSettings();(r!==this.targetResolution.width||i!==this.targetResolution.height)&&(await this.applySettingsToStream(),this.logger("debug",`${r}x${i} target resolution applied to media stream`))}}setPreferredCodec(t){this.call.updatePublishOptions({preferredCodec:t})}getDevices(){return oO()}getStream(t){return t.width=this.targetResolution.width,t.height=this.targetResolution.height,!t.deviceId&&this.state.direction&&this.isDirectionSupportedByDevice()&&(t.facingMode=this.state.direction==="front"?"user":"environment"),jb(t)}publishStream(t){return this.call.publishVideoStream(t)}stopPublishStream(t){return this.call.stopPublish(D.VIDEO,t)}}class hO extends Vh{constructor(t){super(t,rs()),this.speakingWhileMutedSubject=new ce(!1),this.speakingWhileMuted$=this.speakingWhileMutedSubject.asObservable().pipe(Et())}get speakingWhileMuted(){return this.getCurrentValue(this.speakingWhileMuted$)}setSpeakingWhileMuted(t){this.setCurrentValue(this.speakingWhileMutedSubject,t)}getDeviceIdFromStream(t){const[n]=t.getAudioTracks();return n==null?void 0:n.getSettings().deviceId}}const pO=500,mO=150,gO=128,vO=(e,t,n={})=>{const{detectionFrequencyInMs:r=pO,audioLevelThreshold:i=mO,fftSize:s=gO,destroyStreamOnStop:o=!0}=n,a=new AudioContext,l=a.createAnalyser();l.fftSize=s;const c=a.createMediaStreamSource(e);c.connect(l);const d=setInterval(()=>{var p;const f=new Uint8Array(l.frequencyBinCount);l.getByteFrequencyData(f);const u=f.some(v=>v>=i),h=f.reduce((v,g)=>v+g,0)/f.length,m=h>i?100:Math.round(h/i*100);(p=e.getAudioTracks()[0])!=null&&p.enabled?t({isSoundDetected:u,audioLevel:m}):t({isSoundDetected:!1,audioLevel:0})},r);return async function(){clearInterval(d),c.disconnect(),l.disconnect(),a.state!=="closed"&&await a.close(),o&&e.getTracks().forEach(u=>{u.stop(),e.removeTrack(u)})}},yO=.2;class SO{constructor(){this.pc1=new RTCPeerConnection({}),this.pc2=new RTCPeerConnection({})}async start(){try{this.cleanupAudioStream();const t=await navigator.mediaDevices.getUserMedia({audio:!0});this.audioStream=t,this.pc1.addEventListener("icecandidate",async s=>{await this.pc2.addIceCandidate(s.candidate)}),this.pc2.addEventListener("icecandidate",async s=>{await this.pc1.addIceCandidate(s.candidate)}),t.getTracks().forEach(s=>this.pc1.addTrack(s,t));const n=await this.pc1.createOffer({});await this.pc2.setRemoteDescription(n),await this.pc1.setLocalDescription(n);const r=await this.pc2.createAnswer();await this.pc1.setRemoteDescription(r),await this.pc2.setLocalDescription(r),t.getAudioTracks().forEach(s=>s.enabled=!1)}catch(t){console.error("Error connecting and negotiating between PeerConnections:",t)}}stop(){this.pc1.close(),this.pc2.close(),this.cleanupAudioStream(),this.intervalId&&clearInterval(this.intervalId)}onSpeakingDetectedStateChange(t){return this.intervalId=setInterval(async()=>{const n=await this.pc1.getStats(),i=Oc(n).find(s=>s.type==="media-source"&&s.kind==="audio");if(i){const{audioLevel:s}=i;s&&(s>=yO?t({isSoundDetected:!0,audioLevel:s}):t({isSoundDetected:!1,audioLevel:0}))}},1e3),()=>{clearInterval(this.intervalId)}}cleanupAudioStream(){this.audioStream&&(this.audioStream.getTracks().forEach(t=>t.stop()),typeof this.audioStream.release=="function"&&this.audioStream.release())}}class bO extends $h{constructor(t,n=Je()?"disable-tracks":"stop-tracks"){super(t,new hO(n),D.AUDIO),this.speakingWhileMutedNotificationEnabled=!0,this.soundDetectorConcurrencyTag=Symbol("soundDetectorConcurrencyTag"),this.subscriptions.push(Wt(ii([this.call.state.callingState$,this.call.state.ownCapabilities$,this.state.selectedDevice$,this.state.status$]),async([r,i,s,o])=>{try{if(r===V.LEFT&&await this.stopSpeakingWhileMutedDetection(),r!==V.JOINED||!this.speakingWhileMutedNotificationEnabled)return;i.includes(ee.SEND_AUDIO)?o==="disabled"?await this.startSpeakingWhileMutedDetection(s):await this.stopSpeakingWhileMutedDetection():await this.stopSpeakingWhileMutedDetection()}catch(a){this.logger("warn","Could not enable speaking while muted",a)}})),this.subscriptions.push(Wt(this.call.state.callingState$,r=>{var s,o;if(!this.noiseCancellationRegistration||!this.noiseCancellation)return;((o=(s=this.call.state.settings)==null?void 0:s.audio.noise_cancellation)==null?void 0:o.mode)===gu.AUTO_ON&&r===V.JOINED?this.noiseCancellationRegistration.then(()=>{var a;return(a=this.noiseCancellation)==null?void 0:a.enable()}).catch(a=>(this.logger("warn","Failed to enable noise cancellation",a),this.call.notifyNoiseCancellationStopped())):r===V.LEFT&&this.noiseCancellationRegistration.then(()=>{var a;return(a=this.noiseCancellation)==null?void 0:a.disable()}).catch(a=>{this.logger("warn","Failed to disable noise cancellation",a)})}))}async enableNoiseCancellation(t){if(Je())throw new Error("Noise cancellation is not supported in React Native");const{ownCapabilities:n,settings:r}=this.call.state;if(!n.includes(ee.ENABLE_NOISE_CANCELLATION))throw new Error("Noise cancellation is not available.");const s=r==null?void 0:r.audio.noise_cancellation;if(!s||s.mode===gu.DISABLED)throw new Error("Noise cancellation is disabled for this call type.");try{this.noiseCancellation=t,this.noiseCancellationChangeUnsubscribe=this.noiseCancellation.on("change",a=>{a?this.call.notifyNoiseCancellationStarting().catch(l=>{this.logger("warn","notifyNoiseCancellationStart failed",l)}):this.call.notifyNoiseCancellationStopped().catch(l=>{this.logger("warn","notifyNoiseCancellationStop failed",l)})});const o=this.registerFilter(t.toFilter());this.noiseCancellationRegistration=o.registered,this.unregisterNoiseCancellation=o.unregister,await this.noiseCancellationRegistration,s.mode===gu.AUTO_ON&&this.call.state.callingState===V.JOINED&&t.enable()}catch(o){this.logger("warn","Failed to enable noise cancellation",o),await this.disableNoiseCancellation().catch(a=>{this.logger("warn","Failed to disable noise cancellation",a)})}}async disableNoiseCancellation(){var t;if(Je())throw new Error("Noise cancellation is not supported in React Native");await(((t=this.unregisterNoiseCancellation)==null?void 0:t.call(this))??Promise.resolve()).then(()=>{var n;return(n=this.noiseCancellation)==null?void 0:n.disable()}).then(()=>{var n;return(n=this.noiseCancellationChangeUnsubscribe)==null?void 0:n.call(this)}).catch(n=>{this.logger("warn","Failed to unregister noise cancellation",n)}),await this.call.notifyNoiseCancellationStopped()}async enableSpeakingWhileMutedNotification(){this.speakingWhileMutedNotificationEnabled=!0,this.state.status==="disabled"&&await this.startSpeakingWhileMutedDetection(this.state.selectedDevice)}async disableSpeakingWhileMutedNotification(){this.speakingWhileMutedNotificationEnabled=!1,await this.stopSpeakingWhileMutedDetection()}getDevices(){return sO()}getStream(t){return Lb(t)}publishStream(t){return this.call.publishAudioStream(t)}stopPublishStream(t){return this.call.stopPublish(D.AUDIO,t)}async startSpeakingWhileMutedDetection(t){await xt(this.soundDetectorConcurrencyTag,async()=>{var n;if(await this.stopSpeakingWhileMutedDetection(),Je()){this.rnSpeechDetector=new SO,await this.rnSpeechDetector.start();const r=(n=this.rnSpeechDetector)==null?void 0:n.onSpeakingDetectedStateChange(i=>{this.state.setSpeakingWhileMuted(i.isSoundDetected)});this.soundDetectorCleanup=()=>{var i;r(),(i=this.rnSpeechDetector)==null||i.stop(),this.rnSpeechDetector=void 0}}else{const r=await this.getStream({deviceId:t});this.soundDetectorCleanup=vO(r,i=>{this.state.setSpeakingWhileMuted(i.isSoundDetected)})}})}async stopSpeakingWhileMutedDetection(){await xt(this.soundDetectorConcurrencyTag,async()=>{if(!this.soundDetectorCleanup)return;const t=this.soundDetectorCleanup;this.soundDetectorCleanup=void 0,this.state.setSpeakingWhileMuted(!1),await t()})}}class wO extends Vh{constructor(){super(...arguments),this.audioEnabledSubject=new ce(!0),this.settingsSubject=new ce(void 0),this.audioEnabled$=this.audioEnabledSubject.asObservable().pipe(Et()),this.settings$=this.settingsSubject.asObservable(),this.getDeviceIdFromStream=t=>{const[n]=t.getTracks();return n==null?void 0:n.getSettings().deviceId}}get audioEnabled(){return this.getCurrentValue(this.audioEnabled$)}setAudioEnabled(t){this.setCurrentValue(this.audioEnabledSubject,t)}get settings(){return this.getCurrentValue(this.settings$)}setSettings(t){this.setCurrentValue(this.settingsSubject,t)}}class CO extends $h{constructor(t){super(t,new wO,D.SCREEN_SHARE),this.subscriptions.push(Wt(t.state.settings$,n=>{const r=n==null?void 0:n.screensharing.target_resolution;r&&this.setDefaultConstraints({video:{width:r.width,height:r.height}})}))}enableScreenShareAudio(){this.state.setAudioEnabled(!0)}async disableScreenShareAudio(){var t;this.state.setAudioEnabled(!1),(t=this.call.publisher)!=null&&t.isPublishing(D.SCREEN_SHARE_AUDIO)&&await this.call.stopPublish(D.SCREEN_SHARE_AUDIO,!0)}getSettings(){return this.state.settings}setSettings(t){this.state.setSettings(t)}getDevices(){return K0([])}getStream(t){return this.state.audioEnabled||(t.audio=!1),cO(t)}publishStream(t){return this.call.publishScreenShareStream(t)}async stopPublishStream(t){await this.call.stopPublish(D.SCREEN_SHARE,t),await this.call.stopPublish(D.SCREEN_SHARE_AUDIO,t)}async select(t){throw new Error("This method is not supported in for Screen Share")}}class kO{constructor(){this.selectedDeviceSubject=new ce(""),this.volumeSubject=new ce(1),this.isDeviceSelectionSupported=iO(),this.getCurrentValue=an,this.setCurrentValue=Nr,this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(Et()),this.volume$=this.volumeSubject.asObservable().pipe(Et())}get selectedDevice(){return this.getCurrentValue(this.selectedDevice$)}get volume(){return this.getCurrentValue(this.volume$)}setDevice(t){this.setCurrentValue(this.selectedDeviceSubject,t)}setVolume(t){this.setCurrentValue(this.volumeSubject,t)}}class EO{constructor(t){this.state=new kO,this.subscriptions=[],this.dispose=()=>{this.subscriptions.forEach(n=>n.unsubscribe())},this.call=t,Ac&&!Je()&&this.subscriptions.push(ii([Ac,this.state.selectedDevice$]).subscribe(([n,r])=>{if(!r)return;n.find(s=>s.deviceId===r&&s.kind==="audiooutput")||this.select("")}))}listDevices(){if(Je())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");return aO()}select(t){if(Je())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");this.state.setDevice(t)}setVolume(t){if(Je())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(t&&(t<0||t>1))throw new Error("Volume must be between 0 and 1");this.state.setVolume(t)}setParticipantVolume(t,n){if(Je())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(n&&(n<0||n>1))throw new Error("Volume must be between 0 and 1, or undefined");this.call.state.updateParticipant(t,{audioVolume:n})}}class Is{constructor({type:t,id:n,streamClient:r,members:i,ownCapabilities:s,sortParticipantsBy:o,clientStore:a,ringing:l=!1,watching:c=!1}){this.state=new kb,this.permissionsContext=new tO,this.dispatcher=new WI,this.sfuClientTag=0,this.reconnectConcurrencyTag=Symbol("reconnectConcurrencyTag"),this.reconnectAttempts=0,this.reconnectStrategy=le.UNSPECIFIED,this.fastReconnectDeadlineSeconds=0,this.disconnectionTimeoutSeconds=0,this.lastOfflineTimestamp=0,this.trackPublishOrder=[],this.hasJoinedOnce=!1,this.deviceSettingsAppliedOnce=!1,this.initialized=!1,this.joinLeaveConcurrencyTag=Symbol("joinLeaveConcurrencyTag"),this.leaveCallHooks=new Set,this.streamClientEventHandlers=new Map,this.handleOwnCapabilitiesUpdated=async u=>{if(this.permissionsContext.setPermissions(u),!this.publisher)return;const h={[ee.SEND_AUDIO]:D.AUDIO,[ee.SEND_VIDEO]:D.VIDEO,[ee.SCREENSHARE]:D.SCREEN_SHARE};for(const[m,p]of Object.entries(h))if(!this.permissionsContext.hasPermission(m))try{switch(p){case D.AUDIO:this.microphone.enabled&&await this.microphone.disable();break;case D.VIDEO:this.camera.enabled&&await this.camera.disable();break;case D.SCREEN_SHARE:this.screenShare.enabled&&await this.screenShare.disable();break}}catch(g){this.logger("error","Can't disable mic/camera/screenshare after revoked permissions",g)}},this.on=(u,h)=>{if(ag(u))return this.dispatcher.on(u,h);const m=this.streamClient.on(u,p=>{const v=p;v.call_cid&&v.call_cid===this.cid&&h(v)});return this.streamClientEventHandlers.set(h,m),()=>{this.off(u,h)}},this.off=(u,h)=>{if(ag(u))return this.dispatcher.off(u,h);const m=this.streamClientEventHandlers.get(h);m&&m()},this.leave=async({reject:u,reason:h="user is leaving the call"}={})=>{await xt(this.joinLeaveConcurrencyTag,async()=>{var v,g,y,S,w;const m=this.state.callingState;if(m===V.LEFT)throw new Error("Cannot leave call that has already been left.");if(m===V.JOINING&&await new Promise(E=>{this.state.callingState$.pipe(Kd(T=>T!==V.JOINED,!0)).subscribe(()=>E())}),m===V.RINGING&&u!==!1)if(u)await this.reject(h);else{const k=this.state.remoteParticipants.length>0;this.isCreatedByMe&&!k&&await this.reject("cancel")}(v=this.statsReporter)==null||v.stop(),this.statsReporter=void 0,(g=this.sfuStatsReporter)==null||g.stop(),this.sfuStatsReporter=void 0,(y=this.subscriber)==null||y.close(),this.subscriber=void 0,(S=this.publisher)==null||S.close({stopTracks:!0}),this.publisher=void 0,await((w=this.sfuClient)==null?void 0:w.leaveAndClose(h)),this.sfuClient=void 0,this.dynascaleManager.setSfuClient(void 0),this.state.setCallingState(V.LEFT),this.leaveCallHooks.forEach(k=>k()),this.initialized=!1,this.hasJoinedOnce=!1,this.clientStore.unregisterCall(this),this.camera.dispose(),this.microphone.dispose(),this.screenShare.dispose(),this.speaker.dispose();const p=[];this.camera.stopOnLeave&&p.push(this.camera.disable(!0)),this.microphone.stopOnLeave&&p.push(this.microphone.disable(!0)),this.screenShare.stopOnLeave&&p.push(this.screenShare.disable(!0)),await Promise.all(p)})},this.updateFromRingingEvent=async u=>{await this.setup();const h=this.state.members.find(p=>p.user.id===u.call.created_by.id);h?this.state.setMembers([h,...u.members]):this.state.setMembers(u.members),this.state.updateFromCallResponse(u.call),this.watching=!0,this.ringingSubject.next(!0);const m=this.clientStore.calls.filter(p=>p.cid!==this.cid);this.clientStore.setCalls([this,...m]),await this.applyDeviceConfig(!1)},this.get=async u=>{await this.setup();const h=await this.streamClient.get(this.streamClientBasePath,u);return this.state.updateFromCallResponse(h.call),this.state.setMembers(h.members),this.state.setOwnCapabilities(h.own_capabilities),(u!=null&&u.ring||this.ringing)&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),await this.applyDeviceConfig(!1),h},this.getOrCreate=async u=>{await this.setup();const h=await this.streamClient.post(this.streamClientBasePath,u);return this.state.updateFromCallResponse(h.call),this.state.setMembers(h.members),this.state.setOwnCapabilities(h.own_capabilities),(u!=null&&u.ring||this.ringing)&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),await this.applyDeviceConfig(!1),h},this.create=async u=>this.getOrCreate(u),this.ring=async()=>await this.get({ring:!0}),this.notify=async()=>await this.get({notify:!0}),this.accept=async()=>this.streamClient.post(`${this.streamClientBasePath}/accept`),this.reject=async u=>this.streamClient.post(`${this.streamClientBasePath}/reject`,{reason:u}),this.join=async u=>{var I,U,O,B;const h=Date.now();await this.setup();const m=this.state.callingState;if([V.JOINED,V.JOINING].includes(m))throw new Error("Illegal State: call.join() shall be called only once");this.joinCallData=u,this.logger("debug","Starting join flow"),this.state.setCallingState(V.JOINING);const p=this.reconnectStrategy===le.MIGRATE,v=this.reconnectStrategy===le.REJOIN,g=this.reconnectStrategy===le.FAST;let y=(I=this.sfuStatsReporter)==null?void 0:I.options;if(!this.credentials||!y||v||p)try{const P=await this.doJoinRequest(u);this.credentials=P.credentials,y=P.stats_options}catch(P){throw this.state.setCallingState(m),P}const S=this.sfuClient,w=S==null?void 0:S.sessionId,k=!!(S!=null&&S.isHealthy),E=v||p||!k?new jn({logTag:String(this.sfuClientTag++),dispatcher:this.dispatcher,credentials:this.credentials,streamClient:this.streamClient,sessionId:v?void 0:w,onSignalClose:()=>this.handleSfuSignalClose(E)}):S;this.sfuClient=E,this.dynascaleManager.setSfuClient(E);const T=rg();if(S!==E){const P=await zI("recvonly"),j=this.reconnectStrategy!==le.UNSPECIFIED?this.getReconnectDetails(u==null?void 0:u.migrating_from,w):void 0,{callState:H,fastReconnectDeadlineSeconds:$}=await E.join({subscriberSdp:P,publisherSdp:"",clientDetails:T,fastReconnect:g,reconnectDetails:j});this.fastReconnectDeadlineSeconds=$,H&&this.state.updateFromSfuCallState(H,E.sessionId,j)}if(p||this.state.setCallingState(V.JOINED),this.hasJoinedOnce=!0,g)await this.restoreICE(E,{includeSubscriber:!1});else{const P=_P(this.credentials.ice_servers);this.initPublisherAndSubscriber({sfuClient:E,connectionConfig:P,clientDetails:T,statsOptions:y,closePreviousInstances:!p})}if(!v&&!g&&!p&&((U=this.sfuStatsReporter)==null||U.sendTelemetryData({data:{oneofKind:"connectionTimeSeconds",connectionTimeSeconds:(Date.now()-h)/1e3}})),v){const P=le[this.reconnectStrategy];await(S==null?void 0:S.leaveAndClose(`Closing previous WS after reconnect with strategy: ${P}`))}else k||S==null||S.close(jn.DISPOSE_OLD_SOCKET,"Closing unhealthy WS after reconnect");this.deviceSettingsAppliedOnce||(await this.applyDeviceConfig(!0),this.deviceSettingsAppliedOnce=!0),(O=this.joinCallData)==null||delete O.ring,(B=this.joinCallData)==null||delete B.notify,this.logger("info",`Joined call ${this.cid}`)},this.getReconnectDetails=(u,h)=>{var g;const m=this.reconnectStrategy,p=m===le.REJOIN,v=((g=this.publisher)==null?void 0:g.getAnnouncedTracks())||[];return{strategy:m,announcedTracks:v,subscriptions:this.dynascaleManager.trackSubscriptions,reconnectAttempt:this.reconnectAttempts,fromSfuId:u||"",previousSessionId:p&&h||""}},this.restoreICE=async(u,h={})=>{const{includeSubscriber:m=!0,includePublisher:p=!0}=h;this.subscriber&&(this.subscriber.setSfuClient(u),m&&await this.subscriber.restartIce()),this.publisher&&(this.publisher.setSfuClient(u),p&&await this.publisher.restartIce())},this.initPublisherAndSubscriber=u=>{var S,w,k,E;const{sfuClient:h,connectionConfig:m,clientDetails:p,statsOptions:v,closePreviousInstances:g}=u;if(g&&this.subscriber&&this.subscriber.close(),this.subscriber=new EP({sfuClient:h,dispatcher:this.dispatcher,state:this.state,connectionConfig:m,logTag:String(this.sfuClientTag),onUnrecoverableError:()=>{this.reconnect(le.REJOIN).catch(T=>{this.logger("warn","[Reconnect] Error reconnecting after a subscriber error",T)})}}),!(((S=this.streamClient.user)==null?void 0:S.type)==="anonymous")){g&&this.publisher&&this.publisher.close({stopTracks:!1});const T=(w=this.state.settings)==null?void 0:w.audio,I=!!(T!=null&&T.opus_dtx_enabled),U=!!(T!=null&&T.redundant_coding_enabled);this.publisher=new kP({sfuClient:h,dispatcher:this.dispatcher,state:this.state,connectionConfig:m,isDtxEnabled:I,isRedEnabled:U,logTag:String(this.sfuClientTag),onUnrecoverableError:()=>{this.reconnect(le.REJOIN).catch(O=>{this.logger("warn","[Reconnect] Error reconnecting after a publisher error",O)})}})}(k=this.statsReporter)==null||k.stop(),this.statsReporter=YP({subscriber:this.subscriber,publisher:this.publisher,state:this.state,datacenter:h.edgeName}),(E=this.sfuStatsReporter)==null||E.stop(),(v==null?void 0:v.reporting_interval_ms)>0&&(this.sfuStatsReporter=new QP(h,{clientDetails:p,options:v,subscriber:this.subscriber,publisher:this.publisher,microphone:this.microphone,camera:this.camera,state:this.state}),this.sfuStatsReporter.start())},this.doJoinRequest=async u=>{const h=await this.streamClient.getLocationHint(),m={...u,location:h},p=await this.streamClient.post(`${this.streamClientBasePath}/join`,m);return this.state.updateFromCallResponse(p.call),this.state.setMembers(p.members),this.state.setOwnCapabilities(p.own_capabilities),u!=null&&u.ring&&!this.ringing&&this.ringingSubject.next(!0),this.ringing&&!this.isCreatedByMe&&await this.accept(),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),p},this.handleSfuSignalClose=u=>{this.logger("debug","[Reconnect] SFU signal connection closed"),this.state.callingState!==V.JOINING&&(u.isLeaving||this.reconnect(le.REJOIN).catch(h=>{this.logger("warn","[Reconnect] Error reconnecting",h)}))},this.reconnect=async u=>{if(!(this.state.callingState===V.RECONNECTING||this.state.callingState===V.RECONNECTING_FAILED))return xt(this.reconnectConcurrencyTag,async()=>{var m;this.logger("info",`[Reconnect] Reconnecting with strategy ${le[u]}`);let h=Date.now();this.reconnectStrategy=u;do{if(this.disconnectionTimeoutSeconds>0&&(Date.now()-h)/1e3>this.disconnectionTimeoutSeconds){this.logger("warn","[Reconnect] Stopping reconnection attempts after reaching disconnection timeout"),this.state.setCallingState(V.RECONNECTING_FAILED);return}this.reconnectStrategy!==le.FAST&&this.reconnectAttempts++;const p=le[this.reconnectStrategy];try{switch(await((m=this.networkAvailableTask)==null?void 0:m.promise),this.reconnectStrategy){case le.UNSPECIFIED:case le.DISCONNECT:this.logger("debug",`[Reconnect] No-op strategy ${p}`);break;case le.FAST:await this.reconnectFast();break;case le.REJOIN:await this.reconnectRejoin();break;case le.MIGRATE:await this.reconnectMigrate();break;default:Ic(this.reconnectStrategy,"Unknown reconnection strategy");break}break}catch(v){if(v instanceof eb&&v.unrecoverable){this.logger("warn","[Reconnect] Can't reconnect due to coordinator unrecoverable error",v),this.state.setCallingState(V.RECONNECTING_FAILED);return}this.logger("warn",`[Reconnect] ${p} (${this.reconnectAttempts}) failed. Attempting with REJOIN`,v),await zi(500),this.reconnectStrategy=le.REJOIN}}while(this.state.callingState!==V.JOINED&&this.state.callingState!==V.RECONNECTING_FAILED&&this.state.callingState!==V.LEFT)})},this.reconnectFast=async()=>{var h;let u=Date.now();this.reconnectStrategy=le.FAST,this.state.setCallingState(V.RECONNECTING),await this.join(this.joinCallData),(h=this.sfuStatsReporter)==null||h.sendTelemetryData({data:{oneofKind:"reconnection",reconnection:{timeSeconds:(Date.now()-u)/1e3,strategy:le.FAST}}})},this.reconnectRejoin=async()=>{var h;let u=Date.now();this.reconnectStrategy=le.REJOIN,this.state.setCallingState(V.RECONNECTING),await this.join(this.joinCallData),await this.restorePublishedTracks(),this.restoreSubscribedTracks(),(h=this.sfuStatsReporter)==null||h.sendTelemetryData({data:{oneofKind:"reconnection",reconnection:{timeSeconds:(Date.now()-u)/1e3,strategy:le.REJOIN}}})},this.reconnectMigrate=async()=>{var g,y;let u=Date.now();const h=this.sfuClient;if(!h)throw new Error("Cannot migrate without an active SFU client");this.reconnectStrategy=le.MIGRATE,this.state.setCallingState(V.MIGRATING);const m=this.subscriber,p=this.publisher;m==null||m.detachEventHandlers(),p==null||p.detachEventHandlers();const v=ko(h.enterMigration());try{const S=h.edgeName;await this.join({...this.joinCallData,migrating_from:S})}finally{(g=this.joinCallData)==null||delete g.migrating_from}await this.restorePublishedTracks(),this.restoreSubscribedTracks();try{await v(),this.state.setCallingState(V.JOINED)}finally{m==null||m.close(),p==null||p.close({stopTracks:!1}),h.close()}(y=this.sfuStatsReporter)==null||y.sendTelemetryData({data:{oneofKind:"reconnection",reconnection:{timeSeconds:(Date.now()-u)/1e3,strategy:le.MIGRATE}}})},this.registerReconnectHandlers=()=>{const u=this.on("goAway",()=>{this.reconnect(le.MIGRATE).catch(p=>{this.logger("warn","[Reconnect] Error reconnecting",p)})}),h=this.on("error",p=>{const{reconnectStrategy:v}=p;v!==le.UNSPECIFIED&&(v===le.DISCONNECT?this.leave({reason:"SFU instructed to disconnect"}).catch(g=>{this.logger("warn","Can't leave call after disconnect request",g)}):this.reconnect(v).catch(g=>{this.logger("warn","[Reconnect] Error reconnecting",g)}))}),m=this.streamClient.on("network.changed",p=>{var v,g,y,S;if(p.online)this.logger("debug","[Reconnect] Going online"),(g=this.sfuClient)==null||g.close(jn.DISPOSE_OLD_SOCKET,"Closing WS to reconnect after going online"),(y=this.networkAvailableTask)==null||y.resolve(),this.networkAvailableTask=void 0,(S=this.sfuStatsReporter)==null||S.start();else{if(this.logger("debug","[Reconnect] Going offline"),!this.hasJoinedOnce)return;this.lastOfflineTimestamp=Date.now();const w=Ls();w.promise.then(()=>{let k=le.FAST;this.lastOfflineTimestamp&&(Date.now()-this.lastOfflineTimestamp)/1e3>this.fastReconnectDeadlineSeconds&&(k=le.REJOIN),this.reconnect(k).catch(E=>{this.logger("warn","[Reconnect] Error reconnecting after going online",E)})}),this.networkAvailableTask=w,(v=this.sfuStatsReporter)==null||v.stop(),this.state.setCallingState(V.OFFLINE)}});this.leaveCallHooks.add(u),this.leaveCallHooks.add(h),this.leaveCallHooks.add(m)},this.restorePublishedTracks=async()=>{for(const u of this.trackPublishOrder)switch(u){case D.AUDIO:const h=this.microphone.state.mediaStream;h&&await this.publishAudioStream(h);break;case D.VIDEO:const m=this.camera.state.mediaStream;m&&await this.publishVideoStream(m);break;case D.SCREEN_SHARE:const p=this.screenShare.state.mediaStream;p&&await this.publishScreenShareStream(p);break;case D.SCREEN_SHARE_AUDIO:case D.UNSPECIFIED:break;default:Ic(u,"Unknown track type");break}},this.restoreSubscribedTracks=()=>{const{remoteParticipants:u}=this.state;u.length<=0||this.dynascaleManager.applyTrackSubscriptions(void 0)},this.publishVideoStream=async u=>{if(!this.sfuClient)throw new Error("Call not joined yet.");if(await this.sfuClient.joinTask,!this.permissionsContext.hasPermission(ee.SEND_VIDEO))throw new Error("No permission to publish video");if(!this.publisher)throw new Error("Publisher is not initialized");const[h]=u.getVideoTracks();if(!h)throw new Error("There is no video track in the stream");this.trackPublishOrder.includes(D.VIDEO)||this.trackPublishOrder.push(D.VIDEO),await this.publisher.publishStream(u,h,D.VIDEO,this.publishOptions)},this.publishAudioStream=async u=>{if(!this.sfuClient)throw new Error("Call not joined yet.");if(await this.sfuClient.joinTask,!this.permissionsContext.hasPermission(ee.SEND_AUDIO))throw new Error("No permission to publish audio");if(!this.publisher)throw new Error("Publisher is not initialized");const[h]=u.getAudioTracks();if(!h)throw new Error("There is no audio track in the stream");this.trackPublishOrder.includes(D.AUDIO)||this.trackPublishOrder.push(D.AUDIO),await this.publisher.publishStream(u,h,D.AUDIO)},this.publishScreenShareStream=async u=>{if(!this.sfuClient)throw new Error("Call not joined yet.");if(await this.sfuClient.joinTask,!this.permissionsContext.hasPermission(ee.SCREENSHARE))throw new Error("No permission to publish screen share");if(!this.publisher)throw new Error("Publisher is not initialized");const[h]=u.getVideoTracks();if(!h)throw new Error("There is no screen share track in the stream");this.trackPublishOrder.includes(D.SCREEN_SHARE)||this.trackPublishOrder.push(D.SCREEN_SHARE);const m={screenShareSettings:this.screenShare.getSettings()};await this.publisher.publishStream(u,h,D.SCREEN_SHARE,m);const[p]=u.getAudioTracks();p&&(this.trackPublishOrder.includes(D.SCREEN_SHARE_AUDIO)||this.trackPublishOrder.push(D.SCREEN_SHARE_AUDIO),await this.publisher.publishStream(u,p,D.SCREEN_SHARE_AUDIO,m))},this.stopPublish=async(u,h=!0)=>{var m;this.logger("info",`stopPublish ${D[u]}, stop tracks: ${h}`),await((m=this.publisher)==null?void 0:m.unpublishStream(u,h))},this.notifyNoiseCancellationStarting=async()=>{var u;return(u=this.sfuClient)==null?void 0:u.startNoiseCancellation().catch(h=>{this.logger("warn","Failed to notify start of noise cancellation",h)})},this.notifyNoiseCancellationStopped=async()=>{var u;return(u=this.sfuClient)==null?void 0:u.stopNoiseCancellation().catch(h=>{this.logger("warn","Failed to notify stop of noise cancellation",h)})},this.startReportingStatsFor=u=>{var h;return(h=this.statsReporter)==null?void 0:h.startReportingStatsFor(u)},this.stopReportingStatsFor=u=>{var h;return(h=this.statsReporter)==null?void 0:h.stopReportingStatsFor(u)},this.resetReaction=u=>{this.state.updateParticipant(u,{reaction:void 0})},this.setSortParticipantsBy=u=>this.state.setSortParticipantsBy(u),this.sendReaction=async u=>this.streamClient.post(`${this.streamClientBasePath}/reaction`,u),this.blockUser=async u=>this.streamClient.post(`${this.streamClientBasePath}/block`,{user_id:u}),this.unblockUser=async u=>this.streamClient.post(`${this.streamClientBasePath}/unblock`,{user_id:u}),this.muteSelf=u=>{const h=this.currentUserId;if(h)return this.muteUser(h,u)},this.muteOthers=u=>{const h=rP(u);if(!h)return;const m=[];for(const p of this.state.remoteParticipants)p.publishedTracks.includes(h)&&m.push(p.userId);if(m.length>0)return this.muteUser(m,u)},this.muteUser=(u,h)=>this.streamClient.post(`${this.streamClientBasePath}/mute_users`,{user_ids:Array.isArray(u)?u:[u],[h]:!0}),this.muteAllUsers=u=>this.streamClient.post(`${this.streamClientBasePath}/mute_users`,{mute_all_users:!0,[u]:!0}),this.startRecording=async u=>this.streamClient.post(`${this.streamClientBasePath}/start_recording`,u||{}),this.stopRecording=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_recording`,{}),this.startTranscription=async u=>this.streamClient.post(`${this.streamClientBasePath}/start_transcription`,u),this.stopTranscription=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_transcription`),this.requestPermissions=async u=>{const{permissions:h}=u;if(!h.every(p=>this.permissionsContext.canRequest(p)))throw new Error(`You are not allowed to request permissions: ${h.join(", ")}`);return this.streamClient.post(`${this.streamClientBasePath}/request_permission`,u)},this.grantPermissions=async(u,h)=>this.updateUserPermissions({user_id:u,grant_permissions:h}),this.revokePermissions=async(u,h)=>this.updateUserPermissions({user_id:u,revoke_permissions:h}),this.updateUserPermissions=async u=>this.streamClient.post(`${this.streamClientBasePath}/user_permissions`,u),this.goLive=async(u={},h)=>this.streamClient.post(`${this.streamClientBasePath}/go_live`,u,h),this.stopLive=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_live`,{}),this.startHLS=async()=>this.streamClient.post(`${this.streamClientBasePath}/start_broadcasting`,{}),this.stopHLS=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_broadcasting`,{}),this.update=async u=>{const h=await this.streamClient.patch(`${this.streamClientBasePath}`,u),{call:m,members:p,own_capabilities:v}=h;return this.state.updateFromCallResponse(m),this.state.setMembers(p),this.state.setOwnCapabilities(v),h},this.endCall=async()=>this.streamClient.post(`${this.streamClientBasePath}/mark_ended`),this.pin=u=>{this.state.updateParticipant(u,{pin:{isLocalPin:!0,pinnedAt:Date.now()}})},this.unpin=u=>{this.state.updateParticipant(u,{pin:void 0})},this.pinForEveryone=async u=>this.streamClient.post(`${this.streamClientBasePath}/pin`,u),this.unpinForEveryone=async u=>this.streamClient.post(`${this.streamClientBasePath}/unpin`,u),this.queryMembers=u=>this.streamClient.post("/call/members",{...u||{},id:this.id,type:this.type}),this.updateCallMembers=async u=>this.streamClient.post(`${this.streamClientBasePath}/members`,u),this.scheduleAutoDrop=()=>{this.cancelAutoDrop();const u=this.state.settings;if(!u||this.state.callingState!==V.RINGING)return;const h=this.isCreatedByMe?u.ring.auto_cancel_timeout_ms:u.ring.incoming_call_timeout_ms;h<=0||(this.dropTimeout=setTimeout(()=>{this.state.callingState===V.RINGING&&this.leave({reject:!0,reason:"timeout"}).catch(m=>{this.logger("error","Failed to drop call",m)})},h))},this.cancelAutoDrop=()=>{clearTimeout(this.dropTimeout),this.dropTimeout=void 0},this.queryRecordings=async u=>{let h=this.streamClientBasePath;return u&&(h=`${h}/${u}`),this.streamClient.get(`${h}/recordings`)},this.queryTranscriptions=async()=>this.streamClient.get(`${this.streamClientBasePath}/transcriptions`),this.getCallStats=async u=>{const h=`${this.streamClientBasePath}/stats/${u}`;return this.streamClient.get(h)},this.submitFeedback=async(u,{reason:h,custom:m}={})=>{var k,E;if(u<1||u>5)throw new Error("Rating must be between 1 and 5");const p=(k=this.state.session)==null?void 0:k.id;if(!p)throw new Error("Feedback can be submitted only in the context of a call session");const{sdkName:v,sdkVersion:g,...y}=JP(rg()),S=((E=this.sfuClient)==null?void 0:E.sessionId)??"N/A",w=`${this.streamClientBasePath}/feedback/${p}`;return this.streamClient.post(w,{rating:u,reason:h,user_session_id:S,sdk:v,sdk_version:g,custom:{...m,"x-stream-platform-data":y}})},this.sendCustomEvent=async u=>this.streamClient.post(`${this.streamClientBasePath}/event`,{custom:u}),this.applyDeviceConfig=async u=>{await this.initCamera({setStatus:u}).catch(h=>{this.logger("warn","Camera init failed",h)}),await this.initMic({setStatus:u}).catch(h=>{this.logger("warn","Mic init failed",h)})},this.initCamera=async u=>{var m,p,v,g,y;if(await this.camera.statusChangeSettled(),(m=this.state.localParticipant)!=null&&m.videoStream||!this.permissionsContext.hasPermission("send-video"))return;if(!this.camera.state.direction&&!this.camera.state.selectedDevice){let S="front";const w=(p=this.state.settings)==null?void 0:p.video.camera_facing;w&&(S=w==="front"?"front":"back"),this.camera.state.setDirection(S)}const h=(v=this.state.settings)==null?void 0:v.video.target_resolution;h&&await this.camera.selectTargetResolution(h),u.setStatus&&(this.camera.enabled&&this.camera.state.mediaStream&&!((g=this.publisher)!=null&&g.isPublishing(D.VIDEO))&&await this.publishVideoStream(this.camera.state.mediaStream),this.camera.state.status===void 0&&((y=this.state.settings)!=null&&y.video.camera_default_on)&&await this.camera.enable())},this.initMic=async u=>{var h,m,p;await this.microphone.statusChangeSettled(),!((h=this.state.localParticipant)!=null&&h.audioStream||!this.permissionsContext.hasPermission("send-audio"))&&u.setStatus&&(this.microphone.enabled&&this.microphone.state.mediaStream&&!((m=this.publisher)!=null&&m.isPublishing(D.AUDIO))&&await this.publishAudioStream(this.microphone.state.mediaStream),this.microphone.state.status===void 0&&((p=this.state.settings)!=null&&p.audio.mic_default_on)&&await this.microphone.enable())},this.trackElementVisibility=(u,h,m)=>this.dynascaleManager.trackElementVisibility(u,h,m),this.setViewport=u=>this.dynascaleManager.setViewport(u),this.bindVideoElement=(u,h,m)=>{const p=this.dynascaleManager.bindVideoElement(u,h,m);if(p)return this.leaveCallHooks.add(p),()=>{this.leaveCallHooks.delete(p),p()}},this.bindAudioElement=(u,h,m="audioTrack")=>{const p=this.dynascaleManager.bindAudioElement(u,h,m);if(p)return this.leaveCallHooks.add(p),()=>{this.leaveCallHooks.delete(p),p()}},this.bindCallThumbnailElement=(u,h={})=>{const m=()=>{u.src=h.fallbackImageSource||"https://getstream.io/random_svg/?name=x&id=x"},p=Wt(this.state.thumbnails$,v=>{if(!v)return;u.addEventListener("error",m);const g=new URL(v.image_url);g.searchParams.set("w",String(u.clientWidth)),g.searchParams.set("h",String(u.clientHeight)),u.src=g.toString()});return()=>{p(),u.removeEventListener("error",m)}},this.setPreferredIncomingVideoResolution=(u,h)=>{this.dynascaleManager.setVideoTrackSubscriptionOverrides(u?{enabled:!0,dimension:u}:void 0,h),this.dynascaleManager.applyTrackSubscriptions()},this.setIncomingVideoEnabled=u=>{this.dynascaleManager.setVideoTrackSubscriptionOverrides(u?void 0:{enabled:!1}),this.dynascaleManager.applyTrackSubscriptions()},this.setDisconnectionTimeout=u=>{this.disconnectionTimeoutSeconds=u},this.type=t,this.id=n,this.cid=`${t}:${n}`,this.ringingSubject=new ce(l),this.watching=c,this.streamClient=r,this.clientStore=a,this.streamClientBasePath=`/call/${this.type}/${this.id}`,this.logger=we(["Call"]);const d=Ib.get(t),f=o||d.options.sortParticipantsBy;f&&this.state.setSortParticipantsBy(f),this.state.setMembers(i||[]),this.state.setOwnCapabilities(s||[]),this.state.setCallingState(l?V.RINGING:V.IDLE),this.camera=new fO(this),this.microphone=new bO(this),this.speaker=new EO(this),this.screenShare=new CO(this),this.dynascaleManager=new eO(this.state,this.speaker)}async setup(){await xt(this.joinLeaveConcurrencyTag,async()=>{this.initialized||(this.leaveCallHooks.add(this.on("all",t=>{this.state.updateFromEvent(t)})),this.leaveCallHooks.add(GP(this,this.dispatcher)),this.registerEffects(),this.registerReconnectHandlers(),this.state.callingState===V.LEFT&&this.state.setCallingState(V.IDLE),this.initialized=!0)})}registerEffects(){this.leaveCallHooks.add(Wt(this.state.settings$,t=>{t&&this.permissionsContext.setCallSettings(t)})),this.leaveCallHooks.add(wb(this.state.ownCapabilities$,this.handleOwnCapabilitiesUpdated)),this.leaveCallHooks.add(Wt(this.state.blockedUserIds$,async t=>{if(!t||t.length===0)return;const n=this.currentUserId;n&&t.includes(n)&&(this.logger("info","Leaving call because of being blocked"),await this.leave({reason:"user blocked"}).catch(r=>{this.logger("error","Error leaving call after being blocked",r)}))})),this.leaveCallHooks.add(Wt(this.state.session$,t=>{var s;if(!this.ringing)return;const n=(s=this.clientStore.connectedUser)==null?void 0:s.id;if(!n)return;const r=!!(t!=null&&t.accepted_by[n]),i=!!(t!=null&&t.rejected_by[n]);(r||i)&&this.cancelAutoDrop()})),this.leaveCallHooks.add(Wt(this.ringingSubject,t=>{var c,d;if(!t)return;const n=this.state.session,r=(c=this.clientStore.connectedUser)==null?void 0:c.id,i=n==null?void 0:n.ended_at,s=(d=this.state.createdBy)==null?void 0:d.id,o=n==null?void 0:n.rejected_by,a=n==null?void 0:n.accepted_by;let l=!1;i?l=!0:s&&o?o[s]&&(l=!0):r&&o?o[r]&&(l=!0):r&&a&&a[r]&&(l=!0),l?this.state.callingState!==V.IDLE&&this.state.setCallingState(V.IDLE):(this.state.callingState===V.IDLE&&this.state.setCallingState(V.RINGING),this.scheduleAutoDrop(),this.leaveCallHooks.add(Tb(this)))}))}get ringing(){return an(this.ringingSubject)}get currentUserId(){var t;return(t=this.clientStore.connectedUser)==null?void 0:t.id}get isCreatedByMe(){var t;return((t=this.state.createdBy)==null?void 0:t.id)===this.currentUserId}updatePublishOptions(t){this.publishOptions={...this.publishOptions,...t}}}var TO=null;class xO{constructor(t){this._log=(n,r={},i="info")=>{this.client.logger(i,"connection:"+n,{...r})},this.setClient=n=>{this.client=n},this._buildUrl=()=>{const n=new URLSearchParams;return n.set("api_key",this.client.key),n.set("stream-auth-type",this.client.getAuthType()),n.set("X-Stream-Client",this.client.getUserAgent()),`${this.client.wsBaseURL}/connect?${n.toString()}`},this.onlineStatusChanged=n=>{n.type==="offline"?(this._log("onlineStatusChanged() - Status changing to offline"),this._setHealth(!1,!0)):n.type==="online"&&(this._log(`onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`),this.isHealthy||this._reconnect({interval:10}))},this.onopen=n=>{var o;if(this.wsID!==n)return;const r=this.client.user;if(!r){this.client.logger("error","User not set, can't connect to WS");return}const i=this.client._getToken();if(!i){this.client.logger("error","Token not set, can't connect authenticate");return}const s={token:i,user_details:{id:r.id,name:r.name,image:r.image,custom:r.custom}};(o=this.ws)==null||o.send(JSON.stringify(s)),this._log("onopen() - onopen callback",{wsID:n})},this.onmessage=(n,r)=>{var s,o;if(this.wsID!==n)return;this._log("onmessage() - onmessage callback",{event:r,wsID:n});const i=typeof r.data=="string"?JSON.parse(r.data):null;if(!this.isResolved&&i&&i.type==="connection.error"&&(this.isResolved=!0,i.error)){(s=this.rejectPromise)==null||s.call(this,this._errorFromWSEvent(i,!1));return}if(this.lastEvent=new Date,i&&(i.type==="health.check"||i.type==="connection.ok")&&this.scheduleNextPing(),i&&i.type==="connection.ok"&&((o=this.resolvePromise)==null||o.call(this,i),this._setHealth(!0)),i&&i.type==="connection.error"&&i.error){const{code:a}=i.error;this.isHealthy=!1,this.isConnecting=!1,this.consecutiveFailures+=1,a===bi.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic()&&(clearTimeout(this.connectionCheckTimeoutRef),this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0}))}i&&(i.received_at=new Date,this.client.dispatchEvent(i)),this.scheduleConnectionCheck()},this.onclose=(n,r)=>{var i,s;if(this.wsID===n)if(this._log("onclose() - onclose callback - "+r.code,{event:r,wsID:n}),r.code===bi.WS_CLOSED_SUCCESS){const o=new Error(`WS connection reject with error ${r.reason}`);o.reason=r.reason,o.code=r.code,o.wasClean=r.wasClean,o.target=r.target,(i=this.rejectPromise)==null||i.call(this,o),this._log(`onclose() - WS connection reject with error ${r.reason}`,{event:r})}else this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,(s=this.rejectPromise)==null||s.call(this,this._errorFromWSEvent(r)),this._log("onclose() - WS connection closed. Calling reconnect ...",{event:r}),this._reconnect()},this.onerror=(n,r)=>{var i;this.wsID===n&&(this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,(i=this.rejectPromise)==null||i.call(this,new Error(`WebSocket error: ${r}`)),this._log("onerror() - WS connection resulted into error",{event:r}),this._reconnect())},this._setHealth=(n,r=!1)=>{if(n!==this.isHealthy){if(this.isHealthy=n,this.isHealthy||r){this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy});return}setTimeout(()=>{this.isHealthy||this.client.dispatchEvent({type:"connection.changed",online:this.isHealthy})},5e3)}},this._errorFromWSEvent=(n,r=!0)=>{let i,s,o;if(RI(n))i=n.code,o=n.reason,s=0;else{const{error:c}=n;i=c.code,o=c.message,s=c.StatusCode}const a=`WS failed with code: ${i} and reason: ${o}`;this._log(a,{event:n},"warn");const l=new Error(a);return l.code=i,l.StatusCode=s,l.isWSFailure=r,l},this._setupConnectionPromise=()=>{this.isResolved=!1,this.connectionOpenSafe=ko(new Promise((n,r)=>{this.resolvePromise=n,this.rejectPromise=r}))},this.scheduleNextPing=()=>{const n=Pc();this.healthCheckTimeoutRef&&n.clearTimeout(this.healthCheckTimeoutRef),this.healthCheckTimeoutRef=n.setTimeout(()=>{var i;const r=[{type:"health.check",client_id:this.client.clientID}];try{(i=this.ws)==null||i.send(JSON.stringify(r))}catch{}},this.pingInterval)},this.scheduleConnectionCheck=()=>{clearTimeout(this.connectionCheckTimeoutRef),this.connectionCheckTimeoutRef=setTimeout(()=>{const n=new Date;this.lastEvent&&n.getTime()-this.lastEvent.getTime()>this.connectionCheckTimeout&&(this._log("scheduleConnectionCheck - going to reconnect"),this._setHealth(!1),this._reconnect())},this.connectionCheckTimeout)},this.client=t,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.isDisconnected=!1,this.isResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25*1e3,this.connectionCheckTimeout=this.pingInterval+10*1e3,Xd(this.onlineStatusChanged)}async connect(t=15e3){if(this.isConnecting)throw Error("You've called connect twice, can only attempt 1 connection at the time");this.isDisconnected=!1;try{const n=await this._connect();this.consecutiveFailures=0,this._log(`connect() - Established ws connection with healthcheck: ${n}`)}catch(n){if(this.isHealthy=!1,this.consecutiveFailures+=1,n.code===bi.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});else if(!n.isWSFailure)throw new Error(JSON.stringify({code:n.code,StatusCode:n.StatusCode,message:n.message,isWSFailure:n.isWSFailure}))}return await this._waitForHealthy(t)}async _waitForHealthy(t=15e3){return Promise.race([(async()=>{for(let r=0;r<=t;r+=50)try{return await this.connectionOpen}catch(i){if(r===t)throw new Error(JSON.stringify({code:i.code,StatusCode:i.StatusCode,message:i.message,isWSFailure:i.isWSFailure}));await zi(50)}})(),(async()=>{throw await zi(t),this.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}))})()])}disconnect(t){this._log(`disconnect() - Closing the websocket connection for wsID ${this.wsID}`),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&Pc().clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),pb(this.onlineStatusChanged),this.isHealthy=!1;let n;const{ws:r}=this;return r&&r.close&&r.readyState===r.OPEN?(n=new Promise(i=>{const s=o=>{this._log(`disconnect() - resolving isClosedPromise ${o?"with":"without"} close frame`,{event:o}),i()};r.onclose=s,setTimeout(s,t??1e3)}),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),r.close(bi.WS_CLOSED_SUCCESS,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),n=Promise.resolve()),delete this.ws,n}async _connect(){var n,r,i,s;if(this.isConnecting)return;this.isConnecting=!0,this.requestID=Qd();let t=!1;try{this._log("_connect() - waiting for token"),await this.client.tokenManager.tokenReady(),t=!0}catch{}try{t||(this._log("_connect() - tokenProvider failed before, so going to retry"),await this.client.tokenManager.loadToken()),this.client.isConnectionIsPromisePending||this.client._setupConnectionIdPromise(),this._setupConnectionPromise();const o=this._buildUrl();this._log(`_connect() - Connecting to ${o}`,{wsURL:o,requestID:this.requestID});const a=this.client.options.WebSocketImpl??WebSocket;this.ws=new a(o),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID);const l=await this.connectionOpen;if(this.isConnecting=!1,l)return this.connectionID=l.connection_id,(r=(n=this.client).resolveConnectionId)==null||r.call(n,this.connectionID),l}catch(o){throw await this.client._setupConnectionIdPromise(),this.isConnecting=!1,this._log("_connect() - Error - ",o),(s=(i=this.client).rejectConnectionId)==null||s.call(i,o),o}}async _reconnect(t={}){if(this._log("_reconnect() - Initiating the reconnect"),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (1) since already connecting or healthy");return}let n=t.interval;if(n||(n=_h(this.consecutiveFailures)),await zi(n),this.isConnecting||this.isHealthy){this._log("_reconnect() - Abort (2) since already connecting or healthy");return}if(this.isDisconnected){this._log("_reconnect() - Abort (3) since disconnect() is called");return}this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),t.refreshToken&&await this.client.tokenManager.loadToken();try{await this._connect(),this._log("_reconnect() - Waiting for recoverCallBack"),this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0}catch(r){if(this.isHealthy=!1,this.consecutiveFailures+=1,r.code===bi.TOKEN_EXPIRED&&!this.client.tokenManager.isStatic())return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});r.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect())}this._log("_reconnect() - == END ==")}_destroyCurrentWSConnection(){var t;this.wsID+=1;try{(t=this==null?void 0:this.ws)==null||t.close()}catch{}}get connectionOpen(){var t;return(t=this.connectionOpenSafe)==null?void 0:t.call(this)}}function RO(e){const t=e.split(".");if(t.length!==3)return"";const n=t[1],r=_O(n);return JSON.parse(r).user_id}const _O=e=>{const t={},n=String.fromCharCode,r=e.length;let i,s=0,o,a,l=0,c,d="";const f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0;i<64;i++)t[f.charAt(i)]=i;for(a=0;a<r;a++)for(o=t[e.charAt(a)],s=(s<<6)+o,l+=6;l>=8;)((c=s>>>(l-=8)&255)||a<r-2)&&(d+=n(c));return d};class IO{constructor(t){this.setTokenOrProvider=async(n,r,i)=>{this.validateToken(n,r,i),this.user=r,Yd(n)&&(this.tokenProvider=n,this.type="provider"),typeof n=="string"&&(this.token=n,this.type="static"),await this.loadToken()},this.reset=()=>{this.token=void 0,this.tokenProvider=void 0,this.type="static",this.user=void 0,this.loadTokenPromise=null},this.validateToken=(n,r,i)=>{if(!(r&&i&&!n)){if(!this.secret&&!n)throw new Error("UserWithId token can not be empty");if(n&&typeof n!="string"&&!Yd(n))throw new Error("user token should either be a string or a function");if(typeof n=="string"){if(i&&n==="")return;const s=RO(n);if(n!=null&&(s==null||s===""||!i&&s!==r.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}},this.tokenReady=()=>this.loadTokenPromise,this.loadToken=()=>(this.loadTokenPromise=new Promise(async(n,r)=>{if(this.type==="static")return n(this.token);if(this.tokenProvider&&typeof this.tokenProvider!="string"){try{this.token=await this.tokenProvider()}catch(i){return r(new Error(`Call to tokenProvider failed with message: ${i}`))}n(this.token)}}),this.loadTokenPromise),this.getToken=()=>{if(this.token)return this.token;if(this.user&&!this.token)return this.token;throw new Error("User token is not set. Either client.connectUser wasn't called or client.disconnect was called")},this.isStatic=()=>this.type==="static",this.loadTokenPromise=null,this.secret=t,this.type="static"}}const hg=async(e="https://hint.stream-io-video.com/",t=2e3,n=3)=>{const r=we(["location-hint"]);let i=0,s="ERR";do{const o=new AbortController,a=setTimeout(()=>o.abort(),t);try{const c=(await fetch(e,{method:"HEAD",signal:o.signal})).headers.get("x-amz-cf-pop")||"ERR";r("debug",`Location header: ${c}`),s=c.substring(0,3)}catch(l){r("warn",`Failed to get location hint from ${e}`,l),s="ERR"}finally{clearTimeout(a)}}while(s==="ERR"&&++i<n);return s};class pg{constructor(t,n){var i;this.listeners={},this.getAuthType=()=>this.anonymous?"anonymous":"jwt",this.setBaseURL=s=>{this.baseURL=s,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")},this.getLocationHint=async(s,o)=>{const a=await this.locationHint;return!a||a==="ERR"?(this.locationHint=hg(s??this.options.locationHintUrl,o??this.options.locationHintTimeout),this.locationHint):a},this._getConnectionID=()=>{var s;return(s=this.wsConnection)==null?void 0:s.connectionID},this._hasConnectionID=()=>!!this._getConnectionID(),this.connectUser=async(s,o)=>{if(!s.id)throw new Error('The "id" field on the user is missing');if(this.userID===s.id&&this.setUserPromise)return this.logger("warn","Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),this.setUserPromise;if(this.userID)throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");(this._isUsingServerAuth()||this.node)&&!this.options.allowServerSideConnect&&this.logger("warn","Please do not use connectUser server side. Use our @stream-io/node-sdk instead: https://getstream.io/video/docs/api/"),this.userID=s.id,this.anonymous=!1;const a=this._setToken(s,o,this.anonymous);this._setUser(s);const l=this.openConnection();this.setUserPromise=Promise.all([a,l]).then(c=>c[1]);try{return Xd(this.updateNetworkConnectionStatus),await this.setUserPromise}catch(c){throw this.persistUserOnConnectionFailure?this.closeConnection():this.disconnectUser(),c}},this._setToken=(s,o,a)=>this.tokenManager.setTokenOrProvider(o,s,a),this._setUser=s=>{this.user=s,this.userID=s.id,this._user={...s}},this.closeConnection=async s=>{var o;await((o=this.wsConnection)==null?void 0:o.disconnect(s))},this.openConnection=async()=>{var a,l,c;if(!this.userID)throw Error("UserWithId is not set on client, use client.connectUser or client.connectAnonymousUser instead");const s=(a=this.wsPromiseSafe)==null?void 0:a.call(this);if((l=this.wsConnection)!=null&&l.isConnecting&&s)return this.logger("info","client:openConnection() - connection already in progress"),await s;if((c=this.wsConnection)!=null&&c.isHealthy&&this._hasConnectionID()){this.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists");return}await this._setupConnectionIdPromise(),this.clientID=`${this.userID}--${Qd()}`;const o=this.connect();return this.wsPromiseSafe=ko(o),await o},this.disconnectUser=async s=>{this.logger("info","client:disconnect() - Disconnecting the client"),delete this.user,delete this._user,delete this.userID,this.anonymous=!1,await this.closeConnection(s),pb(this.updateNetworkConnectionStatus),this.tokenManager.reset(),this.connectionIdPromiseSafe=void 0,this.rejectConnectionId=void 0,this.resolveConnectionId=void 0},this.connectGuestUser=async s=>{this.guestUserCreatePromise=this.doAxiosRequest("post","/guest",{user:s},{publicEndpoint:!0});const o=await this.guestUserCreatePromise;return this.guestUserCreatePromise.finally(()=>this.guestUserCreatePromise=void 0),this.connectUser(o.user,o.access_token)},this.connectAnonymousUser=async(s,o)=>{var a;Xd(this.updateNetworkConnectionStatus),await this._setupConnectionIdPromise(),this.anonymous=!0,await this._setToken(s,o,this.anonymous),this._setUser(s),(a=this.resolveConnectionId)==null||a.call(this)},this.on=(s,o)=>{var a;return this.listeners[s]||(this.listeners[s]=[]),this.logger("debug",`Adding listener for ${s} event`),(a=this.listeners[s])==null||a.push(o),()=>{this.off(s,o)}},this.off=(s,o)=>{var a;this.listeners[s]||(this.listeners[s]=[]),this.logger("debug",`Removing listener for ${s} event`),this.listeners[s]=(a=this.listeners[s])==null?void 0:a.filter(l=>l!==o)},this._setupConnectionIdPromise=()=>{this.connectionIdPromiseSafe=ko(new Promise((s,o)=>{this.resolveConnectionId=s,this.rejectConnectionId=o}))},this._logApiRequest=(s,o,a,l)=>{this.logger("trace",`client: ${s} - Request - ${o}`,{payload:a,config:l})},this._logApiResponse=(s,o,a)=>{this.logger("trace",`client:${s} - Response - url: ${o} > status ${a.status}`,{response:a})},this._logApiError=(s,o,a)=>{this.logger("error",`client:${s} - Error - url: ${o}`,{url:o,error:a})},this.doAxiosRequest=async(s,o,a,l={})=>{var d,f;if(!l.publicEndpoint){await Promise.all([this.tokenManager.tokenReady(),this.guestUserCreatePromise]);try{await this.connectionIdPromise}catch{await((d=this.wsConnection)==null?void 0:d._waitForHealthy()),await this.connectionIdPromise}}const c=this._enrichAxiosOptions(l);try{let u;switch(this._logApiRequest(s,o,a,c),s){case"get":u=await this.axiosInstance.get(o,c);break;case"delete":u=await this.axiosInstance.delete(o,c);break;case"post":u=await this.axiosInstance.post(o,a,c);break;case"put":u=await this.axiosInstance.put(o,a,c);break;case"patch":u=await this.axiosInstance.patch(o,a,c);break;case"options":u=await this.axiosInstance.options(o,c);break;default:throw new Error("Invalid request type")}return this._logApiResponse(s,o,u),this.consecutiveFailures=0,this.handleResponse(u)}catch(u){if(u.client_request_id=(f=c.headers)==null?void 0:f["x-client-request-id"],this.consecutiveFailures+=1,u.response)return this._logApiError(s,o,u.response),u.response.data.code===bi.TOKEN_EXPIRED&&!this.tokenManager.isStatic()?(this.consecutiveFailures>1&&await zi(_h(this.consecutiveFailures)),await this.tokenManager.loadToken(),await this.doAxiosRequest(s,o,a,l)):this.handleResponse(u.response);throw this._logApiError(s,o,u),u}},this.get=(s,o)=>this.doAxiosRequest("get",s,null,{params:o}),this.put=(s,o,a)=>this.doAxiosRequest("put",s,o,{params:a}),this.post=(s,o,a)=>this.doAxiosRequest("post",s,o,{params:a}),this.patch=(s,o,a)=>this.doAxiosRequest("patch",s,o,{params:a}),this.delete=(s,o)=>this.doAxiosRequest("delete",s,null,{params:o}),this.errorFromResponse=s=>{const{data:o,status:a}=s,l=new eb;return l.message=`Stream error code ${o.code}: ${o.message}`,l.code=o.code,l.unrecoverable=o.unrecoverable,l.response=s,l.status=a,l},this.handleResponse=s=>{const o=s.data;if(xI(s))throw this.errorFromResponse(s);return o},this.dispatchEvent=s=>{if(this.logger("debug",`Dispatching event: ${s.type}`,s),!!this.listeners){for(const o of this.listeners.all||[])o(s);for(const o of this.listeners[s.type]||[])o(s)}},this.connect=async()=>{if(!this.userID||!this._user)throw Error("Call connectUser or connectAnonymousUser before starting the connection");if(!this.wsBaseURL)throw Error("Websocket base url not set");if(!this.clientID)throw Error("clientID is not set");return this.wsConnection=new xO(this),this.logger("info","StreamClient.connect: this.wsConnection.connect()"),await this.wsConnection.connect(this.defaultWSTimeout)},this.getUserAgent=()=>this.userAgent||`stream-video-javascript-client-${this.node?"node":"browser"}-1.13.1`,this.setUserAgent=s=>{this.userAgent=s},this._isUsingServerAuth=()=>!!this.secret,this._enrichAxiosOptions=(s={params:{},headers:{},config:{}})=>{var l;const o=s.publicEndpoint&&!this.user?void 0:this._getToken(),a=o?{Authorization:o}:void 0;return(l=s.headers)!=null&&l["x-client-request-id"]||(s.headers={...s.headers,"x-client-request-id":Qd()}),{params:{user_id:this.userID,connection_id:this._getConnectionID(),api_key:this.key,...s.params},headers:{...a,"stream-auth-type":s.publicEndpoint&&!this.user?"anonymous":this.getAuthType(),"X-Stream-Client":this.getUserAgent(),...s.headers},...s.config,...this.options.axiosRequestConfig}},this._getToken=()=>this.tokenManager?this.tokenManager.getToken():null,this.updateNetworkConnectionStatus=s=>{s.type==="offline"?(this.logger("debug","device went offline"),this.dispatchEvent({type:"network.changed",online:!1})):s.type==="online"&&(this.logger("debug","device went online"),this.dispatchEvent({type:"network.changed",online:!0}))},this.key=t,this.secret=n==null?void 0:n.secret;const r=n||{browser:typeof window<"u"};this.browser=r.browser||typeof window<"u",this.node=!this.browser,this.browser&&(this.locationHint=hg(n==null?void 0:n.locationHintUrl,n==null?void 0:n.locationHintTimeout,n==null?void 0:n.locationHintMaxAttempts)),this.options={timeout:5e3,withCredentials:!1,...r},this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new TO.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.setBaseURL(this.options.baseURL||"https://video.stream-io-api.com/video"),this.axiosInstance=Ke.create({...this.options,baseURL:this.baseURL}),this.wsConnection=null,this.wsPromiseSafe=null,this.setUserPromise=null,this.anonymous=!1,this.persistUserOnConnectionFailure=(i=this.options)==null?void 0:i.persistUserOnConnectionFailure,this.tokenManager=new IO(this.secret),this.consecutiveFailures=0,this.defaultWSTimeout=15e3,this.logger=Yd(r.logger)?r.logger:()=>null}get connectionIdPromise(){var t;return(t=this.connectionIdPromiseSafe)==null?void 0:t.call(this)}get isConnectionIsPromisePending(){var t;return((t=this.connectionIdPromiseSafe)==null?void 0:t.checkPending())??!1}get wsPromise(){var t;return(t=this.wsPromiseSafe)==null?void 0:t.call(this)}}class fr{constructor(t,n){var o,a,l;this.logLevel="warn",this.eventHandlersToUnregister=[],this.connectionConcurrencyTag=Symbol("connectionConcurrencyTag"),this.connectUser=async(c,d)=>{if(c.type==="anonymous")return c.id="!anon",this.connectAnonymousUser(c,d);let f=()=>this.streamClient.connectUser(c,d);c.type==="guest"&&(f=async()=>this.streamClient.connectGuestUser(c));const u=await xt(this.connectionConcurrencyTag,()=>f());return u!=null&&u.me&&this.writeableStateStore.setConnectedUser(u.me),this.eventHandlersToUnregister.push(this.on("connection.changed",h=>{if(h.online){const m=this.writeableStateStore.calls.filter(p=>p.watching).map(p=>p.cid);this.logger("info",`Rewatching calls after connection changed ${m.join(", ")}`),m.length>0&&this.queryCalls({watch:!0,filter_conditions:{cid:{$in:m}},sort:[{field:"cid",direction:1}]}).catch(p=>{this.logger("error","Failed to re-watch calls",p)})}})),this.eventHandlersToUnregister.push(this.on("call.created",h=>{const{call:m,members:p}=h;if(c.id===m.created_by.id){this.logger("warn","Received `call.created` sent by the current user");return}this.logger("info",`New call created and registered: ${m.cid}`);const v=new Is({streamClient:this.streamClient,type:m.type,id:m.id,members:p,clientStore:this.writeableStateStore});v.state.updateFromCallResponse(m),this.writeableStateStore.registerCall(v)})),this.eventHandlersToUnregister.push(this.on("call.ring",async h=>{const{call:m,members:p}=h;if(c.id===m.created_by.id){this.logger("debug","Received `call.ring` sent by the current user so ignoring the event");return}const v=this.writeableStateStore.findCall(m.type,m.id);v?await v.updateFromRingingEvent(h):await new Is({streamClient:this.streamClient,type:m.type,id:m.id,members:p,clientStore:this.writeableStateStore,ringing:!0}).get()})),u},this.disconnectUser=async c=>{var h;if(!this.streamClient.user)return;const d=(h=this.streamClient.user)==null?void 0:h.id,f=this.streamClient.key,u=()=>this.streamClient.disconnectUser(c);await xt(this.connectionConcurrencyTag,()=>u()),d&&fr._instanceMap.delete(f+d),this.eventHandlersToUnregister.forEach(m=>m()),this.eventHandlersToUnregister=[],this.writeableStateStore.setConnectedUser(void 0)},this.on=(c,d)=>this.streamClient.on(c,d),this.off=(c,d)=>this.streamClient.off(c,d),this.call=(c,d)=>new Is({streamClient:this.streamClient,id:d,type:c,clientStore:this.writeableStateStore}),this.createGuestUser=async c=>this.streamClient.doAxiosRequest("post","/guest",c,{publicEndpoint:!0}),this.queryCalls=async(c={})=>{const d=await this.streamClient.post("/calls",c),f=[];for(const u of d.calls){const h=new Is({streamClient:this.streamClient,id:u.call.id,type:u.call.type,members:u.members,ownCapabilities:u.own_capabilities,watching:c.watch,clientStore:this.writeableStateStore});h.state.updateFromCallResponse(u.call),await h.applyDeviceConfig(!1),c.watch&&this.writeableStateStore.registerCall(h),f.push(h)}return{...d,calls:f}},this.queryCallStats=async(c={})=>this.streamClient.post("/call/stats",c),this.queryAggregateCallStats=async(c={})=>this.streamClient.post("/stats",c),this.edges=async()=>this.streamClient.get("/edges"),this.addDevice=async(c,d,f,u,h)=>await this.streamClient.post("/devices",{id:c,push_provider:d,voip_token:h,...u!=null?{user_id:u}:{},...f!=null?{push_provider_name:f}:{}}),this.addVoipDevice=async(c,d,f,u)=>await this.addDevice(c,d,f,u,!0),this.getDevices=async c=>await this.streamClient.get("/devices",c?{user_id:c}:{}),this.removeDevice=async(c,d)=>await this.streamClient.delete("/devices",{id:c,...d?{user_id:d}:{}}),this.onRingingCall=async c=>{let d=this.state.calls.find(f=>f.cid===c&&f.ringing);if(!d){const[f,u]=c.split(":");d=new Is({streamClient:this.streamClient,type:f,id:u,clientStore:this.writeableStateStore,ringing:!0}),await d.get()}return d},this.connectAnonymousUser=async(c,d)=>{const f=()=>this.streamClient.connectAnonymousUser(c,d);return await xt(this.connectionConcurrencyTag,()=>f())};let r=gb,i="warn";typeof t=="string"?(i=(n==null?void 0:n.logLevel)||i,r=(n==null?void 0:n.logger)||r,n!=null&&n.enableTimerWorker&&ug()):(i=((o=t.options)==null?void 0:o.logLevel)||i,r=((a=t.options)==null?void 0:a.logger)||r,(l=t.options)!=null&&l.enableTimerWorker&&ug()),_I(r,i),this.logger=we(["client"]);const s=we(["coordinator"]);if(typeof t=="string")this.streamClient=new pg(t,{persistUserOnConnectionFailure:!0,...n,logLevel:i,logger:s});else{this.streamClient=new pg(t.apiKey,{persistUserOnConnectionFailure:!0,...t.options,logLevel:i,logger:s});const c=Zd();if(c){const d=Or[c.type].toLowerCase(),f=`${c.major}.${c.minor}.${c.patch}`,u=this.streamClient.getUserAgent();this.streamClient.setUserAgent(`${u}-video-${d}-sdk-${f}`)}}if(this.writeableStateStore=new uP,this.readOnlyStateStore=new dP(this.writeableStateStore),typeof t!="string"){const c=t.user,d=t.token||t.tokenProvider;if(c){let f=c.id;c.type==="anonymous"&&(f="!anon"),f&&(fr._instanceMap.has(t.apiKey+f)&&this.logger("warn",`A StreamVideoClient already exists for ${c.type==="anonymous"?"an anonymous user":f}; Prefer using getOrCreateInstance method`),c.id=f,fr._instanceMap.set(t.apiKey+f,this)),this.connectUser(c,d).catch(u=>{this.logger("error","Failed to connect",u)})}}}static getOrCreateInstance(t){const n=t.user;if(!n.id)if(t.user.type==="anonymous")n.id="!anon";else throw new Error("User ID is required for a non-anonymous user");if(!t.token&&!t.tokenProvider&&t.user.type!=="anonymous"&&t.user.type!=="guest")throw new Error("TokenProvider or token is required for a user that is not a guest or anonymous");let r=fr._instanceMap.get(t.apiKey+n.id);return r||(r=new fr({...t,user:n})),r}get state(){return this.readOnlyStateStore}}fr._instanceMap=new Map;const ne=e=>typeof e=="string",Ps=()=>{let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.resolve=e,n.reject=t,n},mg=e=>e==null?"":""+e,PO=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},OO=/###/g,gg=e=>e&&e.indexOf("###")>-1?e.replace(OO,"."):e,vg=e=>!e||ne(e),Ks=(e,t,n)=>{const r=ne(t)?t.split("."):t;let i=0;for(;i<r.length-1;){if(vg(e))return{};const s=gg(r[i]);!e[s]&&n&&(e[s]=new n),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={},++i}return vg(e)?{}:{obj:e,k:gg(r[i])}},yg=(e,t,n)=>{const{obj:r,k:i}=Ks(e,t,Object);if(r!==void 0||t.length===1){r[i]=n;return}let s=t[t.length-1],o=t.slice(0,t.length-1),a=Ks(e,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=Ks(e,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},NO=(e,t,n,r)=>{const{obj:i,k:s}=Ks(e,t,Object);i[s]=i[s]||[],i[s].push(n)},Dc=(e,t)=>{const{obj:n,k:r}=Ks(e,t);if(n)return n[r]},AO=(e,t,n)=>{const r=Dc(e,n);return r!==void 0?r:Dc(t,n)},Mb=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?ne(e[r])||e[r]instanceof String||ne(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):Mb(e[r],t[r],n):e[r]=t[r]);return e},vi=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var DO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const LO=e=>ne(e)?e.replace(/[&<>"'\/]/g,t=>DO[t]):e;class jO{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const MO=[" ",",","?","!",";"],FO=new jO(20),UO=(e,t,n)=>{t=t||"",n=n||"";const r=MO.filter(o=>t.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=FO.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(e);if(!s){const o=e.indexOf(n);o>0&&!i.test(e.substring(0,o))&&(s=!0)}return s},ef=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let i=e;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,a="";for(let l=s;l<r.length;++l)if(l!==s&&(a+=n),a+=r[l],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;s+=l-s+1;break}i=o}return i},Lc=e=>e&&e.replace("_","-"),$O={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class jc{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||$O,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,i){return i&&!this.debug?null:(ne(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new jc(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new jc(this.logger,t)}}var Nn=new jc;class kl{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a.apply(a,[t,...r])})}}class Sg extends kl{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;t.indexOf(".")>-1?a=t.split("."):(a=[t,n],r&&(Array.isArray(r)?a.push(...r):ne(r)&&s?a.push(...r.split(s)):a.push(r)));const l=Dc(this.data,a);return!l&&!n&&!r&&t.indexOf(".")>-1&&(t=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||!ne(r)?l:ef(this.data&&this.data[t]&&this.data[t][n],r,s)}addResource(t,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[t,n];r&&(a=a.concat(o?r.split(o):r)),t.indexOf(".")>-1&&(a=t.split("."),i=n,n=a[1]),this.addNamespaces(n),yg(this.data,a,i),s.silent||this.emit("added",t,n,r,i)}addResources(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(ne(r[s])||Array.isArray(r[s]))&&this.addResource(t,n,s,r[s],{silent:!0});i.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[t,n];t.indexOf(".")>-1&&(a=t.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let l=Dc(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?Mb(l,r,s):l={...l,...r},yg(this.data,a,l),o.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,n)}:this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var Fb={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(s=>{this.processors[s]&&(t=this.processors[s].process(t,n,r,i))}),t}};const bg={};class Mc extends kl{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),PO(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Nn.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const r=this.resolve(t,n);return r&&r.res!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&t.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!UO(t,r,i);if(o&&!a){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:ne(s)?[s]:s};const c=t.split(r);(r!==i||r===i&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),t=c.join(i)}return{key:t,namespaces:ne(s)?[s]:s}}translate(t,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(t[t.length-1],n),l=a[a.length-1],c=n.lng||this.language,d=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(d){const w=n.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${w}${o}`,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${w}${o}`}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const f=this.resolve(t,n);let u=f&&f.res;const h=f&&f.usedKey||o,m=f&&f.exactUsedKey||o,p=Object.prototype.toString.apply(u),v=["[object Number]","[object Function]","[object RegExp]"],g=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,S=!ne(u)&&typeof u!="boolean"&&typeof u!="number";if(y&&u&&S&&v.indexOf(p)<0&&!(ne(g)&&Array.isArray(u))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const w=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,u,{...n,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(f.res=w,f.usedParams=this.getUsedParamsDetails(n),f):w}if(s){const w=Array.isArray(u),k=w?[]:{},E=w?m:h;for(const T in u)if(Object.prototype.hasOwnProperty.call(u,T)){const I=`${E}${s}${T}`;k[T]=this.translate(I,{...n,joinArrays:!1,ns:a}),k[T]===I&&(k[T]=u[T])}u=k}}else if(y&&ne(g)&&Array.isArray(u))u=u.join(g),u&&(u=this.extendTranslation(u,t,n,r));else{let w=!1,k=!1;const E=n.count!==void 0&&!ne(n.count),T=Mc.hasDefaultValue(n),I=E?this.pluralResolver.getSuffix(c,n.count,n):"",U=n.ordinal&&E?this.pluralResolver.getSuffix(c,n.count,{ordinal:!1}):"",O=E&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),B=O&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${I}`]||n[`defaultValue${U}`]||n.defaultValue;!this.isValidLookup(u)&&T&&(w=!0,u=B),this.isValidLookup(u)||(k=!0,u=o);const j=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&k?void 0:u,H=T&&B!==u&&this.options.updateMissing;if(k||w||H){if(this.logger.log(H?"updateKey":"missingKey",c,l,o,H?B:u),s){const x=this.resolve(o,{...n,keySeparator:!1});x&&x.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let $=[];const A=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&A&&A[0])for(let x=0;x<A.length;x++)$.push(A[x]);else this.options.saveMissingTo==="all"?$=this.languageUtils.toResolveHierarchy(n.lng||this.language):$.push(n.lng||this.language);const q=(x,R,M)=>{const J=T&&M!==u?M:j;this.options.missingKeyHandler?this.options.missingKeyHandler(x,l,R,J,H,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(x,l,R,J,H,n),this.emit("missingKey",x,l,R,u)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?$.forEach(x=>{const R=this.pluralResolver.getSuffixes(x,n);O&&n[`defaultValue${this.options.pluralSeparator}zero`]&&R.indexOf(`${this.options.pluralSeparator}zero`)<0&&R.push(`${this.options.pluralSeparator}zero`),R.forEach(M=>{q([x],o+M,n[`defaultValue${M}`]||B)})}):q($,o,B))}u=this.extendTranslation(u,t,n,f,r),k&&u===o&&this.options.appendNamespaceToMissingKey&&(u=`${l}:${o}`),(k||w)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?u=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,w?u:void 0):u=this.options.parseMissingKeyHandler(u))}return i?(f.res=u,f.usedParams=this.getUsedParamsDetails(n),f):u}extendTranslation(t,n,r,i,s){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=ne(t)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(c){const u=t.match(this.interpolator.nestingRegexp);d=u&&u.length}let f=r.replace&&!ne(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),t=this.interpolator.interpolate(t,f,r.lng||this.language||i.usedLng,r),c){const u=t.match(this.interpolator.nestingRegexp),h=u&&u.length;d<h&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var u=arguments.length,h=new Array(u),m=0;m<u;m++)h[m]=arguments[m];return s&&s[0]===h[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${n[0]}`),null):o.translate(...h,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=ne(a)?[a]:a;return t!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(t=Fb.handle(l,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,o,a;return ne(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(l,n),d=c.key;i=d;let f=c.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const u=n.count!==void 0&&!ne(n.count),h=u&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),m=n.context!==void 0&&(ne(n.context)||typeof n.context=="number")&&n.context!=="",p=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);f.forEach(v=>{this.isValidLookup(r)||(a=v,!bg[`${p[0]}-${v}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(bg[`${p[0]}-${v}`]=!0,this.logger.warn(`key "${i}" for languages "${p.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(g=>{if(this.isValidLookup(r))return;o=g;const y=[d];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,d,g,v,n);else{let w;u&&(w=this.pluralResolver.getSuffix(g,n.count,n));const k=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(y.push(d+w),n.ordinal&&w.indexOf(E)===0&&y.push(d+w.replace(E,this.options.pluralSeparator)),h&&y.push(d+k)),m){const T=`${d}${this.options.contextSeparator}${n.context}`;y.push(T),u&&(y.push(T+w),n.ordinal&&w.indexOf(E)===0&&y.push(T+w.replace(E,this.options.pluralSeparator)),h&&y.push(T+k))}}let S;for(;S=y.pop();)this.isValidLookup(r)||(s=S,r=this.getResource(g,v,S,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,n,r,i):this.resourceStore.getResource(t,n,r,i)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!ne(t.replace);let i=r?t.replace:t;if(r&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}const ku=e=>e.charAt(0).toUpperCase()+e.slice(1);class wg{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Nn.create("languageUtils")}getScriptPartFromCode(t){if(t=Lc(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=Lc(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(ne(t)&&t.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(t)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=t.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=ku(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=ku(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=ku(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),ne(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],t),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return ne(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):ne(t)&&s(this.formatLanguageCode(t)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}let VO=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],BO={1:e=>+(e>1),2:e=>+(e!=1),3:e=>0,4:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,5:e=>e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5,6:e=>e==1?0:e>=2&&e<=4?1:2,7:e=>e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,8:e=>e==1?0:e==2?1:e!=8&&e!=11?2:3,9:e=>+(e>=2),10:e=>e==1?0:e==2?1:e<7?2:e<11?3:4,11:e=>e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3,12:e=>+(e%10!=1||e%100==11),13:e=>+(e!==0),14:e=>e==1?0:e==2?1:e==3?2:3,15:e=>e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2,16:e=>e%10==1&&e%100!=11?0:e!==0?1:2,17:e=>e==1||e%10==1&&e%100!=11?0:1,18:e=>e==0?0:e==1?1:2,19:e=>e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3,20:e=>e==1?0:e==0||e%100>0&&e%100<20?1:2,21:e=>e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0,22:e=>e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3};const zO=["v1","v2","v3"],HO=["v4"],Cg={zero:0,one:1,two:2,few:3,many:4,other:5},WO=()=>{const e={};return VO.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:BO[t.fc]}})}),e};class qO{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=Nn.create("pluralResolver"),(!this.options.compatibilityJSON||HO.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=WO(),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=Lc(t==="dev"?"en":t),i=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(r,{type:i})}catch{if(!t.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(t);o=this.getRule(l,n)}return this.pluralRulesCache[s]=o,o}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(i=>`${n}${i}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,s)=>Cg[i]-Cg[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(t,i,n)):[]}getSuffix(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(t,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,n){const r=t.noAbs?t.plurals(n):t.plurals(Math.abs(n));let i=t.numbers[r];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!zO.includes(this.options.compatibilityJSON)}}const kg=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=AO(e,t,n);return!s&&i&&ne(n)&&(s=ef(e,n,r),s===void 0&&(s=ef(t,n,r))),s},Eu=e=>e.replace(/\$/g,"$$$$");class KO{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Nn.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:c,unescapeSuffix:d,unescapePrefix:f,nestingPrefix:u,nestingPrefixEscaped:h,nestingSuffix:m,nestingSuffixEscaped:p,nestingOptionsSeparator:v,maxReplaces:g,alwaysFormat:y}=t.interpolation;this.escape=n!==void 0?n:LO,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?vi(s):o||"{{",this.suffix=a?vi(a):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=d?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=u?vi(u):h||vi("$t("),this.nestingSuffix=m?vi(m):p||vi(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=g||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,r,i){let s,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=h=>{if(h.indexOf(this.formatSeparator)<0){const g=kg(n,l,h,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(g,void 0,r,{...i,...n,interpolationkey:h}):g}const m=h.split(this.formatSeparator),p=m.shift().trim(),v=m.join(this.formatSeparator).trim();return this.format(kg(n,l,p,this.options.keySeparator,this.options.ignoreJSONStructure),v,r,{...i,...n,interpolationkey:p})};this.resetRegExp();const d=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,f=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:h=>Eu(h)},{regex:this.regexp,safeValue:h=>this.escapeValue?Eu(this.escape(h)):Eu(h)}].forEach(h=>{for(a=0;s=h.regex.exec(t);){const m=s[1].trim();if(o=c(m),o===void 0)if(typeof d=="function"){const v=d(t,s,i);o=ne(v)?v:""}else if(i&&Object.prototype.hasOwnProperty.call(i,m))o="";else if(f){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${m} for interpolating ${t}`),o="";else!ne(o)&&!this.useRawValueToEscape&&(o=mg(o));const p=h.safeValue(o);if(t=t.replace(s[0],p),f?(h.regex.lastIndex+=o.length,h.regex.lastIndex-=s[0].length):h.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,o;const a=(l,c)=>{const d=this.nestingOptionsSeparator;if(l.indexOf(d)<0)return l;const f=l.split(new RegExp(`${d}[ ]*{`));let u=`{${f[1]}`;l=f[0],u=this.interpolate(u,o);const h=u.match(/'/g),m=u.match(/"/g);(h&&h.length%2===0&&!m||m.length%2!==0)&&(u=u.replace(/'/g,'"'));try{o=JSON.parse(u),c&&(o={...c,...o})}catch(p){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,p),`${l}${d}${u}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;i=this.nestingRegexp.exec(t);){let l=[];o={...r},o=o.replace&&!ne(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const d=i[1].split(this.formatSeparator).map(f=>f.trim());i[1]=d.shift(),l=d,c=!0}if(s=n(a.call(this,i[1].trim(),o),o),s&&i[0]===t&&!ne(s))return s;ne(s)||(s=mg(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),s=""),c&&(s=l.reduce((d,f)=>this.format(d,f,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),t=t.replace(i[0],s),this.regexp.lastIndex=0}return t}}const GO=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);t==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),d=a.trim();n[d]||(n[d]=c),c==="false"&&(n[d]=!1),c==="true"&&(n[d]=!0),isNaN(c)||(n[d]=parseInt(c,10))}})}return{formatName:t,formatOptions:n}},yi=e=>{const t={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const o=r+JSON.stringify(s);let a=t[o];return a||(a=e(Lc(r),i),t[o]=a),a(n)}};class JO{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Nn.create("formatter"),this.options=t,this.formats={number:yi((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return s=>i.format(s)}),currency:yi((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>i.format(s)}),datetime:yi((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return s=>i.format(s)}),relativetime:yi((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return s=>i.format(s,r.range||"day")}),list:yi((n,r)=>{const i=new Intl.ListFormat(n,{...r});return s=>i.format(s)})},this.init(t)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=yi(n)}format(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(a=>a.indexOf(")")>-1)){const a=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,a)].join(this.formatSeparator)}return s.reduce((a,l)=>{const{formatName:c,formatOptions:d}=GO(l);if(this.formats[c]){let f=a;try{const u=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},h=u.locale||u.lng||i.locale||i.lng||r;f=this.formats[c](a,h,{...d,...i,...u})}catch(u){this.logger.warn(u)}return f}else this.logger.warn(`there was no format function for ${c}`);return a},t)}}const YO=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class QO extends kl{constructor(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Nn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(t,n,r,i){const s={},o={},a={},l={};return t.forEach(c=>{let d=!0;n.forEach(f=>{const u=`${c}|${f}`;!r.reload&&this.store.hasResourceBundle(c,f)?this.state[u]=2:this.state[u]<0||(this.state[u]===1?o[u]===void 0&&(o[u]=!0):(this.state[u]=1,d=!1,o[u]===void 0&&(o[u]=!0),s[u]===void 0&&(s[u]=!0),l[f]===void 0&&(l[f]=!0)))}),d||(a[c]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(t,n,r){const i=t.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),!n&&r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const a={};this.queue.forEach(l=>{NO(l.loaded,[s],o),YO(l,t),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});const d=l.loaded[c];d.length&&d.forEach(f=>{a[c][f]===void 0&&(a[c][f]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const a=(c,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(c&&d&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,i+1,s*2,o)},s);return}o(c,d)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const c=l(t,n);c&&typeof c.then=="function"?c.then(d=>a(null,d)).catch(a):a(null,c)}catch(c){a(c)}return}return l(t,n,a)}prepareLoading(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();ne(t)&&(t=this.languageUtils.toResolveHierarchy(t)),ne(n)&&(n=[n]);const s=this.queueLoad(t,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,a),this.loaded(t,o,a)})}saveMissing(t,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let d;c.length===5?d=c(t,n,r,i,l):d=c(t,n,r,i),d&&typeof d.then=="function"?d.then(f=>a(null,f)).catch(a):a(null,d)}catch(d){a(d)}else c(t,n,r,i,a,l)}!t||!t[0]||this.store.addResource(t[0],n,r,i)}}}const Eg=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),ne(e[1])&&(t.defaultValue=e[1]),ne(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Tg=e=>(ne(e.ns)&&(e.ns=[e.ns]),ne(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ne(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),ha=()=>{},XO=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class Eo extends kl{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Tg(t),this.services={},this.logger=Nn,this.modules={external:[]},XO(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(ne(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=Eg();this.options={...i,...this.options,...Tg(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Nn.init(s(this.modules.logger),this.options):Nn.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:typeof Intl<"u"&&(d=JO);const f=new wg(this.options);this.store=new Sg(this.options.resources,this.options);const u=this.services;u.logger=Nn,u.resourceStore=this.store,u.languageUtils=f,u.pluralResolver=new qO(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(u.formatter=s(d),u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new KO(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new QO(s(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",function(h){for(var m=arguments.length,p=new Array(m>1?m-1:0),v=1;v<m;v++)p[v-1]=arguments[v];t.emit(h,...p)}),this.modules.languageDetector&&(u.languageDetector=s(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=s(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new Mc(this.services,this.options),this.translator.on("*",function(h){for(var m=arguments.length,p=new Array(m>1?m-1:0),v=1;v<m;v++)p[v-1]=arguments[v];t.emit(h,...p)}),this.modules.external.forEach(h=>{h.init&&h.init(this)})}if(this.format=this.options.interpolation.format,r||(r=ha),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return t.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return t.store[d](...arguments),t}});const l=Ps(),c=()=>{const d=(f,u)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(u),r(f,u)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ha;const i=ne(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&s.indexOf(c)<0&&s.push(c)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(t,n,r){const i=Ps();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=ha),this.services.backendConnector.reload(t,n,s=>{i.resolve(),r(s)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Fb.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,n){var r=this;this.isLanguageChangingTo=t;const i=Ps();this.emit("languageChanging",t);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const c=ne(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,d=>{o(d,c)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(t),i}getFixedT(t,n,r){var i=this;const s=function(o,a){let l;if(typeof a!="object"){for(var c=arguments.length,d=new Array(c>2?c-2:0),f=2;f<c;f++)d[f-2]=arguments[f];l=i.options.overloadTranslationOptionHandler([o,a].concat(d))}else l={...a};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const u=i.options.keySeparator||".";let h;return l.keyPrefix&&Array.isArray(o)?h=o.map(m=>`${l.keyPrefix}${u}${m}`):h=l.keyPrefix?`${l.keyPrefix}${u}${o}`:o,i.t(h,l)};return ne(t)?s.lng=t:s.lngs=t,s.ns=n,s.keyPrefix=r,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=this.services.backendConnector.state[`${a}|${l}`];return c===-1||c===0||c===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,t)&&(!i||o(s,t)))}loadNamespaces(t,n){const r=Ps();return this.options.ns?(ne(t)&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=Ps();ne(t)&&(t=[t]);const i=this.options.preload||[],s=t.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new wg(Eg());return n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Eo(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ha;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},s=new Eo(i);return(t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r&&(s.store=new Sg(this.store.data,i),s.services.resourceStore=s.store),s.translator=new Mc(s.services,i),s.translator.on("*",function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),d=1;d<l;d++)c[d-1]=arguments[d];s.emit(a,...c)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const yt=Eo.createInstance();yt.createInstance=Eo.createInstance;yt.createInstance;yt.dir;yt.init;yt.loadResources;yt.reloadResources;yt.use;yt.changeLanguage;yt.getFixedT;yt.t;yt.exists;yt.setDefaultNamespace;yt.hasLoadedNamespace;yt.loadNamespaces;yt.loadLanguages;const Ub=C.createContext(void 0),ZO=e=>{const{call:t,children:n}=e;return b.jsx(Ub.Provider,{value:t,children:n})},je=()=>C.useContext(Ub),eN=(e,t)=>Object.entries(e).reduce((n,[r,i])=>(n[r]={[t]:i},n),{}),tN="en",tf="stream-video",Tu={debug:!1,currentLanguage:tN,fallbackLanguage:!1},nN=eN({},tf),Bh=e=>e;class rN{constructor(t={}){this.t=Bh,this.init=async()=>{try{this.t=await this.i18nInstance.init()}catch(o){console.error(`Failed to initialize translations: ${JSON.stringify(o)}`)}return this},this.changeLanguage=async(o,a)=>{if(!this._checkIsInitialized())return;const l=typeof window<"u"&&window.navigator?window.navigator.language:void 0;await this.i18nInstance.changeLanguage(o||l),a==null||a(this.currentLanguage)},this.registerTranslationsForLanguage=({lng:o,translations:a})=>{this._checkIsInitialized()&&this.i18nInstance.addResourceBundle(o,tf,a,!0,!0)},this._checkIsInitialized=()=>(this.i18nInstance.isInitialized||console.warn("I18n instance is not initialized. Call yourStreamI18nInstance.init()."),this.i18nInstance.isInitialized);const{debug:n=Tu.debug,currentLanguage:r=Tu.currentLanguage,fallbackLanguage:i=Tu.fallbackLanguage,translationsOverrides:s}=t;this.i18nInstance=yt.createInstance({debug:n,defaultNS:tf,fallbackLng:i,interpolation:{escapeValue:!1},keySeparator:!1,lng:r,nsSeparator:!1,parseMissingKeyHandler:o=>o,resources:nN}),s&&this.i18nInstance.on("initialized",()=>{Object.entries(s).forEach(([o,a])=>{this.registerTranslationsForLanguage({lng:o,translations:a})})})}get currentLanguage(){return this._checkIsInitialized(),this.i18nInstance.language}get isInitialized(){return this.i18nInstance.isInitialized}}const $b=C.createContext({t:Bh}),iN=({children:e,...t})=>{const{i18n:n,t:r}=sN(t);return b.jsx($b.Provider,{value:{t:r,i18n:n},children:e})},sN=({i18nInstance:e,language:t,fallbackLanguage:n,translationsOverrides:r})=>{const[i]=C.useState(()=>e||new rN({currentLanguage:t,fallbackLanguage:n,translationsOverrides:r})),[s,o]=C.useState(()=>Bh);return C.useEffect(()=>{const{isInitialized:a}=i;if(!a){i.init().then(l=>o(()=>l.i18nInstance.t));return}t&&(i==null?void 0:i.currentLanguage)!==t&&i.changeLanguage(t).catch(l=>{console.log("Error while changing language",l)})},[i,e,t,r]),{i18n:i,t:s}},Xe=()=>C.useContext($b),Vb=C.createContext(void 0),oN=({children:e,client:t,i18nInstance:n,language:r,translationsOverrides:i})=>b.jsx(Vb.Provider,{value:t,children:b.jsx(iN,{i18nInstance:n,language:r,translationsOverrides:i,children:e})}),aN=()=>C.useContext(Vb),X=(e,t)=>{const[n,r]=C.useState(()=>{try{return lP.getCurrentValue(e)}catch(i){if(typeof t>"u")throw i;return t}});return C.useEffect(()=>{const i=e.subscribe({next:r,error:s=>{console.log("An error occurred while reading an observable",s),t&&r(t)}});return()=>{i.unsubscribe()}},[t,e]),n},cN=()=>{var e;return typeof navigator>"u"?!1:((e=navigator.product)==null?void 0:e.toLowerCase())==="reactnative"},zh=Object.freeze([]),ve=()=>{const e=je();return e?e.state:(console.warn('You are using useCallState() outside a Call context. Please wrap your component in <StreamCall /> and provide a "call" instance.'),new kb)},Bb=()=>{const{recording$:e}=ve();return X(e)},lN=()=>{const{egress$:e}=ve(),t=X(e);return t?t.broadcasting:!1},uN=()=>{const{backstage$:e}=ve();return!X(e)},dN=()=>{const{blockedUserIds$:e}=ve();return X(e)},fN=()=>{const{createdAt$:e}=ve();return X(e)},hN=()=>{const{endedAt$:e}=ve();return X(e)},pN=()=>{const{startsAt$:e}=ve();return X(e)},mN=()=>{const{updatedAt$:e}=ve();return X(e)},gN=()=>{const{createdBy$:e}=ve();return X(e)},vN=()=>{const{custom$:e}=ve();return X(e)},yN=()=>{const{egress$:e}=ve();return X(e)},SN=()=>{const{ingress$:e}=ve();return X(e)},bN=()=>{const{session$:e}=ve();return X(e)},wN=()=>{const{settings$:e}=ve();return X(e)},CN=()=>{const{transcribing$:e}=ve();return X(e)},kN=()=>{const{endedBy$:e}=ve();return X(e)},EN=()=>{const{hasOngoingScreenShare$:e}=ve();return X(e)},TN=()=>{const{callStatsReport$:e}=ve();return X(e)},xN=()=>{const{dominantSpeaker$:e}=ve();return X(e)},RN=()=>{const{members$:e}=ve();return X(e)},_N=()=>{const{callingState$:e}=ve();return X(e)},IN=()=>{const{startedAt$:e}=ve();return X(e)},PN=({sortBy:e}={})=>{const{participants$:t}=ve(),n=X(t);return C.useMemo(()=>e?[...n].sort(e):n,[n,e])},ON=()=>{const{localParticipant$:e}=ve();return X(e)},NN=()=>{const{remoteParticipants$:e}=ve();return X(e)},AN=()=>{const{participantCount$:e}=ve();return X(e)},DN=()=>{const{anonymousParticipantCount$:e}=ve();return X(e)},LN=()=>{const{thumbnails$:e}=ve();return X(e)},zb=()=>{const{ownCapabilities$:e}=ve();return X(e)},jN=(...e)=>{const t=zb();return e.every(n=>t==null?void 0:t.includes(n))},MN=()=>{const e=je(),{camera:t}=e,n=C.useMemo(()=>t.listDevices(),[t]),{state:r}=t,i=X(r.status$),s=X(r.optimisticStatus$),o=X(r.direction$),a=X(r.mediaStream$),l=X(r.selectedDevice$),c=X(n,zh),d=X(r.hasBrowserPermission$);return{camera:t,status:i,optimisticStatus:s,isEnabled:i==="enabled",direction:o,mediaStream:a,devices:c,hasBrowserPermission:d,selectedDevice:l,isMute:i!=="enabled",optimisticIsMute:s!=="enabled"}},FN=()=>{const e=je(),{microphone:t}=e,n=C.useMemo(()=>t.listDevices(),[t]),{state:r}=t,i=X(r.status$),s=X(r.optimisticStatus$),o=X(r.mediaStream$),a=X(r.selectedDevice$),l=X(n,zh),c=X(r.hasBrowserPermission$),d=X(r.speakingWhileMuted$);return{microphone:t,status:i,optimisticStatus:s,isEnabled:i==="enabled",mediaStream:o,devices:l,selectedDevice:a,hasBrowserPermission:c,isSpeakingWhileMuted:d,isMute:i!=="enabled",optimisticIsMute:s!=="enabled"}},UN=()=>{if(cN())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");const e=je(),{speaker:t}=e,n=C.useMemo(()=>t.listDevices(),[t]),r=X(n,zh),i=X(t.state.selectedDevice$);return{speaker:t,devices:r,selectedDevice:i,isDeviceSelectionSupported:t.state.isDeviceSelectionSupported}},$N=()=>{const e=je(),{screenShare:t}=e,n=X(t.state.status$),r=X(t.state.optimisticStatus$),i=X(t.state.mediaStream$),s=n!=="enabled",o=r??n;return{screenShare:t,mediaStream:i,status:n,optimisticStatus:o,isMute:s,optimisticIsMute:o!=="enabled"}},VN=()=>{const e=je();return X(e.dynascaleManager.incomingVideoSettings$)};var BN=Object.freeze({__proto__:null,useAnonymousParticipantCount:DN,useCallBlockedUserIds:dN,useCallCallingState:_N,useCallCreatedAt:fN,useCallCreatedBy:gN,useCallCustomData:vN,useCallEgress:yN,useCallEndedAt:hN,useCallEndedBy:kN,useCallIngress:SN,useCallMembers:RN,useCallSession:bN,useCallSettings:wN,useCallStartedAt:IN,useCallStartsAt:pN,useCallState:ve,useCallStatsReport:TN,useCallThumbnail:LN,useCallUpdatedAt:mN,useCameraState:MN,useDominantSpeaker:xN,useHasOngoingScreenShare:EN,useHasPermissions:jN,useIncomingVideoSettings:VN,useIsCallHLSBroadcastingInProgress:lN,useIsCallLive:uN,useIsCallRecordingInProgress:Bb,useIsCallTranscribingInProgress:CN,useLocalParticipant:ON,useMicrophoneState:FN,useOwnCapabilities:zb,useParticipantCount:AN,useParticipants:PN,useRemoteParticipants:NN,useScreenShareState:$N,useSpeakerState:UN});const Hb=()=>{const e=aN();if(!e)throw new Error("StreamVideoClient isn't initialized or this hook is called outside of <StreamVideo> context.");return e.state},zN=()=>{const{calls$:e}=Hb();return X(e)},HN=()=>{const{connectedUser$:e}=Hb();return X(e)},WN=()=>{const e=je(),t=Bb(),[n,r]=C.useState(!1);return C.useEffect(()=>{r(s=>s&&!1)},[t]),{toggleCallRecording:C.useCallback(async()=>{try{r(!0),t?await(e==null?void 0:e.stopRecording()):await(e==null?void 0:e.startRecording())}catch(s){console.error("Failed start recording",s)}},[e,t]),isAwaitingResponse:n,isCallRecordingInProgress:t}},at=()=>BN,jt=({canRequestOnly:e,hasPermissionsOnly:t,requiredGrants:n,requireAll:r=!0,children:i})=>{const s=je(),{useCallSettings:o,useOwnCapabilities:a}=at(),l=a(),c=o(),d=n[r?"every":"some"](u=>l==null?void 0:l.includes(u));if(t)return d?b.jsx(b.Fragment,{children:i}):null;const f=n.some(u=>s==null?void 0:s.permissionsContext.canRequest(u,c));return e?f?b.jsx(b.Fragment,{children:i}):null:d||f?b.jsx(b.Fragment,{children:i}):null};function El(){return typeof window<"u"}function Ur(e){return Wb(e)?(e.nodeName||"").toLowerCase():"#document"}function Jt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function $n(e){var t;return(t=(Wb(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Wb(e){return El()?e instanceof Node||e instanceof Jt(e).Node:!1}function Fe(e){return El()?e instanceof Element||e instanceof Jt(e).Element:!1}function Ye(e){return El()?e instanceof HTMLElement||e instanceof Jt(e).HTMLElement:!1}function nf(e){return!El()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Jt(e).ShadowRoot}function Uo(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Qt(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function qN(e){return["table","td","th"].includes(Ur(e))}function Tl(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Hh(e){const t=xl(),n=Fe(e)?Qt(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function KN(e){let t=nr(e);for(;Ye(t)&&!Ar(t);){if(Hh(t))return t;if(Tl(t))return null;t=nr(t)}return null}function xl(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ar(e){return["html","body","#document"].includes(Ur(e))}function Qt(e){return Jt(e).getComputedStyle(e)}function Rl(e){return Fe(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function nr(e){if(Ur(e)==="html")return e;const t=e.assignedSlot||e.parentNode||nf(e)&&e.host||$n(e);return nf(t)?t.host:t}function qb(e){const t=nr(e);return Ar(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ye(t)&&Uo(t)?t:qb(t)}function xr(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=qb(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Jt(i);if(s){const a=rf(o);return t.concat(o,o.visualViewport||[],Uo(i)?i:[],a&&n?xr(a):[])}return t.concat(i,xr(i,[],n))}function rf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function qn(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function At(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&nf(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Wh(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Kb(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function Gb(e){return e.mozInputSource===0&&e.isTrusted?!0:sf()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Jb(e){return JN()?!1:!sf()&&e.width===0&&e.height===0||sf()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Yb(){return/apple/i.test(navigator.vendor)}function sf(){const e=/android/i;return e.test(Wh())||e.test(Kb())}function GN(){return Wh().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function JN(){return Kb().includes("jsdom/")}function xg(e,t){return["mouse","pen"].includes(e)}function YN(e){return"nativeEvent"in e}function QN(e){return e.matches("html,body")}function tn(e){return(e==null?void 0:e.ownerDocument)||document}function xu(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function zr(e){return"composedPath"in e?e.composedPath()[0]:e.target}const XN="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Qb(e){return Ye(e)&&e.matches(XN)}function it(e){e.preventDefault(),e.stopPropagation()}function of(e){return e?e.getAttribute("role")==="combobox"&&Qb(e):!1}const Dr=Math.min,Ht=Math.max,Fc=Math.round,Ai=Math.floor,Mn=e=>({x:e,y:e}),ZN={left:"right",right:"left",bottom:"top",top:"bottom"},eA={start:"end",end:"start"};function af(e,t,n){return Ht(e,Dr(t,n))}function hs(e,t){return typeof e=="function"?e(t):e}function Lr(e){return e.split("-")[0]}function ps(e){return e.split("-")[1]}function Xb(e){return e==="x"?"y":"x"}function qh(e){return e==="y"?"height":"width"}function oi(e){return["top","bottom"].includes(Lr(e))?"y":"x"}function Kh(e){return Xb(oi(e))}function tA(e,t,n){n===void 0&&(n=!1);const r=ps(e),i=Kh(e),s=qh(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Uc(o)),[o,Uc(o)]}function nA(e){const t=Uc(e);return[cf(e),t,cf(t)]}function cf(e){return e.replace(/start|end/g,t=>eA[t])}function rA(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function iA(e,t,n,r){const i=ps(e);let s=rA(Lr(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(cf)))),s}function Uc(e){return e.replace(/left|right|bottom|top/g,t=>ZN[t])}function sA(e){return{top:0,right:0,bottom:0,left:0,...e}}function Zb(e){return typeof e!="number"?sA(e):{top:e,right:e,bottom:e,left:e}}function $c(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var oA=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Vc=oA.join(","),ew=typeof Element>"u",is=ew?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Bc=!ew&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},zc=function e(t,n){var r;n===void 0&&(n=!0);var i=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),s=i===""||i==="true",o=s||n&&t&&e(t.parentNode);return o},aA=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},cA=function(t,n,r){if(zc(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(Vc));return n&&is.call(t,Vc)&&i.unshift(t),i=i.filter(r),i},lA=function e(t,n,r){for(var i=[],s=Array.from(t);s.length;){var o=s.shift();if(!zc(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=e(l,!0,r);r.flatten?i.push.apply(i,c):i.push({scopeParent:o,candidates:c})}else{var d=is.call(o,Vc);d&&r.filter(o)&&(n||!t.includes(o))&&i.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),u=!zc(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&u){var h=e(f===!0?o.children:f.children,!0,r);r.flatten?i.push.apply(i,h):i.push({scopeParent:o,candidates:h})}else s.unshift.apply(s,o.children)}}return i},tw=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},nw=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||aA(t))&&!tw(t)?0:t.tabIndex},uA=function(t,n){var r=nw(t);return r<0&&n&&!tw(t)?0:r},dA=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},rw=function(t){return t.tagName==="INPUT"},fA=function(t){return rw(t)&&t.type==="hidden"},hA=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},pA=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},mA=function(t){if(!t.name)return!0;var n=t.form||Bc(t),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(t.name));else try{i=r(t.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=pA(i,t.form);return!s||s===t},gA=function(t){return rw(t)&&t.type==="radio"},vA=function(t){return gA(t)&&!mA(t)},yA=function(t){var n,r=t&&Bc(t),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==t){var o,a,l;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!s&&i;){var c,d,f;r=Bc(i),i=(c=r)===null||c===void 0?void 0:c.host,s=!!((d=i)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return s},Rg=function(t){var n=t.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},SA=function(t,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var s=is.call(t,"details>summary:first-of-type"),o=s?t.parentElement:t;if(is.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=t;t;){var l=t.parentElement,c=Bc(t);if(l&&!l.shadowRoot&&i(l)===!0)return Rg(t);t.assignedSlot?t=t.assignedSlot:!l&&c!==t.ownerDocument?t=c.host:t=l}t=a}if(yA(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Rg(t);return!1},bA=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return is.call(n,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}n=n.parentElement}return!1},wA=function(t,n){return!(n.disabled||zc(n)||fA(n)||SA(n,t)||hA(n)||bA(n))},lf=function(t,n){return!(vA(n)||nw(n)<0||!wA(t,n))},CA=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},kA=function e(t){var n=[],r=[];return t.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,l=uA(a,o),c=o?e(i.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:s,tabIndex:l,item:i,isScope:o,content:c})}),r.sort(dA).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},_l=function(t,n){n=n||{};var r;return n.getShadowRoot?r=lA([t],n.includeContainer,{filter:lf.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:CA}):r=cA(t,n.includeContainer,lf.bind(null,n)),kA(r)},EA=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return is.call(t,Vc)===!1?!1:lf(n,t)};function _g(e,t,n){let{reference:r,floating:i}=e;const s=oi(t),o=Kh(t),a=qh(o),l=Lr(t),c=s==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,u=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:d,y:r.y-i.height};break;case"bottom":h={x:d,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(ps(t)){case"start":h[o]-=u*(n&&c?-1:1);break;case"end":h[o]+=u*(n&&c?-1:1);break}return h}const TA=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:f}=_g(c,r,l),u=r,h={},m=0;for(let p=0;p<a.length;p++){const{name:v,fn:g}=a[p],{x:y,y:S,data:w,reset:k}=await g({x:d,y:f,initialPlacement:r,placement:u,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});d=y??d,f=S??f,h={...h,[v]:{...h[v],...w}},k&&m<=50&&(m++,typeof k=="object"&&(k.placement&&(u=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):k.rects),{x:d,y:f}=_g(c,u,l)),p=-1)}return{x:d,y:f,placement:u,strategy:i,middlewareData:h}};async function Gh(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:u=!1,padding:h=0}=hs(t,e),m=Zb(h),v=a[u?f==="floating"?"reference":"floating":f],g=$c(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),y=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},k=$c(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:S,strategy:l}):y);return{top:(g.top-k.top+m.top)/w.y,bottom:(k.bottom-g.bottom+m.bottom)/w.y,left:(g.left-k.left+m.left)/w.x,right:(k.right-g.right+m.right)/w.x}}const xA=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:d=0}=hs(e,t)||{};if(c==null)return{};const f=Zb(d),u={x:n,y:r},h=Kh(i),m=qh(h),p=await o.getDimensions(c),v=h==="y",g=v?"top":"left",y=v?"bottom":"right",S=v?"clientHeight":"clientWidth",w=s.reference[m]+s.reference[h]-u[h]-s.floating[m],k=u[h]-s.reference[h],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let T=E?E[S]:0;(!T||!await(o.isElement==null?void 0:o.isElement(E)))&&(T=a.floating[S]||s.floating[m]);const I=w/2-k/2,U=T/2-p[m]/2-1,O=Dr(f[g],U),B=Dr(f[y],U),P=O,j=T-p[m]-B,H=T/2-p[m]/2+I,$=af(P,H,j),A=!l.arrow&&ps(i)!=null&&H!==$&&s.reference[m]/2-(H<P?O:B)-p[m]/2<0,q=A?H<P?H-P:H-j:0;return{[h]:u[h]+q,data:{[h]:$,centerOffset:H-$-q,...A&&{alignmentOffset:q}},reset:A}}}),RA=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:u,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...v}=hs(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const g=Lr(i),y=oi(a),S=Lr(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=u||(S||!p?[Uc(a)]:nA(a)),E=m!=="none";!u&&E&&k.push(...iA(a,p,m,w));const T=[a,...k],I=await Gh(t,v),U=[];let O=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&U.push(I[g]),f){const H=tA(i,o,w);U.push(I[H[0]],I[H[1]])}if(O=[...O,{placement:i,overflows:U}],!U.every(H=>H<=0)){var B,P;const H=(((B=s.flip)==null?void 0:B.index)||0)+1,$=T[H];if($)return{data:{index:H,overflows:O},reset:{placement:$}};let A=(P=O.filter(q=>q.overflows[0]<=0).sort((q,x)=>q.overflows[1]-x.overflows[1])[0])==null?void 0:P.placement;if(!A)switch(h){case"bestFit":{var j;const q=(j=O.filter(x=>{if(E){const R=oi(x.placement);return R===y||R==="y"}return!0}).map(x=>[x.placement,x.overflows.filter(R=>R>0).reduce((R,M)=>R+M,0)]).sort((x,R)=>x[1]-R[1])[0])==null?void 0:j[0];q&&(A=q);break}case"initialPlacement":A=a;break}if(i!==A)return{reset:{placement:A}}}return{}}}};async function _A(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Lr(n),a=ps(n),l=oi(n)==="y",c=["left","top"].includes(o)?-1:1,d=s&&l?-1:1,f=hs(t,e);let{mainAxis:u,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*d,y:u*c}:{x:u*c,y:h*d}}const IA=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await _A(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},PA=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:g,y}=v;return{x:g,y}}},...l}=hs(e,t),c={x:n,y:r},d=await Gh(t,l),f=oi(Lr(i)),u=Xb(f);let h=c[u],m=c[f];if(s){const v=u==="y"?"top":"left",g=u==="y"?"bottom":"right",y=h+d[v],S=h-d[g];h=af(y,h,S)}if(o){const v=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=m+d[v],S=m-d[g];m=af(y,m,S)}const p=a.fn({...t,[u]:h,[f]:m});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[u]:s,[f]:o}}}}}},OA=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...c}=hs(e,t),d=await Gh(t,c),f=Lr(i),u=ps(i),h=oi(i)==="y",{width:m,height:p}=s.floating;let v,g;f==="top"||f==="bottom"?(v=f,g=u===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(g=f,v=u==="end"?"top":"bottom");const y=p-d.top-d.bottom,S=m-d.left-d.right,w=Dr(p-d[v],y),k=Dr(m-d[g],S),E=!t.middlewareData.shift;let T=w,I=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=S),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(T=y),E&&!u){const O=Ht(d.left,0),B=Ht(d.right,0),P=Ht(d.top,0),j=Ht(d.bottom,0);h?I=m-2*(O!==0||B!==0?O+B:Ht(d.left,d.right)):T=p-2*(P!==0||j!==0?P+j:Ht(d.top,d.bottom))}await l({...t,availableWidth:I,availableHeight:T});const U=await o.getDimensions(a.floating);return m!==U.width||p!==U.height?{reset:{rects:!0}}:{}}}};function iw(e){const t=Qt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ye(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=Fc(n)!==s||Fc(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Jh(e){return Fe(e)?e:e.contextElement}function Hi(e){const t=Jh(e);if(!Ye(t))return Mn(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=iw(t);let o=(s?Fc(n.width):n.width)/r,a=(s?Fc(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const NA=Mn(0);function sw(e){const t=Jt(e);return!xl()||!t.visualViewport?NA:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function AA(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Jt(e)?!1:t}function ai(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=Jh(e);let o=Mn(1);t&&(r?Fe(r)&&(o=Hi(r)):o=Hi(e));const a=AA(s,n,r)?sw(s):Mn(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,d=i.width/o.x,f=i.height/o.y;if(s){const u=Jt(s),h=r&&Fe(r)?Jt(r):r;let m=u,p=rf(m);for(;p&&r&&h!==m;){const v=Hi(p),g=p.getBoundingClientRect(),y=Qt(p),S=g.left+(p.clientLeft+parseFloat(y.paddingLeft))*v.x,w=g.top+(p.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,f*=v.y,l+=S,c+=w,m=Jt(p),p=rf(m)}}return $c({width:d,height:f,x:l,y:c})}function Yh(e,t){const n=Rl(e).scrollLeft;return t?t.left+n:ai($n(e)).left+n}function ow(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:Yh(e,r)),s=r.top+t.scrollTop;return{x:i,y:s}}function DA(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=$n(r),a=t?Tl(t.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Mn(1);const d=Mn(0),f=Ye(r);if((f||!f&&!s)&&((Ur(r)!=="body"||Uo(o))&&(l=Rl(r)),Ye(r))){const h=ai(r);c=Hi(r),d.x=h.x+r.clientLeft,d.y=h.y+r.clientTop}const u=o&&!f&&!s?ow(o,l,!0):Mn(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+u.x,y:n.y*c.y-l.scrollTop*c.y+d.y+u.y}}function LA(e){return Array.from(e.getClientRects())}function jA(e){const t=$n(e),n=Rl(e),r=e.ownerDocument.body,i=Ht(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Ht(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Yh(e);const a=-n.scrollTop;return Qt(r).direction==="rtl"&&(o+=Ht(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function MA(e,t){const n=Jt(e),r=$n(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=xl();(!c||c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function FA(e,t){const n=ai(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Ye(e)?Hi(e):Mn(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function Ig(e,t,n){let r;if(t==="viewport")r=MA(e,n);else if(t==="document")r=jA($n(e));else if(Fe(t))r=FA(t,n);else{const i=sw(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return $c(r)}function aw(e,t){const n=nr(e);return n===t||!Fe(n)||Ar(n)?!1:Qt(n).position==="fixed"||aw(n,t)}function UA(e,t){const n=t.get(e);if(n)return n;let r=xr(e,[],!1).filter(a=>Fe(a)&&Ur(a)!=="body"),i=null;const s=Qt(e).position==="fixed";let o=s?nr(e):e;for(;Fe(o)&&!Ar(o);){const a=Qt(o),l=Hh(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Uo(o)&&!l&&aw(e,o))?r=r.filter(d=>d!==o):i=a,o=nr(o)}return t.set(e,r),r}function $A(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?Tl(t)?[]:UA(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const f=Ig(t,d,i);return c.top=Ht(f.top,c.top),c.right=Dr(f.right,c.right),c.bottom=Dr(f.bottom,c.bottom),c.left=Ht(f.left,c.left),c},Ig(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function VA(e){const{width:t,height:n}=iw(e);return{width:t,height:n}}function BA(e,t,n){const r=Ye(t),i=$n(t),s=n==="fixed",o=ai(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=Mn(0);if(r||!r&&!s)if((Ur(t)!=="body"||Uo(i))&&(a=Rl(t)),r){const u=ai(t,!0,s,t);l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}else i&&(l.x=Yh(i));const c=i&&!r&&!s?ow(i,a):Mn(0),d=o.left+a.scrollLeft-l.x-c.x,f=o.top+a.scrollTop-l.y-c.y;return{x:d,y:f,width:o.width,height:o.height}}function Ru(e){return Qt(e).position==="static"}function Pg(e,t){if(!Ye(e)||Qt(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return $n(e)===n&&(n=n.ownerDocument.body),n}function cw(e,t){const n=Jt(e);if(Tl(e))return n;if(!Ye(e)){let i=nr(e);for(;i&&!Ar(i);){if(Fe(i)&&!Ru(i))return i;i=nr(i)}return n}let r=Pg(e,t);for(;r&&qN(r)&&Ru(r);)r=Pg(r,t);return r&&Ar(r)&&Ru(r)&&!Hh(r)?n:r||KN(e)||n}const zA=async function(e){const t=this.getOffsetParent||cw,n=this.getDimensions,r=await n(e.floating);return{reference:BA(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function HA(e){return Qt(e).direction==="rtl"}const WA={convertOffsetParentRelativeRectToViewportRelativeRect:DA,getDocumentElement:$n,getClippingRect:$A,getOffsetParent:cw,getElementRects:zA,getClientRects:LA,getDimensions:VA,getScale:Hi,isElement:Fe,isRTL:HA};function qA(e,t){let n=null,r;const i=$n(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:d,width:f,height:u}=e.getBoundingClientRect();if(a||t(),!f||!u)return;const h=Ai(d),m=Ai(i.clientWidth-(c+f)),p=Ai(i.clientHeight-(d+u)),v=Ai(c),y={rootMargin:-h+"px "+-m+"px "+-p+"px "+-v+"px",threshold:Ht(0,Dr(1,l))||1};let S=!0;function w(k){const E=k[0].intersectionRatio;if(E!==l){if(!S)return o();E?o(!1,E):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S=!1}try{n=new IntersectionObserver(w,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,y)}n.observe(e)}return o(!0),s}function lw(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Jh(e),d=i||s?[...c?xr(c):[],...xr(t)]:[];d.forEach(g=>{i&&g.addEventListener("scroll",n,{passive:!0}),s&&g.addEventListener("resize",n)});const f=c&&a?qA(c,n):null;let u=-1,h=null;o&&(h=new ResizeObserver(g=>{let[y]=g;y&&y.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{var S;(S=h)==null||S.observe(t)})),n()}),c&&!l&&h.observe(c),h.observe(t));let m,p=l?ai(e):null;l&&v();function v(){const g=ai(e);p&&(g.x!==p.x||g.y!==p.y||g.width!==p.width||g.height!==p.height)&&n(),p=g,m=requestAnimationFrame(v)}return n(),()=>{var g;d.forEach(y=>{i&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),f==null||f(),(g=h)==null||g.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const KA=IA,GA=PA,JA=RA,YA=OA,Og=xA,QA=(e,t,n)=>{const r=new Map,i={platform:WA,...n},s={...i.platform,_c:r};return TA(e,t,{...i,platform:s})};var Va=typeof document<"u"?C.useLayoutEffect:C.useEffect;function Hc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Hc(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!Hc(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function uw(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ng(e,t){const n=uw(e);return Math.round(t*n)/n}function _u(e){const t=C.useRef(e);return Va(()=>{t.current=e}),t}function XA(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[d,f]=C.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[u,h]=C.useState(r);Hc(u,r)||h(r);const[m,p]=C.useState(null),[v,g]=C.useState(null),y=C.useCallback(x=>{x!==E.current&&(E.current=x,p(x))},[]),S=C.useCallback(x=>{x!==T.current&&(T.current=x,g(x))},[]),w=s||m,k=o||v,E=C.useRef(null),T=C.useRef(null),I=C.useRef(d),U=l!=null,O=_u(l),B=_u(i),P=_u(c),j=C.useCallback(()=>{if(!E.current||!T.current)return;const x={placement:t,strategy:n,middleware:u};B.current&&(x.platform=B.current),QA(E.current,T.current,x).then(R=>{const M={...R,isPositioned:P.current!==!1};H.current&&!Hc(I.current,M)&&(I.current=M,ch.flushSync(()=>{f(M)}))})},[u,t,n,B,P]);Va(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(x=>({...x,isPositioned:!1})))},[c]);const H=C.useRef(!1);Va(()=>(H.current=!0,()=>{H.current=!1}),[]),Va(()=>{if(w&&(E.current=w),k&&(T.current=k),w&&k){if(O.current)return O.current(w,k,j);j()}},[w,k,j,O,U]);const $=C.useMemo(()=>({reference:E,floating:T,setReference:y,setFloating:S}),[y,S]),A=C.useMemo(()=>({reference:w,floating:k}),[w,k]),q=C.useMemo(()=>{const x={position:n,left:0,top:0};if(!A.floating)return x;const R=Ng(A.floating,d.x),M=Ng(A.floating,d.y);return a?{...x,transform:"translate("+R+"px, "+M+"px)",...uw(A.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:R,top:M}},[n,a,A.floating,d.x,d.y]);return C.useMemo(()=>({...d,update:j,refs:$,elements:A,floatingStyles:q}),[d,j,$,A,q])}const ZA=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Og({element:r.current,padding:i}).fn(n):{}:r?Og({element:r,padding:i}).fn(n):{}}}},eD=(e,t)=>({...KA(e),options:[e,t]}),tD=(e,t)=>({...GA(e),options:[e,t]}),dw=(e,t)=>({...JA(e),options:[e,t]}),nD=(e,t)=>({...YA(e),options:[e,t]}),rD=(e,t)=>({...ZA(e),options:[e,t]}),fw={...Zw},iD=fw.useInsertionEffect,sD=iD||(e=>e());function kt(e){const t=C.useRef(()=>{});return sD(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}const Qh="ArrowUp",$o="ArrowDown",Rr="ArrowLeft",_r="ArrowRight";function pa(e,t,n){return Math.floor(e/t)!==n}function Gs(e,t){return t<0||t>=e.current.length}function Iu(e,t){return ft(e,{disabledIndices:t})}function Ag(e,t){return ft(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function ft(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:s=1}=t===void 0?{}:t;const o=e.current;let a=n;do a+=r?-s:s;while(a>=0&&a<=o.length-1&&Ba(o,a,i));return a}function oD(e,t){let{event:n,orientation:r,loop:i,rtl:s,cols:o,disabledIndices:a,minIndex:l,maxIndex:c,prevIndex:d,stopEvent:f=!1}=t,u=d;if(n.key===Qh){if(f&&it(n),d===-1)u=c;else if(u=ft(e,{startingIndex:u,amount:o,decrement:!0,disabledIndices:a}),i&&(d-o<l||u<0)){const h=d%o,m=c%o,p=c-(m-h);m===h?u=c:u=m>h?p:p-o}Gs(e,u)&&(u=d)}if(n.key===$o&&(f&&it(n),d===-1?u=l:(u=ft(e,{startingIndex:d,amount:o,disabledIndices:a}),i&&d+o>c&&(u=ft(e,{startingIndex:d%o-o,amount:o,disabledIndices:a}))),Gs(e,u)&&(u=d)),r==="both"){const h=Ai(d/o);n.key===(s?Rr:_r)&&(f&&it(n),d%o!==o-1?(u=ft(e,{startingIndex:d,disabledIndices:a}),i&&pa(u,o,h)&&(u=ft(e,{startingIndex:d-d%o-1,disabledIndices:a}))):i&&(u=ft(e,{startingIndex:d-d%o-1,disabledIndices:a})),pa(u,o,h)&&(u=d)),n.key===(s?_r:Rr)&&(f&&it(n),d%o!==0?(u=ft(e,{startingIndex:d,decrement:!0,disabledIndices:a}),i&&pa(u,o,h)&&(u=ft(e,{startingIndex:d+(o-d%o),decrement:!0,disabledIndices:a}))):i&&(u=ft(e,{startingIndex:d+(o-d%o),decrement:!0,disabledIndices:a})),pa(u,o,h)&&(u=d));const m=Ai(c/o)===h;Gs(e,u)&&(i&&m?u=n.key===(s?_r:Rr)?c:ft(e,{startingIndex:d-d%o-1,disabledIndices:a}):u=d)}return u}function aD(e,t,n){const r=[];let i=0;return e.forEach((s,o)=>{let{width:a,height:l}=s,c=!1;for(n&&(i=0);!c;){const d=[];for(let f=0;f<a;f++)for(let u=0;u<l;u++)d.push(i+f+u*t);i%t+a<=t&&d.every(f=>r[f]==null)?(d.forEach(f=>{r[f]=o}),c=!0):i++}}),[...r]}function cD(e,t,n,r,i){if(e===-1)return-1;const s=n.indexOf(e),o=t[e];switch(i){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*r:s;case"br":return n.lastIndexOf(e)}}function lD(e,t){return t.flatMap((n,r)=>e.includes(n)?[r]:[])}function Ba(e,t,n){if(n)return n.includes(t);const r=e[t];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}var ke=typeof document<"u"?C.useLayoutEffect:C.useEffect;function uD(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}function dD(e,t){if(e.size!==t.size)return!1;for(const[n,r]of e.entries())if(r!==t.get(n))return!1;return!0}const hw=C.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function fD(e){const{children:t,elementsRef:n,labelsRef:r}=e,[i,s]=C.useState(()=>new Map),o=C.useCallback(l=>{s(c=>new Map(c).set(l,null))},[]),a=C.useCallback(l=>{s(c=>{const d=new Map(c);return d.delete(l),d})},[]);return ke(()=>{const l=new Map(i);Array.from(l.keys()).sort(uD).forEach((d,f)=>{l.set(d,f)}),dD(i,l)||s(l)},[i]),C.createElement(hw.Provider,{value:C.useMemo(()=>({register:o,unregister:a,map:i,elementsRef:n,labelsRef:r}),[o,a,i,n,r])},t)}function hD(e){e===void 0&&(e={});const{label:t}=e,{register:n,unregister:r,map:i,elementsRef:s,labelsRef:o}=C.useContext(hw),[a,l]=C.useState(null),c=C.useRef(null),d=C.useCallback(f=>{if(c.current=f,a!==null&&(s.current[a]=f,o)){var u;const h=t!==void 0;o.current[a]=h?t:(u=f==null?void 0:f.textContent)!=null?u:null}},[a,s,o,t]);return ke(()=>{const f=c.current;if(f)return n(f),()=>{r(f)}},[n,r]),ke(()=>{const f=c.current?i.get(c.current):null;f!=null&&l(f)},[i]),C.useMemo(()=>({ref:d,index:a??-1}),[a,d])}function ss(){return ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ss.apply(this,arguments)}let Dg=!1,pD=0;const Lg=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+pD++;function mD(){const[e,t]=C.useState(()=>Dg?Lg():void 0);return ke(()=>{e==null&&t(Lg())},[]),C.useEffect(()=>{Dg=!0},[]),e}const gD=fw.useId,Il=gD||mD,vD=C.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:i},middlewareData:{arrow:s,shift:o}},width:a=14,height:l=7,tipRadius:c=0,strokeWidth:d=0,staticOffset:f,stroke:u,d:h,style:{transform:m,...p}={},...v}=t,g=Il(),[y,S]=C.useState(!1);if(ke(()=>{if(!i)return;Qt(i).direction==="rtl"&&S(!0)},[i]),!i)return null;const[w,k]=r.split("-"),E=w==="top"||w==="bottom";let T=f;(E&&o!=null&&o.x||!E&&o!=null&&o.y)&&(T=null);const I=d*2,U=I/2,O=a/2*(c/-8+1),B=l/2*c/4,P=!!h,j=T&&k==="end"?"bottom":"top";let H=T&&k==="end"?"right":"left";T&&y&&(H=k==="end"?"left":"right");const $=(s==null?void 0:s.x)!=null?T||s.x:"",A=(s==null?void 0:s.y)!=null?T||s.y:"",q=h||"M0,0"+(" H"+a)+(" L"+(a-O)+","+(l-B))+(" Q"+a/2+","+l+" "+O+","+(l-B))+" Z",x={top:P?"rotate(180deg)":"",left:P?"rotate(90deg)":"rotate(-90deg)",bottom:P?"":"rotate(180deg)",right:P?"rotate(-90deg)":"rotate(90deg)"}[w];return C.createElement("svg",ss({},v,{"aria-hidden":!0,ref:n,width:P?a:a+I,height:a,viewBox:"0 0 "+a+" "+(l>a?l:a),style:{position:"absolute",pointerEvents:"none",[H]:$,[j]:A,[w]:E||P?"100%":"calc(100% - "+I/2+"px)",transform:[x,m].filter(R=>!!R).join(" "),...p}}),I>0&&C.createElement("path",{clipPath:"url(#"+g+")",fill:"none",stroke:u,strokeWidth:I+(h?0:1),d:q}),C.createElement("path",{stroke:I&&!h?v.fill:"none",d:q}),C.createElement("clipPath",{id:g},C.createElement("rect",{x:-U,y:U*(P?-1:1),width:a+I,height:a})))});function yD(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const SD=C.createContext(null),bD=C.createContext(null),Xh=()=>{var e;return((e=C.useContext(SD))==null?void 0:e.id)||null},Pl=()=>C.useContext(bD);function To(e){return"data-floating-ui-"+e}function Pn(e){const t=C.useRef(e);return ke(()=>{t.current=e}),t}let jg=0;function lr(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=t;r&&cancelAnimationFrame(jg);const s=()=>e==null?void 0:e.focus({preventScroll:n});i?s():jg=requestAnimationFrame(s)}function wD(e,t){var n;let r=[],i=(n=e.find(s=>s.id===t))==null?void 0:n.parentId;for(;i;){const s=e.find(o=>o.id===i);i=s==null?void 0:s.parentId,s&&(r=r.concat(s))}return r}function Wi(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}function CD(e,t){let n,r=-1;function i(s,o){o>r&&(n=s,r=o),Wi(e,s).forEach(l=>{i(l.id,o+1)})}return i(t,0),e.find(s=>s.id===n)}let Si=new WeakMap,ma=new WeakSet,ga={},Pu=0;const kD=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,pw=e=>e&&(e.host||pw(e.parentNode)),ED=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=pw(n);return e.contains(r)?r:null}).filter(n=>n!=null);function TD(e,t,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=ED(t,e),a=new Set,l=new Set(o),c=[];ga[i]||(ga[i]=new WeakMap);const d=ga[i];o.forEach(f),u(t),a.clear();function f(h){!h||a.has(h)||(a.add(h),h.parentNode&&f(h.parentNode))}function u(h){!h||l.has(h)||[].forEach.call(h.children,m=>{if(Ur(m)!=="script")if(a.has(m))u(m);else{const p=s?m.getAttribute(s):null,v=p!==null&&p!=="false",g=(Si.get(m)||0)+1,y=(d.get(m)||0)+1;Si.set(m,g),d.set(m,y),c.push(m),g===1&&v&&ma.add(m),y===1&&m.setAttribute(i,""),!v&&s&&m.setAttribute(s,"true")}})}return Pu++,()=>{c.forEach(h=>{const m=(Si.get(h)||0)-1,p=(d.get(h)||0)-1;Si.set(h,m),d.set(h,p),m||(!ma.has(h)&&s&&h.removeAttribute(s),ma.delete(h)),p||h.removeAttribute(i)}),Pu--,Pu||(Si=new WeakMap,Si=new WeakMap,ma=new WeakSet,ga={})}}function Mg(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=tn(e[0]).body;return TD(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const xo=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function mw(e,t){const n=_l(e,xo());t==="prev"&&n.reverse();const r=n.indexOf(qn(tn(e)));return n.slice(r+1)[0]}function gw(){return mw(document.body,"next")}function vw(){return mw(document.body,"prev")}function Js(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!At(n,r)}function xD(e){_l(e,xo()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Fg(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const Ol={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let RD;function Ug(e){e.key==="Tab"&&(e.target,clearTimeout(RD))}const Wc=C.forwardRef(function(t,n){const[r,i]=C.useState();ke(()=>(Yb()&&i("button"),document.addEventListener("keydown",Ug),()=>{document.removeEventListener("keydown",Ug)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[To("focus-guard")]:"",style:Ol};return C.createElement("span",ss({},t,s))}),yw=C.createContext(null),$g=To("portal");function _D(e){e===void 0&&(e={});const{id:t,root:n}=e,r=Il(),i=Sw(),[s,o]=C.useState(null),a=C.useRef(null);return ke(()=>()=>{s==null||s.remove(),queueMicrotask(()=>{a.current=null})},[s]),ke(()=>{if(!r||a.current)return;const l=t?document.getElementById(t):null;if(!l)return;const c=document.createElement("div");c.id=r,c.setAttribute($g,""),l.appendChild(c),a.current=c,o(c)},[t,r]),ke(()=>{if(n===null||!r||a.current)return;let l=n||(i==null?void 0:i.portalNode);l&&!Fe(l)&&(l=l.current),l=l||document.body;let c=null;t&&(c=document.createElement("div"),c.id=t,l.appendChild(c));const d=document.createElement("div");d.id=r,d.setAttribute($g,""),l=c||l,l.appendChild(d),a.current=d,o(d)},[t,n,r,i]),s}function ID(e){const{children:t,id:n,root:r,preserveTabOrder:i=!0}=e,s=_D({id:n,root:r}),[o,a]=C.useState(null),l=C.useRef(null),c=C.useRef(null),d=C.useRef(null),f=C.useRef(null),u=o==null?void 0:o.modal,h=o==null?void 0:o.open,m=!!o&&!o.modal&&o.open&&i&&!!(r||s);return C.useEffect(()=>{if(!s||!i||u)return;function p(v){s&&Js(v)&&(v.type==="focusin"?Fg:xD)(s)}return s.addEventListener("focusin",p,!0),s.addEventListener("focusout",p,!0),()=>{s.removeEventListener("focusin",p,!0),s.removeEventListener("focusout",p,!0)}},[s,i,u]),C.useEffect(()=>{s&&(h||Fg(s))},[h,s]),C.createElement(yw.Provider,{value:C.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:d,afterInsideRef:f,portalNode:s,setFocusManagerState:a}),[i,s])},m&&s&&C.createElement(Wc,{"data-type":"outside",ref:l,onFocus:p=>{if(Js(p,s)){var v;(v=d.current)==null||v.focus()}else{const g=vw()||(o==null?void 0:o.refs.domReference.current);g==null||g.focus()}}}),m&&s&&C.createElement("span",{"aria-owns":s.id,style:Ol}),s&&ch.createPortal(t,s),m&&s&&C.createElement(Wc,{"data-type":"outside",ref:c,onFocus:p=>{if(Js(p,s)){var v;(v=f.current)==null||v.focus()}else{const g=gw()||(o==null?void 0:o.refs.domReference.current);g==null||g.focus(),o!=null&&o.closeOnFocusOut&&(o==null||o.onOpenChange(!1,p.nativeEvent,"focus-out"))}}}))}const Sw=()=>C.useContext(yw),uf="data-floating-ui-focusable";function bw(e){return e?e.hasAttribute(uf)?e:e.querySelector("["+uf+"]")||e:null}const Vg=20;let Br=[];function Ou(e){Br=Br.filter(n=>n.isConnected);let t=e;if(!(!t||Ur(t)==="body")){if(!EA(t,xo())){const n=_l(t,xo())[0];n&&(t=n)}Br.push(t),Br.length>Vg&&(Br=Br.slice(-Vg))}}function Bg(){return Br.slice().reverse().find(e=>e.isConnected)}const PD=C.forwardRef(function(t,n){return C.createElement("button",ss({},t,{type:"button",ref:n,tabIndex:-1,style:Ol}))});function OD(e){const{context:t,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:a=!0,restoreFocus:l=!1,modal:c=!0,visuallyHiddenDismiss:d=!1,closeOnFocusOut:f=!0}=e,{open:u,refs:h,nodeId:m,onOpenChange:p,events:v,dataRef:g,floatingId:y,elements:{domReference:S,floating:w}}=t,k=typeof o=="number"&&o<0,E=of(S)&&k,T=kD()?s:!0,I=Pn(i),U=Pn(o),O=Pn(a),B=Pl(),P=Sw(),j=C.useRef(null),H=C.useRef(null),$=C.useRef(!1),A=C.useRef(!1),q=C.useRef(-1),x=P!=null,R=bw(w),M=kt(function(Y){return Y===void 0&&(Y=R),Y?_l(Y,xo()):[]}),J=kt(Y=>{const te=M(Y);return I.current.map(W=>S&&W==="reference"?S:R&&W==="floating"?R:te).filter(Boolean).flat()});C.useEffect(()=>{if(r||!c)return;function Y(W){if(W.key==="Tab"){At(R,qn(tn(R)))&&M().length===0&&!E&&it(W);const Z=J(),fe=zr(W);I.current[0]==="reference"&&fe===S&&(it(W),W.shiftKey?lr(Z[Z.length-1]):lr(Z[1])),I.current[1]==="floating"&&fe===R&&W.shiftKey&&(it(W),lr(Z[0]))}}const te=tn(R);return te.addEventListener("keydown",Y),()=>{te.removeEventListener("keydown",Y)}},[r,S,R,c,I,E,M,J]),C.useEffect(()=>{if(r||!w)return;function Y(te){const W=zr(te),fe=M().indexOf(W);fe!==-1&&(q.current=fe)}return w.addEventListener("focusin",Y),()=>{w.removeEventListener("focusin",Y)}},[r,w,M]),C.useEffect(()=>{if(r||!f)return;function Y(){A.current=!0,setTimeout(()=>{A.current=!1})}function te(W){const Z=W.relatedTarget;queueMicrotask(()=>{const fe=!(At(S,Z)||At(w,Z)||At(Z,w)||At(P==null?void 0:P.portalNode,Z)||Z!=null&&Z.hasAttribute(To("focus-guard"))||B&&(Wi(B.nodesRef.current,m).find(Ue=>{var Ne,ct;return At((Ne=Ue.context)==null?void 0:Ne.elements.floating,Z)||At((ct=Ue.context)==null?void 0:ct.elements.domReference,Z)})||wD(B.nodesRef.current,m).find(Ue=>{var Ne,ct;return((Ne=Ue.context)==null?void 0:Ne.elements.floating)===Z||((ct=Ue.context)==null?void 0:ct.elements.domReference)===Z})));if(l&&fe&&qn(tn(R))===tn(R).body){Ye(R)&&R.focus();const Ue=q.current,Ne=M(),ct=Ne[Ue]||Ne[Ne.length-1]||R;Ye(ct)&&ct.focus()}(E||!c)&&Z&&fe&&!A.current&&Z!==Bg()&&($.current=!0,p(!1,W,"focus-out"))})}if(w&&Ye(S))return S.addEventListener("focusout",te),S.addEventListener("pointerdown",Y),w.addEventListener("focusout",te),()=>{S.removeEventListener("focusout",te),S.removeEventListener("pointerdown",Y),w.removeEventListener("focusout",te)}},[r,S,w,R,c,m,B,P,p,f,l,M,E]),C.useEffect(()=>{var Y;if(r)return;const te=Array.from((P==null||(Y=P.portalNode)==null?void 0:Y.querySelectorAll("["+To("portal")+"]"))||[]);if(w){const W=[w,...te,j.current,H.current,I.current.includes("reference")||E?S:null].filter(fe=>fe!=null),Z=c||E?Mg(W,T,!T):Mg(W);return()=>{Z()}}},[r,S,w,c,I,P,E,T]),ke(()=>{if(r||!Ye(R))return;const Y=tn(R),te=qn(Y);queueMicrotask(()=>{const W=J(R),Z=U.current,fe=(typeof Z=="number"?W[Z]:Z.current)||R,Ue=At(R,te);!k&&!Ue&&u&&lr(fe,{preventScroll:fe===R})})},[r,u,R,k,J,U]),ke(()=>{if(r||!R)return;let Y=!1;const te=tn(R),W=qn(te);let fe=g.current.openEvent;Ou(W);function Ue(Pt){let{open:en,reason:dn,event:$e,nested:En}=Pt;en&&(fe=$e),dn==="escape-key"&&h.domReference.current&&Ou(h.domReference.current),dn==="hover"&&$e.type==="mouseleave"&&($.current=!0),dn==="outside-press"&&(En?($.current=!1,Y=!0):$.current=!(Gb($e)||Jb($e)))}v.on("openchange",Ue);const Ne=te.createElement("span");Ne.setAttribute("tabindex","-1"),Ne.setAttribute("aria-hidden","true"),Object.assign(Ne.style,Ol),x&&S&&S.insertAdjacentElement("afterend",Ne);function ct(){return typeof O.current=="boolean"?Bg()||Ne:O.current.current||Ne}return()=>{v.off("openchange",Ue);const Pt=qn(te),en=At(w,Pt)||B&&Wi(B.nodesRef.current,m).some(En=>{var Vn;return At((Vn=En.context)==null?void 0:Vn.elements.floating,Pt)});(en||fe&&["click","mousedown"].includes(fe.type))&&h.domReference.current&&Ou(h.domReference.current);const $e=ct();queueMicrotask(()=>{O.current&&!$.current&&Ye($e)&&(!($e!==Pt&&Pt!==te.body)||en)&&$e.focus({preventScroll:Y}),Ne.remove()})}},[r,w,R,O,g,h,v,B,m,x,S]),C.useEffect(()=>{queueMicrotask(()=>{$.current=!1})},[r]),ke(()=>{if(!r&&P)return P.setFocusManagerState({modal:c,closeOnFocusOut:f,open:u,onOpenChange:p,refs:h}),()=>{P.setFocusManagerState(null)}},[r,P,c,u,p,h,f]),ke(()=>{if(r||!R||typeof MutationObserver!="function"||k)return;const Y=()=>{const W=R.getAttribute("tabindex"),Z=M(),fe=qn(tn(w)),Ue=Z.indexOf(fe);Ue!==-1&&(q.current=Ue),I.current.includes("floating")||fe!==h.domReference.current&&Z.length===0?W!=="0"&&R.setAttribute("tabindex","0"):W!=="-1"&&R.setAttribute("tabindex","-1")};Y();const te=new MutationObserver(Y);return te.observe(R,{childList:!0,subtree:!0,attributes:!0}),()=>{te.disconnect()}},[r,w,R,h,I,M,k]);function oe(Y){return r||!d||!c?null:C.createElement(PD,{ref:Y==="start"?j:H,onClick:te=>p(!1,te.nativeEvent)},typeof d=="string"?d:"Dismiss")}const We=!r&&T&&(c?!E:!0)&&(x||c);return C.createElement(C.Fragment,null,We&&C.createElement(Wc,{"data-type":"inside",ref:P==null?void 0:P.beforeInsideRef,onFocus:Y=>{if(c){const W=J();lr(i[0]==="reference"?W[0]:W[W.length-1])}else if(P!=null&&P.preserveTabOrder&&P.portalNode)if($.current=!1,Js(Y,P.portalNode)){const W=gw()||S;W==null||W.focus()}else{var te;(te=P.beforeOutsideRef.current)==null||te.focus()}}}),!E&&oe("start"),n,oe("end"),We&&C.createElement(Wc,{"data-type":"inside",ref:P==null?void 0:P.afterInsideRef,onFocus:Y=>{if(c)lr(J()[0]);else if(P!=null&&P.preserveTabOrder&&P.portalNode)if(f&&($.current=!0),Js(Y,P.portalNode)){const W=vw()||S;W==null||W.focus()}else{var te;(te=P.afterOutsideRef.current)==null||te.focus()}}}))}let va=0;function ND(){const e=/iP(hone|ad|od)|iOS/.test(Wh()),t=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,s=t.left?parseFloat(t.left):window.scrollX,o=t.top?parseFloat(t.top):window.scrollY;if(t.overflow="hidden",i&&(t[r]=i+"px"),e){var a,l;const c=((a=window.visualViewport)==null?void 0:a.offsetLeft)||0,d=((l=window.visualViewport)==null?void 0:l.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(o-Math.floor(d))+"px",left:-(s-Math.floor(c))+"px",right:"0"})}return()=>{Object.assign(t,{overflow:"",[r]:""}),e&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(s,o))}}let zg=()=>{};const AD=C.forwardRef(function(t,n){const{lockScroll:r=!1,...i}=t;return ke(()=>{if(r)return va++,va===1&&(zg=ND()),()=>{va--,va===0&&zg()}},[r]),C.createElement("div",ss({ref:n},i,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}}))});function Hg(e){return Ye(e.target)&&e.target.tagName==="BUTTON"}function Wg(e){return Qb(e)}function DD(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=e,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0,stickIfOpen:f=!0}=t,u=C.useRef(),h=C.useRef(!1),m=C.useMemo(()=>({onPointerDown(p){u.current=p.pointerType},onMouseDown(p){const v=u.current;p.button===0&&a!=="click"&&(xg(v)&&c||(n&&l&&(!(i.current.openEvent&&f)||i.current.openEvent.type==="mousedown")?r(!1,p.nativeEvent,"click"):(p.preventDefault(),r(!0,p.nativeEvent,"click"))))},onClick(p){const v=u.current;if(a==="mousedown"&&u.current){u.current=void 0;return}xg(v)&&c||(n&&l&&(!(i.current.openEvent&&f)||i.current.openEvent.type==="click")?r(!1,p.nativeEvent,"click"):r(!0,p.nativeEvent,"click"))},onKeyDown(p){u.current=void 0,!(p.defaultPrevented||!d||Hg(p))&&(p.key===" "&&!Wg(s)&&(p.preventDefault(),h.current=!0),p.key==="Enter"&&r(!(n&&l),p.nativeEvent,"click"))},onKeyUp(p){p.defaultPrevented||!d||Hg(p)||Wg(s)||p.key===" "&&h.current&&(h.current=!1,r(!(n&&l),p.nativeEvent,"click"))}}),[i,s,a,c,d,r,n,f,l]);return C.useMemo(()=>o?{reference:m}:{},[o,m])}const LD={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},jD={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},qg=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function MD(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:d=!1,referencePressEvent:f="pointerdown",ancestorScroll:u=!1,bubbles:h,capture:m}=t,p=Pl(),v=kt(typeof l=="function"?l:()=>!1),g=typeof l=="function"?v:l,y=C.useRef(!1),S=C.useRef(!1),{escapeKey:w,outsidePress:k}=qg(h),{escapeKey:E,outsidePress:T}=qg(m),I=C.useRef(!1),U=kt($=>{var A;if(!n||!o||!a||$.key!=="Escape"||I.current)return;const q=(A=s.current.floatingContext)==null?void 0:A.nodeId,x=p?Wi(p.nodesRef.current,q):[];if(!w&&($.stopPropagation(),x.length>0)){let R=!0;if(x.forEach(M=>{var J;if((J=M.context)!=null&&J.open&&!M.context.dataRef.current.__escapeKeyBubbles){R=!1;return}}),!R)return}r(!1,YN($)?$.nativeEvent:$,"escape-key")}),O=kt($=>{var A;const q=()=>{var x;U($),(x=zr($))==null||x.removeEventListener("keydown",q)};(A=zr($))==null||A.addEventListener("keydown",q)}),B=kt($=>{var A;const q=y.current;y.current=!1;const x=S.current;if(S.current=!1,c==="click"&&x||q||typeof g=="function"&&!g($))return;const R=zr($),M="["+To("inert")+"]",J=tn(i.floating).querySelectorAll(M);let oe=Fe(R)?R:null;for(;oe&&!Ar(oe);){const W=nr(oe);if(Ar(W)||!Fe(W))break;oe=W}if(J.length&&Fe(R)&&!QN(R)&&!At(R,i.floating)&&Array.from(J).every(W=>!At(oe,W)))return;if(Ye(R)&&H){const W=R.clientWidth>0&&R.scrollWidth>R.clientWidth,Z=R.clientHeight>0&&R.scrollHeight>R.clientHeight;let fe=Z&&$.offsetX>R.clientWidth;if(Z&&Qt(R).direction==="rtl"&&(fe=$.offsetX<=R.offsetWidth-R.clientWidth),fe||W&&$.offsetY>R.clientHeight)return}const We=(A=s.current.floatingContext)==null?void 0:A.nodeId,Y=p&&Wi(p.nodesRef.current,We).some(W=>{var Z;return xu($,(Z=W.context)==null?void 0:Z.elements.floating)});if(xu($,i.floating)||xu($,i.domReference)||Y)return;const te=p?Wi(p.nodesRef.current,We):[];if(te.length>0){let W=!0;if(te.forEach(Z=>{var fe;if((fe=Z.context)!=null&&fe.open&&!Z.context.dataRef.current.__outsidePressBubbles){W=!1;return}}),!W)return}r(!1,$,"outside-press")}),P=kt($=>{var A;const q=()=>{var x;B($),(x=zr($))==null||x.removeEventListener(c,q)};(A=zr($))==null||A.addEventListener(c,q)});C.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=w,s.current.__outsidePressBubbles=k;let $=-1;function A(J){r(!1,J,"ancestor-scroll")}function q(){window.clearTimeout($),I.current=!0}function x(){$=window.setTimeout(()=>{I.current=!1},xl()?5:0)}const R=tn(i.floating);a&&(R.addEventListener("keydown",E?O:U,E),R.addEventListener("compositionstart",q),R.addEventListener("compositionend",x)),g&&R.addEventListener(c,T?P:B,T);let M=[];return u&&(Fe(i.domReference)&&(M=xr(i.domReference)),Fe(i.floating)&&(M=M.concat(xr(i.floating))),!Fe(i.reference)&&i.reference&&i.reference.contextElement&&(M=M.concat(xr(i.reference.contextElement)))),M=M.filter(J=>{var oe;return J!==((oe=R.defaultView)==null?void 0:oe.visualViewport)}),M.forEach(J=>{J.addEventListener("scroll",A,{passive:!0})}),()=>{a&&(R.removeEventListener("keydown",E?O:U,E),R.removeEventListener("compositionstart",q),R.removeEventListener("compositionend",x)),g&&R.removeEventListener(c,T?P:B,T),M.forEach(J=>{J.removeEventListener("scroll",A)}),window.clearTimeout($)}},[s,i,a,g,c,n,r,u,o,w,k,U,E,O,B,T,P]),C.useEffect(()=>{y.current=!1},[g,c]);const j=C.useMemo(()=>({onKeyDown:U,[LD[f]]:$=>{d&&r(!1,$.nativeEvent,"reference-press")}}),[U,r,d,f]),H=C.useMemo(()=>({onKeyDown:U,onMouseDown(){S.current=!0},onMouseUp(){S.current=!0},[jD[c]]:()=>{y.current=!0}}),[U,c]);return C.useMemo(()=>o?{reference:j,floating:H}:{},[o,j,H])}function FD(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Il(),s=C.useRef({}),[o]=C.useState(()=>yD()),a=Xh()!=null,[l,c]=C.useState(r.reference),d=kt((h,m,p)=>{s.current.openEvent=h?m:void 0,o.emit("openchange",{open:h,event:m,reason:p,nested:a}),n==null||n(h,m,p)}),f=C.useMemo(()=>({setPositionReference:c}),[]),u=C.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return C.useMemo(()=>({dataRef:s,open:t,onOpenChange:d,elements:u,events:o,floatingId:i,refs:f}),[t,d,u,o,i,f])}function ww(e){e===void 0&&(e={});const{nodeId:t}=e,n=FD({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=C.useState(null),[a,l]=C.useState(null),d=(i==null?void 0:i.domReference)||s,f=C.useRef(null),u=Pl();ke(()=>{d&&(f.current=d)},[d]);const h=XA({...e,elements:{...i,...a&&{reference:a}}}),m=C.useCallback(S=>{const w=Fe(S)?{getBoundingClientRect:()=>S.getBoundingClientRect(),contextElement:S}:S;l(w),h.refs.setReference(w)},[h.refs]),p=C.useCallback(S=>{(Fe(S)||S===null)&&(f.current=S,o(S)),(Fe(h.refs.reference.current)||h.refs.reference.current===null||S!==null&&!Fe(S))&&h.refs.setReference(S)},[h.refs]),v=C.useMemo(()=>({...h.refs,setReference:p,setPositionReference:m,domReference:f}),[h.refs,p,m]),g=C.useMemo(()=>({...h.elements,domReference:d}),[h.elements,d]),y=C.useMemo(()=>({...h,...r,refs:v,elements:g,nodeId:t}),[h,v,g,t,r]);return ke(()=>{r.dataRef.current.floatingContext=y;const S=u==null?void 0:u.nodesRef.current.find(w=>w.id===t);S&&(S.context=y)}),C.useMemo(()=>({...h,context:y,refs:v,elements:g}),[h,v,g,y])}const Kg="active",Gg="selected";function Nu(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Kg]:o,[Gg]:a,...l}=e;s=l}return{...n==="floating"&&{tabIndex:-1,[uf]:""},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[c,d]=l;if(!(i&&[Kg,Gg].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof d=="function"){var f;(f=r.get(c))==null||f.push(d),o[c]=function(){for(var u,h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];return(u=r.get(c))==null?void 0:u.map(v=>v(...m)).find(v=>v!==void 0)}}}else o[c]=d}),o),{})}}function UD(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=C.useCallback(a=>Nu(a,e,"reference"),t),s=C.useCallback(a=>Nu(a,e,"floating"),n),o=C.useCallback(a=>Nu(a,e,"item"),r);return C.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}let Jg=!1;function Nl(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function Yg(e,t){return Nl(t,e===Qh||e===$o,e===Rr||e===_r)}function Au(e,t,n){return Nl(t,e===$o,n?e===Rr:e===_r)||e==="Enter"||e===" "||e===""}function $D(e,t,n){return Nl(t,n?e===Rr:e===_r,e===$o)}function Qg(e,t,n){return Nl(t,n?e===_r:e===Rr,e===Qh)}function VD(e,t){const{open:n,onOpenChange:r,elements:i}=e,{listRef:s,activeIndex:o,onNavigate:a=()=>{},enabled:l=!0,selectedIndex:c=null,allowEscape:d=!1,loop:f=!1,nested:u=!1,rtl:h=!1,virtual:m=!1,focusItemOnOpen:p="auto",focusItemOnHover:v=!0,openOnArrowKeyDown:g=!0,disabledIndices:y=void 0,orientation:S="vertical",cols:w=1,scrollItemIntoView:k=!0,virtualItemRef:E,itemSizes:T,dense:I=!1}=t,U=bw(i.floating),O=Pn(U),B=Xh(),P=Pl(),j=kt(a),H=of(i.domReference),$=C.useRef(p),A=C.useRef(c??-1),q=C.useRef(null),x=C.useRef(!0),R=C.useRef(j),M=C.useRef(!!i.floating),J=C.useRef(n),oe=C.useRef(!1),We=C.useRef(!1),Y=Pn(y),te=Pn(n),W=Pn(k),Z=Pn(c),[fe,Ue]=C.useState(),[Ne,ct]=C.useState(),Pt=kt(function(re,xe,Q){Q===void 0&&(Q=!1);function be(ge){m?(Ue(ge.id),P==null||P.events.emit("virtualfocus",ge),E&&(E.current=ge)):lr(ge,{preventScroll:!0,sync:GN()&&Yb()?Jg||oe.current:!1})}const Ie=re.current[xe.current];Ie&&be(Ie),requestAnimationFrame(()=>{const ge=re.current[xe.current]||Ie;if(!ge)return;Ie||be(ge);const St=W.current;St&&dn&&(Q||!x.current)&&(ge.scrollIntoView==null||ge.scrollIntoView(typeof St=="boolean"?{block:"nearest",inline:"nearest"}:St))})});ke(()=>{document.createElement("div").focus({get preventScroll(){return Jg=!0,!1}})},[]),ke(()=>{l&&(n&&i.floating?$.current&&c!=null&&(We.current=!0,A.current=c,j(c)):M.current&&(A.current=-1,R.current(null)))},[l,n,i.floating,c,j]),ke(()=>{if(l&&n&&i.floating)if(o==null){if(oe.current=!1,Z.current!=null)return;if(M.current&&(A.current=-1,Pt(s,A)),(!J.current||!M.current)&&$.current&&(q.current!=null||$.current===!0&&q.current==null)){let re=0;const xe=()=>{s.current[0]==null?(re<2&&(re?requestAnimationFrame:queueMicrotask)(xe),re++):(A.current=q.current==null||Au(q.current,S,h)||u?Iu(s,Y.current):Ag(s,Y.current),q.current=null,j(A.current))};xe()}}else Gs(s,o)||(A.current=o,Pt(s,A,We.current),We.current=!1)},[l,n,i.floating,o,Z,u,s,S,h,j,Pt,Y]),ke(()=>{var re;if(!l||i.floating||!P||m||!M.current)return;const xe=P.nodesRef.current,Q=(re=xe.find(ge=>ge.id===B))==null||(re=re.context)==null?void 0:re.elements.floating,be=qn(tn(i.floating)),Ie=xe.some(ge=>ge.context&&At(ge.context.elements.floating,be));Q&&!Ie&&x.current&&Q.focus({preventScroll:!0})},[l,i.floating,P,B,m]),ke(()=>{if(!l||!P||!m||B)return;function re(xe){ct(xe.id),E&&(E.current=xe)}return P.events.on("virtualfocus",re),()=>{P.events.off("virtualfocus",re)}},[l,P,m,B,E]),ke(()=>{R.current=j,M.current=!!i.floating}),ke(()=>{n||(q.current=null)},[n]),ke(()=>{J.current=n},[n]);const en=o!=null,dn=C.useMemo(()=>{function re(Q){if(!n)return;const be=s.current.indexOf(Q);be!==-1&&j(be)}return{onFocus(Q){let{currentTarget:be}=Q;re(be)},onClick:Q=>{let{currentTarget:be}=Q;return be.focus({preventScroll:!0})},...v&&{onMouseMove(Q){let{currentTarget:be}=Q;re(be)},onPointerLeave(Q){let{pointerType:be}=Q;!x.current||be==="touch"||(A.current=-1,Pt(s,A),j(null),m||lr(O.current,{preventScroll:!0}))}}}},[n,O,Pt,v,s,j,m]),$e=kt(re=>{if(x.current=!1,oe.current=!0,re.which===229||!te.current&&re.currentTarget===O.current)return;if(u&&Qg(re.key,S,h)){it(re),r(!1,re.nativeEvent,"list-navigation"),Ye(i.domReference)&&(m?P==null||P.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}const xe=A.current,Q=Iu(s,y),be=Ag(s,y);if(H||(re.key==="Home"&&(it(re),A.current=Q,j(A.current)),re.key==="End"&&(it(re),A.current=be,j(A.current))),w>1){const Ie=T||Array.from({length:s.current.length},()=>({width:1,height:1})),ge=aD(Ie,w,I),St=ge.findIndex(G=>G!=null&&!Ba(s.current,G,y)),se=ge.reduce((G,de,Ot)=>de!=null&&!Ba(s.current,de,y)?Ot:G,-1),ae=ge[oD({current:ge.map(G=>G!=null?s.current[G]:null)},{event:re,orientation:S,loop:f,rtl:h,cols:w,disabledIndices:lD([...y||s.current.map((G,de)=>Ba(s.current,de)?de:void 0),void 0],ge),minIndex:St,maxIndex:se,prevIndex:cD(A.current>be?Q:A.current,Ie,ge,w,re.key===$o?"bl":re.key===(h?Rr:_r)?"tr":"tl"),stopEvent:!0})];if(ae!=null&&(A.current=ae,j(A.current)),S==="both")return}if(Yg(re.key,S)){if(it(re),n&&!m&&qn(re.currentTarget.ownerDocument)===re.currentTarget){A.current=Au(re.key,S,h)?Q:be,j(A.current);return}Au(re.key,S,h)?f?A.current=xe>=be?d&&xe!==s.current.length?-1:Q:ft(s,{startingIndex:xe,disabledIndices:y}):A.current=Math.min(be,ft(s,{startingIndex:xe,disabledIndices:y})):f?A.current=xe<=Q?d&&xe!==-1?s.current.length:be:ft(s,{startingIndex:xe,decrement:!0,disabledIndices:y}):A.current=Math.max(Q,ft(s,{startingIndex:xe,decrement:!0,disabledIndices:y})),Gs(s,A.current)?j(null):j(A.current)}}),En=C.useMemo(()=>m&&n&&en&&{"aria-activedescendant":Ne||fe},[m,n,en,Ne,fe]),Vn=C.useMemo(()=>({"aria-orientation":S==="both"?void 0:S,...!of(i.domReference)&&En,onKeyDown:$e,onPointerMove(){x.current=!0}}),[En,$e,i.domReference,S]),sr=C.useMemo(()=>{function re(Q){p==="auto"&&Gb(Q.nativeEvent)&&($.current=!0)}function xe(Q){$.current=p,p==="auto"&&Jb(Q.nativeEvent)&&($.current=!0)}return{...En,onKeyDown(Q){x.current=!1;const be=Q.key.startsWith("Arrow"),Ie=["Home","End"].includes(Q.key),ge=be||Ie,St=$D(Q.key,S,h),se=Qg(Q.key,S,h),ae=Yg(Q.key,S),G=(u?St:ae)||Q.key==="Enter"||Q.key.trim()==="";if(m&&n){const he=P==null?void 0:P.nodesRef.current.find(bt=>bt.parentId==null),K=P&&he?CD(P.nodesRef.current,he.id):null;if(ge&&K&&E){const bt=new KeyboardEvent("keydown",{key:Q.key,bubbles:!0});if(St||se){var de,Ot;const ms=((de=K.context)==null?void 0:de.elements.domReference)===Q.currentTarget,gs=se&&!ms?(Ot=K.context)==null?void 0:Ot.elements.domReference:St?s.current.find(op=>(op==null?void 0:op.id)===fe):null;gs&&(it(Q),gs.dispatchEvent(bt),ct(void 0))}if((ae||Ie)&&K.context&&K.context.open&&K.parentId&&Q.currentTarget!==K.context.elements.domReference){var Bt;it(Q),(Bt=K.context.elements.domReference)==null||Bt.dispatchEvent(bt);return}}return $e(Q)}if(!(!n&&!g&&be)){if(G&&(q.current=u&&ae?null:Q.key),u){St&&(it(Q),n?(A.current=Iu(s,Y.current),j(A.current)):r(!0,Q.nativeEvent,"list-navigation"));return}ae&&(c!=null&&(A.current=c),it(Q),!n&&g?r(!0,Q.nativeEvent,"list-navigation"):$e(Q),n&&j(A.current))}},onFocus(){n&&!m&&j(null)},onPointerDown:xe,onMouseDown:re,onClick:re}},[fe,En,$e,Y,p,s,u,j,r,n,g,S,h,c,P,m,E]);return C.useMemo(()=>l?{reference:sr,floating:Vn,item:dn}:{},[l,sr,Vn,dn])}const BD=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function zD(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=BD.get(o))!=null?n:o,l=Il(),d=Xh()!=null,f=C.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&d&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,d,r,l,o]),u=C.useMemo(()=>{const m={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?m:{...m,...a==="menu"&&{"aria-labelledby":l}}},[a,i,l,o]),h=C.useCallback(m=>{let{active:p,selected:v}=m;const g={role:"option",...p&&{id:i+"-option"}};switch(o){case"select":return{...g,"aria-selected":p&&v};case"combobox":return{...g,...p&&{"aria-selected":!0}}}return{}},[i,o]);return C.useMemo(()=>s?{reference:f,floating:u,item:h}:{},[s,f,u,h])}function HD(e,t){var n;const{open:r,dataRef:i}=e,{listRef:s,activeIndex:o,onMatch:a,onTypingChange:l,enabled:c=!0,findMatch:d=null,resetMs:f=750,ignoreKeys:u=[],selectedIndex:h=null}=t,m=C.useRef(),p=C.useRef(""),v=C.useRef((n=h??o)!=null?n:-1),g=C.useRef(null),y=kt(a),S=kt(l),w=Pn(d),k=Pn(u);ke(()=>{r&&(clearTimeout(m.current),g.current=null,p.current="")},[r]),ke(()=>{if(r&&p.current===""){var O;v.current=(O=h??o)!=null?O:-1}},[r,h,o]);const E=kt(O=>{O?i.current.typing||(i.current.typing=O,S(O)):i.current.typing&&(i.current.typing=O,S(O))}),T=kt(O=>{function B(A,q,x){const R=w.current?w.current(q,x):q.find(M=>(M==null?void 0:M.toLocaleLowerCase().indexOf(x.toLocaleLowerCase()))===0);return R?A.indexOf(R):-1}const P=s.current;if(p.current.length>0&&p.current[0]!==" "&&(B(P,P,p.current)===-1?E(!1):O.key===" "&&it(O)),P==null||k.current.includes(O.key)||O.key.length!==1||O.ctrlKey||O.metaKey||O.altKey)return;r&&O.key!==" "&&(it(O),E(!0)),P.every(A=>{var q,x;return A?((q=A[0])==null?void 0:q.toLocaleLowerCase())!==((x=A[1])==null?void 0:x.toLocaleLowerCase()):!0})&&p.current===O.key&&(p.current="",v.current=g.current),p.current+=O.key,clearTimeout(m.current),m.current=setTimeout(()=>{p.current="",v.current=g.current,E(!1)},f);const H=v.current,$=B(P,[...P.slice((H||0)+1),...P.slice(0,(H||0)+1)],p.current);$!==-1?(y($),g.current=$):O.key!==" "&&(p.current="",E(!1))}),I=C.useMemo(()=>({onKeyDown:T}),[T]),U=C.useMemo(()=>({onKeyDown:T,onKeyUp(O){O.key===" "&&E(!1)}}),[T,E]);return C.useMemo(()=>c?{reference:I,floating:U}:{},[c,I,U])}function Cw(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Cw(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function He(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Cw(e))&&(r&&(r+=" "),r+=t);return r}const Ro=({participant:e,trackType:t="audioTrack",...n})=>{const r=je(),[i,s]=C.useState(null),{userId:o,sessionId:a}=e;return C.useEffect(()=>{if(!r||!i)return;const l=r.bindAudioElement(i,a,t);return()=>{l==null||l()}},[r,a,i,t]),b.jsx("audio",{autoPlay:!0,...n,ref:s,"data-user-id":o,"data-session-id":a,"data-track-type":t})};Ro.displayName="Audio";const kw=e=>{const{participants:t,audioProps:n}=e;return b.jsx(b.Fragment,{children:t.map(r=>{if(r.isLocalParticipant)return null;const{audioStream:i,screenShareAudioStream:s,sessionId:o}=r,l=mr(r)&&i&&b.jsx(Ro,{...n,trackType:"audioTrack",participant:r}),d=wl(r)&&s&&b.jsx(Ro,{...n,trackType:"screenShareAudioTrack",participant:r});return b.jsxs(C.Fragment,{children:[l,d]},o)})})};kw.displayName="ParticipantsAudio";const Ew=C.createContext(void 0),Al=()=>C.useContext(Ew),Zh=({middleware:e=[],placement:t,strategy:n,offset:r=10})=>{const{refs:i,x:s,y:o,update:a,elements:{domReference:l,floating:c},context:d}=ww({placement:t,strategy:n,middleware:[eD(r),tD(),dw(),nD({padding:10,apply:({availableHeight:f,elements:u})=>{Object.assign(u.floating.style,{maxHeight:`${f}px`})}}),...e]});return C.useEffect(()=>{if(!l||!c)return;const f=lw(l,c,a);return()=>f()},[l,c,a]),{refs:i,x:s,y:o,domReference:l,floating:c,strategy:n,context:d}},Tw=10,WD=(e,t=Tw)=>{const[n,r]=C.useState(null);return C.useEffect(()=>{if(!e)return;const i=()=>{const o=e;if(!(o.scrollHeight>o.clientHeight))return r(null);if(o.scrollTop<=t)return r("top");if(Math.abs(o.scrollHeight-o.scrollTop-o.clientHeight)<=t)return r("bottom");r("between")},s=new ResizeObserver(i);return s.observe(e),e.addEventListener("scroll",i),()=>{e.removeEventListener("scroll",i),s.disconnect()}},[e,t]),n},qD=(e,t=Tw)=>{const[n,r]=C.useState(null);return C.useEffect(()=>{if(!e)return;const i=()=>{const o=e;if(!(o.scrollWidth>o.clientWidth))return r(null);if(o.scrollLeft<=t)return r("start");if(Math.abs(o.scrollWidth-o.scrollLeft-o.clientWidth)<=t)return r("end");r("between")},s=new ResizeObserver(i);return s.observe(e),e.addEventListener("scroll",i),()=>{e.removeEventListener("scroll",i),s.disconnect()}},[e,t]),n},ep=e=>{const t=je(),{useHasPermissions:n}=at(),r=n(e),[i,s]=C.useState(!1);return C.useEffect(()=>{r&&s(!1)},[r]),{requestPermission:C.useCallback(async()=>{if(r)return!0;const a=!!(t!=null&&t.permissionsContext.canRequest(e));if(i||!a)return!1;s(!0);try{await(t==null?void 0:t.requestPermissions({permissions:[e]}))}catch(l){throw s(!1),new Error(`requestPermission failed: ${l}`)}return!1},[t,r,i,e]),hasPermission:r,canRequestPermission:!!(t!=null&&t.permissionsContext.canRequest(e)),isAwaitingPermission:i}};var qi;(function(e){e.PORTAL="portal",e.MENU="menu"})(qi||(qi={}));const xw=C.createContext({}),tp=()=>C.useContext(xw),KD=({children:e,refs:t})=>{const n=C.useMemo(()=>`str-video-portal-${Math.random().toString(36).substring(2,9)}`,[]);return b.jsxs(b.Fragment,{children:[b.jsx("div",{id:n,className:"str-video__portal"}),b.jsx(AD,{children:b.jsx(ID,{id:n,children:b.jsx("div",{className:"str-video__portal-content",ref:t.setFloating,children:e})})})]})},np=({ToggleButton:e,placement:t="top-start",strategy:n="absolute",offset:r,visualType:i=qi.MENU,children:s,onToggle:o})=>{const[a,l]=C.useState(!1),c=C.useRef(o);c.current=o;const{floating:d,domReference:f,refs:u,x:h,y:m}=Zh({placement:t,strategy:n,offset:r});return C.useEffect(()=>{const p=g=>{var y,S;!d&&(f!=null&&f.contains(g.target))?(l(!0),(y=c.current)==null||y.call(c,!0)):d&&!(d!=null&&d.contains(g.target))&&(l(!1),(S=c.current)==null||S.call(c,!1))},v=g=>{var y;g.key&&g.key.toLowerCase()==="escape"&&!g.altKey&&!g.ctrlKey&&(l(!1),(y=c.current)==null||y.call(c,!1))};return document==null||document.addEventListener("click",p,{capture:!0}),document==null||document.addEventListener("keydown",v),()=>{document==null||document.removeEventListener("click",p,{capture:!0}),document==null||document.removeEventListener("keydown",v)}},[d,f]),b.jsxs(b.Fragment,{children:[a&&b.jsx(xw.Provider,{value:{close:()=>l(!1)},children:i===qi.PORTAL?b.jsx(KD,{refs:u,children:s}):i===qi.MENU?b.jsx("div",{className:"str-video__menu-container",ref:u.setFloating,style:{position:n,top:m??0,left:h??0,overflowY:"auto"},role:"menu",children:s}):null}),b.jsx(e,{menuShown:a,ref:u.setReference})]})},GD=({children:e,onItemClick:t})=>{const n=C.useRef(null);return b.jsx("ul",{className:"str-video__generic-menu",ref:n,onClick:r=>{var i;t&&r.target!==n.current&&((i=n.current)!=null&&i.contains(r.target))&&t(r)},children:e})},dt=({children:e,...t})=>b.jsx("li",{className:"str-video__generic-menu--item",children:b.jsx("button",{...t,children:e})}),Be=({className:e,icon:t})=>b.jsx("span",{className:He("str-video__icon",t&&`str-video__icon--${t}`,e)});function Rw(e){const[t,n]=C.useState(document.pictureInPictureElement===e);return!e&&t&&n(!1),C.useEffect(()=>{if(!e)return;const r=()=>{n(document.pictureInPictureElement===e)};return e.addEventListener("enterpictureinpicture",r),e.addEventListener("leavepictureinpicture",r),()=>{e.removeEventListener("enterpictureinpicture",r),e.removeEventListener("leavepictureinpicture",r)}},[e]),t}const JD=()=>{const{participant:e,participantViewElement:t,videoElement:n}=Al(),[r,i]=C.useState(!!document.fullscreenElement),s=je(),o=Rw(n??void 0),{t:a}=Xe(),{pin:l,sessionId:c,userId:d}=e,f=mr(e),u=On(e),h=yn(e),m=wl(e),p=()=>s==null?void 0:s.blockUser(d),v=()=>s==null?void 0:s.muteUser(d,"audio"),g=()=>s==null?void 0:s.muteUser(d,"video"),y=()=>s==null?void 0:s.muteUser(d,"screenshare"),S=()=>s==null?void 0:s.muteUser(d,"screenshare_audio"),w=P=>()=>{s==null||s.updateUserPermissions({user_id:d,grant_permissions:[P]})},k=P=>()=>{s==null||s.updateUserPermissions({user_id:d,revoke_permissions:[P]})},E=()=>{l?s==null||s.unpin(c):s==null||s.pin(c)},T=()=>{s==null||s.pinForEveryone({user_id:d,session_id:c}).catch(P=>{console.error(`Failed to pin participant ${d}`,P)})},I=()=>{s==null||s.unpinForEveryone({user_id:d,session_id:c}).catch(P=>{console.error(`Failed to unpin participant ${d}`,P)})},U=()=>r?document.exitFullscreen().catch(console.error):t==null?void 0:t.requestFullscreen().catch(console.error);C.useEffect(()=>{const P=()=>{i(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",P),()=>{document.removeEventListener("fullscreenchange",P)}},[]);const O=()=>n&&!o?n.requestPictureInPicture().catch(console.error):document.exitPictureInPicture().catch(console.error),{close:B}=tp()||{};return b.jsxs(GD,{onItemClick:B,children:[b.jsxs(dt,{onClick:E,disabled:l&&!l.isLocalPin,children:[b.jsx(Be,{icon:"pin"}),a(l?"Unpin":"Pin")]}),b.jsxs(jt,{requiredGrants:[ee.PIN_FOR_EVERYONE],children:[b.jsxs(dt,{onClick:T,disabled:l&&!l.isLocalPin,children:[b.jsx(Be,{icon:"pin"}),a("Pin for everyone")]}),b.jsxs(dt,{onClick:I,disabled:!l||l.isLocalPin,children:[b.jsx(Be,{icon:"pin"}),a("Unpin for everyone")]})]}),b.jsx(jt,{requiredGrants:[ee.BLOCK_USERS],children:b.jsxs(dt,{onClick:p,children:[b.jsx(Be,{icon:"not-allowed"}),a("Block")]})}),b.jsxs(jt,{requiredGrants:[ee.MUTE_USERS],children:[u&&b.jsxs(dt,{onClick:g,children:[b.jsx(Be,{icon:"camera-off-outline"}),a("Turn off video")]}),h&&b.jsxs(dt,{onClick:y,children:[b.jsx(Be,{icon:"screen-share-off"}),a("Turn off screen share")]}),f&&b.jsxs(dt,{onClick:v,children:[b.jsx(Be,{icon:"no-audio"}),a("Mute audio")]}),m&&b.jsxs(dt,{onClick:S,children:[b.jsx(Be,{icon:"no-audio"}),a("Mute screen share audio")]})]}),t&&b.jsx(dt,{onClick:U,children:a("{{ direction }} fullscreen",{direction:a(r?"Leave":"Enter")})}),n&&document.pictureInPictureEnabled&&b.jsx(dt,{onClick:O,children:a("{{ direction }} picture-in-picture",{direction:a(o?"Leave":"Enter")})}),b.jsxs(jt,{requiredGrants:[ee.UPDATE_CALL_PERMISSIONS],children:[b.jsx(dt,{onClick:w(ee.SEND_AUDIO),children:a("Allow audio")}),b.jsx(dt,{onClick:w(ee.SEND_VIDEO),children:a("Allow video")}),b.jsx(dt,{onClick:w(ee.SCREENSHARE),children:a("Allow screen sharing")}),b.jsx(dt,{onClick:k(ee.SEND_AUDIO),children:a("Disable audio")}),b.jsx(dt,{onClick:k(ee.SEND_VIDEO),children:a("Disable video")}),b.jsx(dt,{onClick:k(ee.SCREENSHARE),children:a("Disable screen sharing")})]})]})},_w=e=>e===null?!1:!C.isValidElement(e),Iw=(e,t)=>{if(e){if(typeof e=="function")return e(t);e.current=t}};C.forwardRef(function({stream:t,...n},r){const[i,s]=C.useState(null);return C.useEffect(()=>{if(!(!i||!t)&&t!==i.srcObject)return i.srcObject=t,(ig.isSafari()||ig.isFirefox())&&setTimeout(()=>{i.srcObject=t,i.play().catch(o=>{console.error("Failed to play stream",o)})},0),()=>{i.pause(),i.srcObject=null}},[t,i]),b.jsx("video",{autoPlay:!0,playsInline:!0,...n,ref:o=>{Iw(r,o),s(o)}})});const Pw=C.forwardRef(function({participant:t,style:n,children:r},i){const[s,o]=C.useState(!1),a=t.name||t.userId;return b.jsxs("div",{className:"str-video__video-placeholder",style:n,ref:i,children:[(!t.image||s)&&(a?b.jsx(YD,{name:a}):b.jsx("div",{className:"str-video__video-placeholder__no-video-label",children:r})),t.image&&!s&&b.jsx("img",{onError:()=>o(!0),alt:a,className:"str-video__video-placeholder__avatar",src:t.image})]})}),YD=e=>{const{name:t}=e,n=t.split(" ").slice(0,2).map(r=>r[0]).join("");return b.jsx("div",{className:"str-video__video-placeholder__initials-fallback",children:n})},QD=C.forwardRef(function(t,n){const{t:r}=Xe();return b.jsx(Pw,{ref:n,...t,children:r("Video is disabled")})}),Xg=C.forwardRef(function(t,n){const{t:r}=Xe();return b.jsx(Pw,{ref:n,...t,children:r("Video is playing in a popup")})}),Ow=({enabled:e=!0,mirror:t,trackType:n,participant:r,className:i,VideoPlaceholder:s=QD,PictureInPicturePlaceholder:o=Xg,refs:a,...l})=>{const{sessionId:c,videoStream:d,screenShareStream:f,viewportVisibilityState:u,isLocalParticipant:h,userId:m}=r,p=je(),[v,g]=C.useState(null),[y,S]=C.useState(!0),[w,k]=C.useState(!0),E=Rw(v??void 0),T=n==="videoTrack"?d:n==="screenShareTrack"?f:void 0;if(C.useLayoutEffect(()=>{if(!p||!v||n==="none")return;const j=p.bindVideoElement(v,c,n);return()=>{j==null||j()}},[p,n,c,v]),C.useEffect(()=>{if(!T||!v)return;const[j]=T.getVideoTracks();if(!j)return;const H=()=>{S(v.paused);const{width:$=0,height:A=0}=j.getSettings();k($>=A)};return S(v.paused),v.addEventListener("play",H),v.addEventListener("pause",H),j.addEventListener("unmute",H),()=>{v.removeEventListener("play",H),v.removeEventListener("pause",H),j.removeEventListener("unmute",H),S(!0)}},[T,v]),!p)return null;const I=n==="videoTrack"?On(r):n==="screenShareTrack"?yn(r):!1,U=n==="none"||(u==null?void 0:u[n])===et.INVISIBLE,O=!e||!I||U,B=t===void 0?h&&n==="videoTrack":t,P=n==="screenShareTrack";return b.jsxs(b.Fragment,{children:[!O&&b.jsx("video",{...l,className:He("str-video__video",i,{"str-video__video--not-playing":y,"str-video__video--tall":!w,"str-video__video--mirror":B,"str-video__video--screen-share":P}),"data-user-id":m,"data-session-id":c,ref:j=>{var H;g(j),(H=a==null?void 0:a.setVideoElement)==null||H.call(a,j)}}),E&&b.jsx(Xg,{style:{position:"absolute"},participant:r}),(O||y)&&s&&b.jsx(s,{style:{position:"absolute"},participant:r,ref:a==null?void 0:a.setVideoPlaceholderElement})]})};Ow.displayName="Video";const XD=({trackedElement:e,dynascaleManager:t,sessionId:n,trackType:r})=>{const i=je(),s=t??(i==null?void 0:i.dynascaleManager);C.useEffect(()=>{if(!e||!s||!i||r==="none")return;const o=s.trackElementVisibility(e,n,r);return()=>{o()}},[e,s,i,n,r])},ZD=({imageSrc:e,name:t,style:n,className:r,...i})=>{const[s,o]=C.useState(!1);return b.jsxs(b.Fragment,{children:[(!e||s)&&t&&b.jsx(eL,{className:r,style:n,names:[t]}),e&&!s&&b.jsx("img",{onError:()=>o(!0),alt:"avatar",className:He("str-video__avatar",r),src:e,style:n,...i})]})},eL=({className:e,names:t,style:n})=>{var r;return b.jsx("div",{className:He("str-video__avatar--initials-fallback",e),style:n,children:b.jsxs("div",{children:[t[0][0],(r=t[1])==null?void 0:r[0]]})})};C.createContext(void 0);const un=C.forwardRef(function(t,n){const{icon:r,enabled:i,variant:s,onClick:o,className:a,...l}=t;return b.jsx("button",{className:He("str-video__call-controls__button",a,{[`str-video__call-controls__button--variant-${s}`]:s,"str-video__call-controls__button--enabled":i}),onClick:c=>{c.preventDefault(),o==null||o(c)},ref:n,...l,children:b.jsx(Be,{icon:r})})}),mi=C.forwardRef(function({disabled:t,caption:n,children:r,className:i,active:s,Menu:o,menuPlacement:a,menuOffset:l,title:c,ToggleMenuButton:d=tL,variant:f,onClick:u,onMenuToggle:h,...m},p){return b.jsxs("div",{className:He("str-video__composite-button",i,{"str-video__composite-button--caption":n,"str-video__composite-button--menu":o}),title:c,ref:p,children:[b.jsxs("div",{className:He("str-video__composite-button__button-group",{"str-video__composite-button__button-group--active":s,"str-video__composite-button__button-group--active-primary":s&&f==="primary","str-video__composite-button__button-group--active-secondary":s&&f==="secondary","str-video__composite-button__button-group--disabled":t}),children:[b.jsx("button",{type:"button",className:"str-video__composite-button__button",onClick:v=>{v.preventDefault(),u==null||u(v)},disabled:t,...m,children:r}),o&&b.jsx(np,{offset:l,placement:a,ToggleButton:d,onToggle:h,children:_w(o)?b.jsx(o,{}):o})]}),n&&b.jsx("div",{className:"str-video__composite-button__caption",children:n})]})}),tL=C.forwardRef(function({menuShown:t},n){return b.jsx(un,{className:He("str-video__menu-toggle-button",{"str-video__menu-toggle-button--active":t}),icon:t?"caret-down":"caret-up",ref:n})}),nL=({disabled:e,onAccept:t,onClick:n})=>{const r=je(),i=C.useCallback(async s=>{n?n(s):r&&(await r.join(),t==null||t())},[n,t,r]);return b.jsx(un,{disabled:e,icon:"call-accept",variant:"success","data-testid":"accept-call-button",onClick:i})},qc=e=>{const{isVisible:t,message:n,children:r,visibilityTimeout:i,resetIsVisible:s,placement:o="top",iconClassName:a="str-video__notification__icon",close:l}=e,{refs:c,x:d,y:f,strategy:u}=Zh({placement:o,strategy:"absolute"});return C.useEffect(()=>{if(!t||!i||!s)return;const h=setTimeout(()=>{s()},i);return()=>clearTimeout(h)},[t,s,i]),b.jsxs("div",{ref:c.setReference,children:[t&&b.jsxs("div",{className:"str-video__notification",ref:c.setFloating,style:{position:u,top:f??0,left:d??0,overflowY:"auto"},children:[a&&b.jsx("i",{className:a}),b.jsx("span",{className:"str-video__notification__message",children:n}),l?b.jsx("i",{className:"str-video__icon str-video__icon--close str-video__notification__close",onClick:l}):null]}),r]})},rp=e=>{const{permission:t,isAwaitingApproval:n,messageApproved:r,messageAwaitingApproval:i,messageRevoked:s,visibilityTimeout:o=3500,children:a}=e,{useHasPermissions:l}=at(),c=l(t),d=C.useRef(c),[f,u]=C.useState();C.useEffect(()=>{c&&!d.current?(u("granted"),d.current=!0):!c&&d.current&&(u("revoked"),d.current=!1)},[c]);const h=C.useCallback(()=>u(void 0),[]);return n?b.jsx(qc,{isVisible:n&&!c,message:i,children:a}):b.jsx(qc,{isVisible:!!f,visibilityTimeout:o,resetIsVisible:h,message:f==="granted"?r:s,children:a})},rL=({children:e,text:t,placement:n})=>{const{useMicrophoneState:r}=at(),{isSpeakingWhileMuted:i}=r(),{t:s}=Xe(),o=t??s("You are muted. Unmute to speak.");return b.jsx(qc,{message:o,isVisible:i,placement:n||"top-start",children:e})},iL=({className:e,type:t="spinner",text:n,tooltip:r})=>b.jsxs("div",{className:He("str-video__loading-indicator",e),title:r,children:[b.jsx("div",{className:He("str-video__loading-indicator__icon",t)}),n&&b.jsx("p",{className:"str-video__loading-indicator-text",children:n})]}),sL=({children:e,referenceElement:t,tooltipClassName:n,tooltipPlacement:r="top",visible:i=!1})=>{const s=C.useRef(null),{refs:o,x:a,y:l,strategy:c,context:d}=Zh({placement:r,strategy:"absolute",middleware:[rD({element:s})]});return C.useEffect(()=>{o.setReference(t)},[t,o]),i?b.jsxs("div",{className:He("str-video__tooltip",n),ref:o.setFloating,style:{position:c,top:l??0,left:a??0},children:[b.jsx(vD,{ref:s,context:d,fill:"var(--str-video__tooltip--background-color)"}),e]}):null},oL=({onMouseEnter:e,onMouseLeave:t}={})=>{const[n,r]=C.useState(!1),i=C.useCallback(o=>{r(!0),e==null||e(o)},[e]),s=C.useCallback(o=>{r(!1),t==null||t(o)},[t]);return{handleMouseEnter:i,handleMouseLeave:s,tooltipVisible:n}},Vo=({title:e,tooltipClassName:t,tooltipPlacement:n,tooltipDisabled:r,...i})=>{const{handleMouseEnter:s,handleMouseLeave:o,tooltipVisible:a}=oL(),[l,c]=C.useState(null),d=!r&&!!e&&a;return b.jsxs(b.Fragment,{children:[b.jsx(sL,{referenceElement:l,visible:d,tooltipClassName:t,tooltipPlacement:n,children:e||""}),b.jsx("div",{ref:c,onMouseEnter:s,onMouseLeave:o,...i})]})};C.forwardRef(function(t,n){return b.jsx(mi,{ref:n,active:!0,variant:"secondary","data-testid":"recording-stop-button",children:b.jsx(Be,{icon:"recording-off"})})});const aL=({caption:e})=>{const{t}=Xe(),{toggleCallRecording:n,isAwaitingResponse:r,isCallRecordingInProgress:i}=WN();let s=e??t("Record call");return r&&(s=t(i?"Waiting for recording to stop...":"Waiting for recording to start...")),b.jsx(jt,{requiredGrants:[ee.START_RECORD_CALL,ee.STOP_RECORD_CALL],children:b.jsx(mi,{active:i,caption:e,variant:"secondary","data-testid":i?"recording-stop-button":"recording-start-button",title:s,onClick:r?void 0:n,children:r?b.jsx(iL,{}):b.jsx(Be,{icon:i?"recording-on":"recording-off"})})})},Nw={":like:":"👍",":raise-hand:":"✋",":fireworks:":"🎉",":dislike:":"👎",":heart:":"❤️",":smile:":"😀"},cL=({participant:{reaction:e,sessionId:t},hideAfterTimeoutInMs:n=5500,emojiReactionMap:r=Nw})=>{const i=je();if(C.useEffect(()=>{if(!i||!e)return;const o=setTimeout(()=>{i.resetReaction(t)},n);return()=>{clearTimeout(o)}},[i,n,e,t]),!e)return null;const{emoji_code:s}=e;return b.jsx("div",{className:"str-video__reaction",children:b.jsx("span",{className:"str-video__reaction__emoji",children:s&&r[s]})})},lL=[{type:"reaction",emoji_code:":like:"},{type:"raised-hand",emoji_code:":raise-hand:"},{type:"reaction",emoji_code:":fireworks:"},{type:"reaction",emoji_code:":dislike:"},{type:"reaction",emoji_code:":heart:"},{type:"reaction",emoji_code:":smile:"}],uL=({reactions:e=lL})=>b.jsx(jt,{requiredGrants:[ee.CREATE_REACTION],children:b.jsx(np,{placement:"top",ToggleButton:dL,visualType:qi.MENU,children:b.jsx(fL,{reactions:e})})}),dL=C.forwardRef(function({menuShown:t},n){const{t:r}=Xe();return b.jsx(Vo,{title:r("Reactions"),tooltipDisabled:t,children:b.jsx(mi,{ref:n,active:t,variant:"primary",children:b.jsx(Be,{icon:"reactions"})})})}),fL=({reactions:e,layout:t="horizontal"})=>{const n=je(),{close:r}=tp();return b.jsx("div",{className:He("str-video__reactions-menu",{"str-video__reactions-menu--horizontal":t==="horizontal","str-video__reactions-menu--vertical":t==="vertical"}),children:e.map(i=>b.jsx("button",{type:"button",className:"str-video__reactions-menu__button",onClick:()=>{n==null||n.sendReaction(i),r==null||r()},children:i.emoji_code&&Nw[i.emoji_code]},i.emoji_code))})},ip=(e,t)=>{const n=we(["react-sdk"]);return async()=>{try{await t()}catch(r){if(e.onError){e.onError(r);return}hL(r)||n("error","Call control handler failed",r)}}};function hL(e){return e instanceof DOMException&&e.name==="NotAllowedError"}const pL=e=>{const{t}=Xe(),{caption:n}=e,{useHasOngoingScreenShare:r,useScreenShareState:i,useCallSettings:s}=at(),o=r(),{hasPermission:a,requestPermission:l,isAwaitingPermission:c}=ep(ee.SCREENSHARE),d=s(),f=d==null?void 0:d.screensharing.enabled,{screenShare:u,optimisticIsMute:h}=i(),m=!h,p=!m&&(o||f===!1),v=ip(e,async()=>{a?await u.toggle():await l()});return b.jsx(jt,{requiredGrants:[ee.SCREENSHARE],children:b.jsx(rp,{permission:ee.SCREENSHARE,isAwaitingApproval:c,messageApproved:t("You can now share your screen."),messageAwaitingApproval:t("Awaiting for an approval to share screen."),messageRevoked:t("You can no longer share your screen."),children:b.jsx(Vo,{title:n??t("Share screen"),children:b.jsx(mi,{active:o||m,caption:n,variant:"primary","data-testid":o?"screen-share-stop-button":"screen-share-start-button",disabled:p,onClick:v,children:b.jsx(Be,{icon:o?"screen-share-on":"screen-share-off"})})})})})},Aw=C.createContext({}),mL=e=>{const{children:t,icon:n,defaultSelectedLabel:r,defaultSelectedIndex:i,handleSelect:s}=e,[o,a]=C.useState(!1),[l,c]=C.useState(null),[d,f]=C.useState(i),[u,h]=C.useState(r),{refs:m,context:p}=ww({placement:"bottom-start",open:o,onOpenChange:a,whileElementsMounted:lw,middleware:[dw()]}),v=C.useRef([]),g=C.useRef([]),y=C.useCallback(j=>{f(j),s(j||0),a(!1),j!==null&&h(g.current[j])},[s]),S=j=>{o?c(j):y(j)},w=VD(p,{listRef:v,activeIndex:l,selectedIndex:d,onNavigate:c}),k=HD(p,{listRef:g,activeIndex:l,selectedIndex:d,onMatch:S}),E=DD(p),T=MD(p),I=zD(p,{role:"listbox"}),{getReferenceProps:U,getFloatingProps:O,getItemProps:B}=UD([w,k,E,T,I]),P=C.useMemo(()=>({activeIndex:l,selectedIndex:d,getItemProps:B,handleSelect:y}),[l,d,B,y]);return b.jsxs("div",{className:"str-video__dropdown",children:[b.jsxs("div",{className:"str-video__dropdown-selected",ref:m.setReference,tabIndex:0,...U(),children:[b.jsxs("label",{className:"str-video__dropdown-selected__label",children:[n&&b.jsx(Be,{className:"str-video__dropdown-selected__icon",icon:n}),u]}),b.jsx(Be,{className:"str-video__dropdown-selected__chevron",icon:o?"chevron-up":"chevron-down"})]}),b.jsx(Aw.Provider,{value:P,children:o&&b.jsx(OD,{context:p,modal:!1,children:b.jsx("div",{className:"str-video__dropdown-list",ref:m.setFloating,...O(),children:b.jsx(fD,{elementsRef:v,labelsRef:g,children:t})})})})]})},Zg=e=>{const{selected:t,label:n,icon:r}=e,{getItemProps:i,handleSelect:s}=C.useContext(Aw),{ref:o,index:a}=hD();return b.jsxs("div",{className:He("str-video__dropdown-option",{"str-video__dropdown-option--selected":t}),ref:o,...i({onClick:()=>s(a)}),children:[r&&b.jsx(Be,{className:"str-video__dropdown-icon",icon:r}),b.jsx("span",{className:"str-video__dropdown-label",children:n})]})},gL=e=>{const{children:t,icon:n,handleSelect:r,defaultSelectedLabel:i,defaultSelectedIndex:s}=e;return b.jsx(mL,{icon:n,handleSelect:r,defaultSelectedIndex:s,defaultSelectedLabel:i,children:t})},ev=({disabled:e,id:t,label:n,onChange:r,name:i,selected:s,defaultChecked:o,value:a})=>b.jsxs("label",{className:He("str-video__device-settings__option",{"str-video__device-settings__option--selected":s,"str-video__device-settings__option--disabled":e}),htmlFor:t,children:[b.jsx("input",{type:"radio",name:i,onChange:r,value:a,id:t,checked:s,defaultChecked:o,disabled:e}),n]}),vL=e=>{const{devices:t=[],selectedDeviceId:n,title:r,type:i,onChange:s}=e,{close:o}=tp(),{t:a}=Xe();return b.jsxs("div",{className:"str-video__device-settings__device-kind",children:[r&&b.jsx("div",{className:"str-video__device-settings__device-selector-title",children:r}),t.length===0?b.jsx(ev,{id:`${i}--default`,label:a("Default"),name:i,defaultChecked:!0,value:"default"}):t.map(l=>b.jsx(ev,{id:`${i}--${l.deviceId}`,value:l.deviceId,label:l.label,onChange:c=>{s==null||s(c.target.value),o==null||o()},name:i,selected:l.deviceId===n||t.length===1},l.deviceId))]})},yL=e=>{var c;const{devices:t=[],selectedDeviceId:n,title:r,onChange:i,icon:s}=e,{t:o}=Xe(),a=t.findIndex(d=>d.deviceId===n),l=C.useCallback(d=>{i==null||i(t[d].deviceId)},[t,i]);return b.jsxs("div",{className:"str-video__device-settings__device-kind",children:[b.jsx("div",{className:"str-video__device-settings__device-selector-title",children:r}),b.jsx(gL,{icon:s,defaultSelectedIndex:a,defaultSelectedLabel:((c=t[a])==null?void 0:c.label)??o("Default"),handleSelect:l,children:t.length===0?b.jsx(Zg,{icon:s,label:o("Default"),selected:!0}):t.map(d=>b.jsx(Zg,{icon:s,label:d.label,selected:d.deviceId===n||t.length===1},d.deviceId))})]})},Dw=e=>{const{visualType:t="list",icon:n,placeholder:r,...i}=e;return t==="list"?b.jsx(vL,{...i}):b.jsx(yL,{...i,icon:n})},SL=({title:e,visualType:t})=>{const{useMicrophoneState:n}=at(),{microphone:r,selectedDevice:i,devices:s}=n();return b.jsx(Dw,{devices:s||[],selectedDeviceId:i,type:"audioinput",onChange:async o=>{await r.select(o)},title:e,visualType:t,icon:"mic"})},bL=({title:e,visualType:t})=>{const{useCameraState:n}=at(),{camera:r,devices:i,selectedDevice:s}=n();return b.jsx(Dw,{devices:i||[],type:"videoinput",selectedDeviceId:s,onChange:async o=>{await r.select(o)},title:e,visualType:t,icon:"camera"})};C.forwardRef(function({menuShown:t},n){const{t:r}=Xe();return b.jsx(un,{className:He("str-video__device-settings__button",{"str-video__device-settings__button--active":t}),title:r("Toggle device menu"),icon:"device-settings",ref:n})});const wL=e=>{const{t}=Xe(),{caption:n,Menu:r=b.jsx(SL,{visualType:"list"}),menuPlacement:i="top",onMenuToggle:s,...o}=e,{hasPermission:a,requestPermission:l,isAwaitingPermission:c}=ep(ee.SEND_AUDIO),{useMicrophoneState:d}=at(),{microphone:f,optimisticIsMute:u,hasBrowserPermission:h}=d(),[m,p]=C.useState(!1),v=ip(e,async()=>{a?await f.toggle():await l()});return b.jsx(jt,{requiredGrants:[ee.SEND_AUDIO],children:b.jsx(rp,{permission:ee.SEND_AUDIO,isAwaitingApproval:c,messageApproved:t("You can now speak."),messageAwaitingApproval:t("Awaiting for an approval to speak."),messageRevoked:t("You can no longer speak."),children:b.jsx(Vo,{title:a?h?n??t("Mic"):t("Check your browser mic permissions"):t("You have no permission to share your audio"),tooltipDisabled:m,children:b.jsxs(mi,{active:u,caption:n,variant:"secondary",disabled:!h||!a,"data-testid":u?"audio-unmute-button":"audio-mute-button",onClick:v,Menu:r,menuPlacement:i,menuOffset:16,...o,onMenuToggle:g=>{p(g),s==null||s(g)},children:[b.jsx(Be,{icon:u?"mic-off":"mic"}),(!h||!a)&&b.jsx("span",{className:"str-video__no-media-permission",children:"!"})]})})})})},CL=e=>{const{t}=Xe(),{caption:n,Menu:r=b.jsx(bL,{visualType:"list"}),menuPlacement:i="top",onMenuToggle:s,...o}=e,{hasPermission:a,requestPermission:l,isAwaitingPermission:c}=ep(ee.SEND_VIDEO),{useCameraState:d,useCallSettings:f}=at(),{camera:u,optimisticIsMute:h,hasBrowserPermission:m}=d(),p=f(),v=p==null?void 0:p.video.enabled,[g,y]=C.useState(!1),S=ip(e,async()=>{a?await u.toggle():await l()});return b.jsx(jt,{requiredGrants:[ee.SEND_VIDEO],children:b.jsx(rp,{permission:ee.SEND_VIDEO,isAwaitingApproval:c,messageApproved:t("You can now share your video."),messageAwaitingApproval:t("Awaiting for an approval to share your video."),messageRevoked:t("You can no longer share your video."),children:b.jsx(Vo,{title:a?m?v?n||t("Video"):t("Video publishing is disabled by the system"):t("Check your browser video permissions"):t("You have no permission to share your video"),tooltipDisabled:g,children:b.jsxs(mi,{active:h,caption:n,variant:"secondary",disabled:!m||!a||!v,"data-testid":h?"video-unmute-button":"video-mute-button",onClick:S,Menu:r,menuPlacement:i,menuOffset:16,...o,onMenuToggle:w=>{y(w),s==null||s(w)},children:[b.jsx(Be,{icon:h?"camera-off":"camera"}),(!m||!a||!v)&&b.jsx("span",{className:"str-video__no-media-permission",children:"!"})]})})})})};C.forwardRef(function({menuShown:t},n){const{t:r}=Xe();return b.jsx(Vo,{title:r("Leave call"),tooltipDisabled:t,children:b.jsx(un,{icon:t?"close":"call-end",variant:t?"active":"danger","data-testid":"leave-call-button",ref:n})})});const df=({disabled:e,caption:t,onClick:n,onLeave:r})=>{const i=je(),{t:s}=Xe(),o=C.useCallback(async a=>{n?n(a):i&&(await i.leave(),r==null||r())},[n,r,i]);return b.jsx(un,{disabled:e,icon:"call-end",variant:"danger",title:t??s("Leave call"),"data-testid":"cancel-call-button",onClick:o})},kL=({onLeave:e})=>b.jsxs("div",{className:"str-video__call-controls",children:[b.jsx(jt,{requiredGrants:[ee.SEND_AUDIO],children:b.jsx(rL,{children:b.jsx(wL,{})})}),b.jsx(jt,{requiredGrants:[ee.SEND_VIDEO],children:b.jsx(CL,{})}),b.jsx(jt,{requiredGrants:[ee.CREATE_REACTION],children:b.jsx(uL,{})}),b.jsx(jt,{requiredGrants:[ee.SCREENSHARE],children:b.jsx(pL,{})}),b.jsx(jt,{requiredGrants:[ee.START_RECORD_CALL,ee.STOP_RECORD_CALL],children:b.jsx(aL,{})}),b.jsx(df,{onLeave:e})]});C.lazy(()=>dE(()=>import("./latency-chart-Bj5OSYzg.es-CSh15YmF.js"),[]));var tv;(function(e){e.GOOD="Good",e.OK="Ok",e.BAD="Bad"})(tv||(tv={}));C.forwardRef(function(t,n){const{t:r}=Xe(),{caption:i,menuShown:s}=t;return b.jsx(mi,{ref:n,active:s,caption:i,title:i||r("Statistics"),"data-testid":"stats-button",children:b.jsx(Be,{icon:"stats"})})});C.forwardRef(function(t,n){return b.jsx(un,{enabled:t.menuShown,icon:"ellipsis",ref:n})});C.forwardRef(function(t,n){return b.jsx(un,{enabled:t.menuShown,icon:"filter",ref:n})});C.createContext(null);const EL=()=>{const e=je(),{useCallCallingState:t}=at(),n=t();if(!e)return null;const r=n!==V.RINGING;return b.jsx("div",{className:"str-video__pending-call-controls",children:e.isCreatedByMe?b.jsx(df,{disabled:r}):b.jsxs(b.Fragment,{children:[b.jsx(nL,{disabled:r}),b.jsx(df,{onClick:()=>{const i=e.isCreatedByMe?"cancel":"decline";e.leave({reject:!0,reason:i})},disabled:r})]})})},TL={[V.JOINING]:"Joining",[V.RINGING]:"Ringing",[V.MIGRATING]:"Migrating",[V.RECONNECTING]:"Re-connecting",[V.RECONNECTING_FAILED]:"Failed",[V.OFFLINE]:"No internet connection",[V.IDLE]:"",[V.UNKNOWN]:"",[V.JOINED]:"Joined",[V.LEFT]:"Left call"},xL=e=>{const{includeSelf:t=!1,totalMembersToShow:n=3}=e,r=je(),{t:i}=Xe(),{useCallCallingState:s,useCallMembers:o}=at(),a=s(),l=o(),c=HN();if(!r)return null;const d=(l||[]).slice(0,n).map(({user:u})=>u).filter(u=>u.id!==(c==null?void 0:c.id)||t);if(t&&!d.find(u=>u.id===(c==null?void 0:c.id))){const u=l.find(({user:h})=>h.id===(c==null?void 0:c.id));u&&d.splice(0,1,u.user)}const f=TL[a];return b.jsxs("div",{className:"str-video__call-panel str-video__call-panel--ringing",children:[b.jsx("div",{className:"str-video__call-panel__members-list",children:d.map(u=>b.jsxs("div",{className:"str-video__call-panel__member-box",children:[b.jsx(ZD,{name:u.name,imageSrc:u.image}),u.name&&b.jsx("div",{className:"str-video__member_details",children:b.jsx("span",{className:"str-video__member_name",children:u.name})})]},u.id))}),f&&b.jsx("div",{className:"str-video__call-panel__calling-state-label",children:i(f)}),[V.RINGING,V.JOINING].includes(a)&&b.jsx(EL,{})]})};C.forwardRef(function(t,n){const{permissionRequests:r,handleUpdatePermission:i,...s}=t,{t:o}=Xe();return b.jsx("div",{className:"str-video__permission-requests-list",ref:n,...s,children:r.map((a,l)=>{const{user:c,permissions:d}=a;return b.jsx(C.Fragment,{children:d.map(f=>b.jsxs("div",{className:"str-video__permission-request",children:[b.jsx("div",{className:"str-video__permission-request__message",children:RL(c.name||c.id,f,o)}),b.jsx(Du,{className:"str-video__permission-request__button--allow",type:"button",onClick:i(a,"grant"),children:o("Allow")}),b.jsx(Du,{className:"str-video__permission-request__button--reject",type:"button",onClick:i(a,"revoke"),children:o("Revoke")}),b.jsx(Du,{className:"str-video__permission-request__button--reject",type:"button",onClick:i(a,"dismiss"),children:o("Dismiss")})]},f))},`${c.id}/${l}`)})})});const Du=e=>{const{className:t,...n}=e;return b.jsx("button",{className:He("str-video__permission-request__button",t),...n})},RL=(e,t,n)=>{switch(t){case ee.SEND_AUDIO:return n("{{ userName }} is requesting to speak",{userName:e});case ee.SEND_VIDEO:return n("{{ userName }} is requesting to share their camera",{userName:e});case ee.SCREENSHARE:return n("{{ userName }} is requesting to present their screen",{userName:e});default:return n("{{ userName }} is requesting permission: {{ permission }}",{userName:e,permission:t})}},ff=({as:e="div",className:t,children:n,...r})=>b.jsx(e,{...r,className:He("str-video",t),children:n}),_L=C.forwardRef(function(t,n){return b.jsx(un,{enabled:t.menuShown,icon:"ellipsis",ref:n})}),IL=()=>{const e=je(),{t}=Xe(),n=()=>{e==null||e.screenShare.disable()};return b.jsxs("div",{className:"str-video__screen-share-overlay",children:[b.jsx(Be,{icon:"screen-share-off"}),b.jsx("span",{className:"str-video__screen-share-overlay__title",children:t("You are presenting your screen")}),b.jsxs("button",{onClick:n,className:"str-video__screen-share-overlay__button",children:[b.jsx(Be,{icon:"close"})," ",t("Stop Screen Sharing")]})]})},sp=({indicatorsVisible:e=!0,menuPlacement:t="bottom-start",showMenuButton:n=!0,ParticipantActionsContextMenu:r=JD})=>{const{participant:i,trackType:s}=Al(),o=yn(i);return i.isLocalParticipant&&o&&s==="screenShareTrack"?b.jsxs(b.Fragment,{children:[b.jsx(IL,{}),b.jsx(nv,{indicatorsVisible:e})]}):b.jsxs(b.Fragment,{children:[n&&b.jsx(np,{strategy:"fixed",placement:t,ToggleButton:_L,children:b.jsx(r,{})}),b.jsx(cL,{participant:i}),b.jsx(nv,{indicatorsVisible:e})]})},nv=({indicatorsVisible:e=!0})=>{const{participant:t}=Al(),{isLocalParticipant:n,connectionQuality:r,pin:i,sessionId:s,name:o,userId:a}=t,l=je(),{t:c}=Xe(),d=!!r&&Jd.ConnectionQuality[r].toLowerCase(),f=mr(t),u=On(t),h=!!i&&i.isLocalPin;return b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"str-video__participant-details",children:b.jsxs("span",{className:"str-video__participant-details__name",children:[o||a,e&&!f&&b.jsx("span",{className:"str-video__participant-details__name--audio-muted"}),e&&!u&&b.jsx("span",{className:"str-video__participant-details__name--video-muted"}),e&&h&&b.jsx("span",{title:c("Unpin"),onClick:()=>l==null?void 0:l.unpin(s),className:"str-video__participant-details__name--pinned"}),e&&b.jsx(PL,{})]})}),e&&b.jsx(qc,{isVisible:n&&r===Jd.ConnectionQuality.POOR,message:c("Poor connection quality"),children:d&&b.jsx("span",{className:He("str-video__participant-details__connection-quality",`str-video__participant-details__connection-quality--${d}`),title:d})})]})},PL=()=>{const{participant:e}=Al(),{isSpeaking:t,isDominantSpeaker:n}=e;return b.jsxs("span",{className:He("str-video__speech-indicator",t&&"str-video__speech-indicator--speaking",n&&"str-video__speech-indicator--dominant"),children:[b.jsx("span",{className:"str-video__speech-indicator__bar"}),b.jsx("span",{className:"str-video__speech-indicator__bar"}),b.jsx("span",{className:"str-video__speech-indicator__bar"})]})},za=C.forwardRef(function({participant:t,trackType:n="videoTrack",mirror:r,muteAudio:i,refs:{setVideoElement:s,setVideoPlaceholderElement:o}={},className:a,VideoPlaceholder:l,PictureInPicturePlaceholder:c,ParticipantViewUI:d=sp},f){const{isLocalParticipant:u,isSpeaking:h,isDominantSpeaker:m,sessionId:p}=t,v=mr(t),g=On(t),y=wl(t),[S,w]=C.useState(null),[k,E]=C.useState(null),[T,I]=C.useState(null);XD({sessionId:p,trackedElement:S,trackType:n});const{useIncomingVideoSettings:U}=at(),{isParticipantVideoEnabled:O}=U(),B=C.useMemo(()=>({participant:t,participantViewElement:S,videoElement:k,videoPlaceholderElement:T,trackType:n}),[k,T,t,S,n]),P=C.useMemo(()=>({setVideoElement:j=>{s==null||s(j),E(j)},setVideoPlaceholderElement:j=>{o==null||o(j),I(j)}}),[s,o]);return b.jsx("div",{"data-testid":"participant-view",ref:j=>{Iw(f,j),w(j)},className:He("str-video__participant-view",m&&"str-video__participant-view--dominant-speaker",h&&"str-video__participant-view--speaking",!g&&"str-video__participant-view--no-video",!v&&"str-video__participant-view--no-audio",a),children:b.jsxs(Ew.Provider,{value:B,children:[!u&&!i&&b.jsxs(b.Fragment,{children:[v&&b.jsx(Ro,{participant:t,trackType:"audioTrack"}),y&&b.jsx(Ro,{participant:t,trackType:"screenShareAudioTrack"})]}),b.jsx(Ow,{VideoPlaceholder:l,PictureInPicturePlaceholder:c,participant:t,trackType:n,refs:P,enabled:u||n!=="videoTrack"||O(t.sessionId),mirror:r,autoPlay:!0}),_w(d)?b.jsx(d,{}):d]})})});za.displayName="ParticipantView";const Dl=ZO;Dl.displayName="StreamCall";var OL="Joining",NL="Mic",AL="Ringing",DL="Speakers",LL="Video",jL="Live",ML="Reactions",FL="Statistics",UL="Invite",$L="Join",VL="You",BL="Me",zL="Unknown",HL="Default",WL="Refresh",qL="Allow",KL="Revoke",GL="Dismiss",JL="Pinned",YL="Unpin",QL="Pin",XL="Block",ZL="Enter",e2="Leave",t2="Participants",n2=", and ({{ count }}) anonymous",r2={Joining:OL,Mic:NL,"No internet connection":"No internet connection","Re-connecting":"Re-connecting",Ringing:AL,"Screen Share":"Screen Share","Select a Camera":"Select a Camera","Select a Mic":"Select a Mic","Select Speakers":"Select Speakers",Speakers:DL,Video:LL,"You are muted. Unmute to speak.":"You are muted. Unmute to speak.",Live:jL,"You can now speak.":"You can now speak.","Awaiting for an approval to speak.":"Awaiting for an approval to speak.","You can no longer speak.":"You can no longer speak.","You can now share your video.":"You can now share your video.","Awaiting for an approval to share your video.":"Awaiting for an approval to share your video.","You can no longer share your video.":"You can no longer share your video.","Waiting for recording to stop...":"Waiting for recording to stop...","Waiting for recording to start...":"Waiting for recording to start...","Record call":"Record call",Reactions:ML,Statistics:FL,"You can now share your screen.":"You can now share your screen.","Awaiting for an approval to share screen.":"Awaiting for an approval to share screen.","You can no longer share your screen.":"You can no longer share your screen.","Share screen":"Share screen","Incoming Call...":"Incoming Call...","Calling...":"Calling...","Mute All":"Mute All",Invite:UL,Join:$L,You:VL,Me:BL,Unknown:zL,"Toggle device menu":"Toggle device menu",Default:HL,"Call Recordings":"Call Recordings",Refresh:WL,"Check your browser video permissions":"Check your browser video permissions","Video publishing is disabled by the system":"Video publishing is disabled by the system","You have no permission to share your video":"You have no permission to share your video","You have no permission to share your audio":"You have no permission to share your audio","You are presenting your screen":"You are presenting your screen","Stop Screen Sharing":"Stop Screen Sharing",Allow:qL,Revoke:KL,Dismiss:GL,"Microphone on":"Microphone on","Microphone off":"Microphone off","Camera on":"Camera on","Camera off":"Camera off","No camera found":"No camera found","Video is disabled":"Video is disabled",Pinned:JL,Unpin:YL,Pin:QL,"Pin for everyone":"Pin for everyone","Unpin for everyone":"Unpin for everyone",Block:XL,"Turn off video":"Turn off video","Turn off screen share":"Turn off screen share","Mute audio":"Mute audio","Mute screen share audio":"Mute screen share audio","Allow audio":"Allow audio","Allow video":"Allow video","Allow screen sharing":"Allow screen sharing","Disable audio":"Disable audio","Disable video":"Disable video","Disable screen sharing":"Disable screen sharing",Enter:ZL,Leave:e2,"Leave call":"Leave call","End call for all":"End call for all","{{ direction }} fullscreen":"{{ direction }} fullscreen","{{ direction }} picture-in-picture":"{{ direction }} picture-in-picture","Dominant Speaker":"Dominant Speaker","Poor connection quality":"Poor connection quality. Please check your internet connection.",Participants:t2,Anonymous:n2,"No participants found":"No participants found","Participants ({{ numberOfParticipants }})":"Participants ({{ numberOfParticipants }})","{{ userName }} is sharing their screen":"{{ userName }} is sharing their screen","{{ userName }} is requesting to speak":"{{ userName }} is requesting to speak","{{ userName }} is requesting to share their camera":"{{ userName }} is requesting to share their camera","{{ userName }} is requesting to present their screen":"{{ userName }} is requesting to present their screen","{{ userName }} is requesting permission: {{ permission }}":"{{ userName }} is requesting permission: {{ permission }}"};const i2={en:r2},hf=e=>b.jsx(oN,{translationsOverrides:i2,...e});hf.displayName="StreamVideo";const s2=({excludeLocalParticipant:e=!1,filterParticipants:t})=>{const{useParticipants:n,useRemoteParticipants:r}=at(),i=n(),s=r();return C.useMemo(()=>{const o=e?s:i;return t?o.filter(a=>t(a)):o},[i,s,e,t])},o2=(e,t)=>{C.useEffect(()=>{if(e)return t?e.setSortParticipantsBy(si(Ah,c2)):e.setSortParticipantsBy(pP),()=>{a2(e)}},[e,t])},a2=e=>{const t=Ib.get(e.type);e.setSortParticipantsBy(t.options.sortParticipantsBy||Co)},c2=(e,t)=>e.isLocalParticipant?1:t.isLocalParticipant?-1:0,l2=(e,t,n)=>{const[r,i]=C.useState({vertical:typeof n=="number"?n:null,horizontal:typeof n=="number"?n:null});return C.useEffect(()=>{if(!t||!e||typeof n=="number"||typeof n>"u")return;let s=null,o=null;const a=new ResizeObserver((l,c)=>{if(l.length>1){const u=t.firstChild;u&&(o=u.clientHeight,s=u.clientWidth,c.unobserve(t))}if(o===null||s===null)return;const d=Math.floor(e.clientHeight/o),f=Math.floor(e.clientWidth/s);i(u=>u.vertical!==d||u.horizontal!==f?{vertical:d,horizontal:f}:u)});return a.observe(e),a.observe(t),()=>{a.disconnect()}},[t,n,e]),r},u2=()=>b.jsx(sp,{menuPlacement:"top-end"}),Lw=({ParticipantViewUIBar:e=u2,ParticipantViewUISpotlight:t=sp,VideoPlaceholder:n,PictureInPicturePlaceholder:r,participantsBarPosition:i="bottom",participantsBarLimit:s,mirrorLocalParticipantVideo:o=!0,excludeLocalParticipant:a=!1,filterParticipants:l,pageArrowsVisible:c=!0})=>{const d=je(),{useParticipants:f,useRemoteParticipants:u}=at(),h=f(),m=u(),[p,...v]=s2({excludeLocalParticipant:a,filterParticipants:l}),[g,y]=C.useState(null),[S,w]=C.useState(null),[k,E]=C.useState(null),T=p&&yn(p),I=l2(k,S,s),U=i==="left"||i==="right",O=i==="top"||i==="bottom";C.useEffect(()=>{if(!g||!d)return;const A=d.setViewport(g);return()=>A()},[g,d]);const B=h.length===2;o2(d,B);let P=v;const j=U?I.vertical:I.horizontal;typeof s<"u"&&j!==null&&(P=v.slice(0,j-(T?1:0)));const H=o?void 0:!1;if(!d)return null;const $=i&&(P.length>0||T);return b.jsxs("div",{className:"str-video__speaker-layout__wrapper",children:[b.jsx(kw,{participants:m}),b.jsxs("div",{className:He("str-video__speaker-layout",i&&`str-video__speaker-layout--variant-${i}`),children:[b.jsx("div",{className:"str-video__speaker-layout__spotlight",children:p&&b.jsx(za,{participant:p,muteAudio:!0,mirror:H,trackType:T?"screenShareTrack":"videoTrack",ParticipantViewUI:t,VideoPlaceholder:n,PictureInPicturePlaceholder:r})}),$&&b.jsxs("div",{ref:E,className:"str-video__speaker-layout__participants-bar-buttons-wrapper",children:[b.jsx("div",{className:"str-video__speaker-layout__participants-bar-wrapper",ref:y,children:b.jsxs("div",{ref:w,className:"str-video__speaker-layout__participants-bar",children:[T&&b.jsx("div",{className:"str-video__speaker-layout__participant-tile",children:b.jsx(za,{participant:p,ParticipantViewUI:e,VideoPlaceholder:n,PictureInPicturePlaceholder:r,mirror:H,muteAudio:!0})},p.sessionId),P.map(A=>b.jsx("div",{className:"str-video__speaker-layout__participant-tile",children:b.jsx(za,{participant:A,ParticipantViewUI:e,VideoPlaceholder:n,PictureInPicturePlaceholder:r,mirror:H,muteAudio:!0})},A.sessionId))]})}),c&&U&&b.jsx(f2,{scrollWrapper:g}),c&&O&&b.jsx(d2,{scrollWrapper:g})]})]})]})};Lw.displayName="SpeakerLayout";const d2=({scrollWrapper:e})=>{const t=qD(e),n=()=>{e==null||e.scrollBy({left:-150,behavior:"smooth"})},r=()=>{e==null||e.scrollBy({left:150,behavior:"smooth"})};return b.jsxs(b.Fragment,{children:[t&&t!=="start"&&b.jsx(un,{onClick:n,icon:"caret-left",className:"str-video__speaker-layout__participants-bar--button-left"}),t&&t!=="end"&&b.jsx(un,{onClick:r,icon:"caret-right",className:"str-video__speaker-layout__participants-bar--button-right"})]})},f2=({scrollWrapper:e})=>{const t=WD(e),n=()=>{e==null||e.scrollBy({top:-150,behavior:"smooth"})},r=()=>{e==null||e.scrollBy({top:150,behavior:"smooth"})};return b.jsxs(b.Fragment,{children:[t&&t!=="top"&&b.jsx(un,{onClick:n,icon:"caret-up",className:"str-video__speaker-layout__participants-bar--button-top"}),t&&t!=="bottom"&&b.jsx(un,{onClick:r,icon:"caret-down",className:"str-video__speaker-layout__participants-bar--button-bottom"})]})},[h2,p2,m2]="1.8.7".split(".");FI({type:Jd.SdkType.REACT,major:h2,minor:p2,patch:m2});const nt=[];for(let e=0;e<256;++e)nt.push((e+256).toString(16).slice(1));function g2(e,t=0){return(nt[e[t+0]]+nt[e[t+1]]+nt[e[t+2]]+nt[e[t+3]]+"-"+nt[e[t+4]]+nt[e[t+5]]+"-"+nt[e[t+6]]+nt[e[t+7]]+"-"+nt[e[t+8]]+nt[e[t+9]]+"-"+nt[e[t+10]]+nt[e[t+11]]+nt[e[t+12]]+nt[e[t+13]]+nt[e[t+14]]+nt[e[t+15]]).toLowerCase()}let Lu;const v2=new Uint8Array(16);function y2(){if(!Lu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Lu=crypto.getRandomValues.bind(crypto)}return Lu(v2)}const S2=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),rv={randomUUID:S2};function b2(e,t,n){if(rv.randomUUID&&!t&&!e)return rv.randomUUID();e=e||{};const r=e.random||(e.rng||y2)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,g2(r)}const w2=({userId:e,onCopy:t})=>{const[n,r]=C.useState(!1);return b.jsx("div",{className:"fixed bottom-4 left-4",children:b.jsxs("div",{className:"relative",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[b.jsx("button",{className:"bg-gray-800 p-2 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 hover:bg-gray-700 border border-gray-700",onClick:t,"aria-label":"Copy User ID",children:b.jsx("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),n&&b.jsxs("div",{className:"absolute bottom-full left-0 mb-2 bg-gray-800 text-white text-sm py-2 px-4 rounded shadow-lg border border-gray-700",children:[b.jsxs("p",{className:"whitespace-nowrap",children:["Your ID: ",e]}),b.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Click to copy ID"})]})]})})},C2=({onRingUsers:e,onCreateRoom:t})=>b.jsx("div",{className:"container mx-auto px-4 py-16",children:b.jsxs("div",{className:"max-w-2xl mx-auto",children:[b.jsx("h1",{className:"text-4xl font-bold text-center mb-12 text-white",children:"Choose Call Type"}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[b.jsxs("button",{className:"p-6 bg-gray-800 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 flex flex-col items-center hover:bg-gray-700 border border-gray-700",onClick:e,children:[b.jsx("svg",{className:"w-12 h-12 text-blue-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),b.jsx("h2",{className:"text-xl font-semibold mb-2 text-white",children:"Ring Users"}),b.jsx("p",{className:"text-gray-400 text-center",children:"Call specific users directly"})]}),b.jsxs("button",{className:"p-6 bg-gray-800 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 flex flex-col items-center hover:bg-gray-700 border border-gray-700",onClick:t,children:[b.jsx("svg",{className:"w-12 h-12 text-blue-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),b.jsx("h2",{className:"text-xl font-semibold mb-2 text-white",children:"Create Room"}),b.jsx("p",{className:"text-gray-400 text-center",children:"Create a room with a shareable link"})]})]})]})}),k2=({onAccepted:e})=>{const{useCallCallingState:t}=at(),n=t();return C.useEffect(()=>{n===V.JOINED&&e()},[n,e]),n===V.RINGING?b.jsx(xL,{}):null},E2=({onCallAccepted:e})=>{const n=zN().filter(r=>r.isCreatedByMe===!1&&r.state.callingState===V.RINGING);return n.length===0?b.jsx("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 text-gray-400 text-sm",children:"Waiting for incoming calls..."}):n.map(r=>b.jsx(Dl,{call:r,children:b.jsx(k2,{onAccepted:()=>e(r)})},r.cid))},T2=({onCancel:e})=>{const{useCallCallingState:t}=at();return t()!==V.RINGING?null:b.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:b.jsx("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl max-w-sm w-full mx-4",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full border-4 border-blue-500 border-t-transparent animate-spin"}),b.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Calling..."}),b.jsx("p",{className:"text-gray-400 mb-6",children:"Waiting for answer"}),b.jsx("button",{onClick:e,className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Cancel Call"})]})})})},x2=({call:e,onCancel:t})=>b.jsx(Dl,{call:e,children:b.jsx(T2,{onCancel:t})}),R2=({client:e,currentUserId:t,onCallStarted:n,onBack:r})=>{const[i,s]=C.useState([""]),[o,a]=C.useState(!1),[l,c]=C.useState(),[d,f]=C.useState();C.useEffect(()=>{if(!d)return;const g=()=>{switch(d.state.callingState){case V.JOINED:n(d);break;case V.LEFT:c("Call ended"),f(void 0),a(!1);break}};g();const y=setInterval(()=>{if(d.state.endedAt){c("Call was ended by other participant"),f(void 0),a(!1),clearInterval(y);return}g()},1e3);return()=>{clearInterval(y)}},[d,n]);const u=()=>{s([...i,""]),c(void 0)},h=g=>{s(i.filter((y,S)=>S!==g)),c(void 0)},m=(g,y)=>{const S=[...i];S[g]=y,s(S),c(void 0)},p=async()=>{if(d)try{await d.leave(),f(void 0),a(!1)}catch(g){console.error("Failed to cancel call:",g)}},v=async()=>{if(!e||i.every(y=>!y.trim()))return;const g=[...new Set(i.map(y=>y.trim()).filter(y=>y&&y!==t))];if(g.length===0){c("Please enter at least one valid user ID");return}a(!0),c(void 0);try{const y=`call-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,S=e.call("default",y);await S.getOrCreate({ring:!0,data:{members:[{user_id:t},...g.map(w=>({user_id:w}))]}}),f(S)}catch(y){console.error("Failed to initiate call:",y),c(y instanceof Error?y.message:"Failed to initiate call"),a(!1)}};return d?b.jsx(x2,{call:d,onCancel:p}):b.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[b.jsxs("div",{className:"flex items-center mb-8",children:[b.jsx("button",{onClick:r,className:"mr-4 text-gray-400 hover:text-white transition-colors",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),b.jsx("h2",{className:"text-2xl font-bold text-white",children:"Ring Users"})]}),b.jsxs("div",{className:"space-y-4",children:[l&&b.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 px-4 py-2 rounded-lg",children:l}),i.map((g,y)=>b.jsxs("div",{className:"flex gap-2",children:[b.jsx("input",{type:"text",value:g,onChange:S=>m(y,S.target.value),placeholder:"Enter user ID",className:"flex-1 bg-gray-800 text-white border border-gray-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.length>1&&b.jsx("button",{onClick:()=>h(y),className:"p-2 text-gray-400 hover:text-red-500 transition-colors","aria-label":"Remove user",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},y)),b.jsx("button",{onClick:u,className:"w-full bg-gray-800 text-gray-400 border border-gray-700 rounded-lg px-4 py-2 hover:bg-gray-700 transition-colors",children:"+ Add Another User"}),b.jsx("div",{className:"flex gap-4 mt-8",children:b.jsx("button",{onClick:v,disabled:o||i.every(g=>!g.trim()),className:"flex-1 bg-blue-600 text-white rounded-lg px-4 py-3 hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?b.jsxs("div",{className:"flex items-center justify-center",children:[b.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Initiating Call..."]}):"Start Call"})})]})]})},_2=({client:e,onCallStarted:t,onBack:n})=>{const[r,i]=C.useState(!0),[s,o]=C.useState(!1),[a,l]=C.useState(),[c,d]=C.useState(),[f,u]=C.useState(),h=async()=>{if(e){i(!0),l(void 0);try{const v=`room-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,g=e.call("default",v);await g.getOrCreate(),d(g);const y=new URL(window.location.href);y.searchParams.delete("userId"),y.searchParams.set("callId",v),u(y.toString()),await navigator.clipboard.writeText(y.toString()),o(!0),setTimeout(()=>o(!1),2e3)}catch(v){console.error("Failed to create room:",v),l(v instanceof Error?v.message:"Failed to create room")}i(!1)}};C.useEffect(()=>{h()},[]);const m=async()=>{if(f)try{await navigator.clipboard.writeText(f),o(!0),setTimeout(()=>o(!1),2e3)}catch(v){console.error("Failed to copy:",v)}},p=async()=>{if(c)try{await c.join({create:!0}),t(c)}catch(v){console.error("Failed to join room:",v),l(v instanceof Error?v.message:"Failed to join room")}};return b.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[b.jsxs("div",{className:"flex items-center mb-8",children:[b.jsx("button",{onClick:n,className:"mr-4 text-gray-400 hover:text-white transition-colors",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),b.jsx("h2",{className:"text-2xl font-bold text-white",children:"Create Room"})]}),b.jsxs("div",{className:"space-y-6",children:[a&&b.jsx("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 px-4 py-2 rounded-lg",children:a}),r?b.jsxs("div",{className:"text-center py-12",children:[b.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),b.jsx("p",{className:"text-gray-300",children:"Creating Room..."})]}):b.jsxs("div",{className:"space-y-6",children:[b.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[b.jsxs("div",{className:"flex justify-between items-center mb-2",children:[b.jsx("p",{className:"text-sm text-gray-400",children:"Room Link:"}),b.jsxs("button",{onClick:m,className:"text-sm text-blue-400 hover:text-blue-300 transition-colors flex items-center gap-1",children:[b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy"]})]}),b.jsx("div",{className:"bg-gray-900 text-gray-300 rounded p-3 break-all font-mono text-sm",children:f})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("button",{onClick:p,className:"bg-blue-600 text-white rounded-lg px-6 py-3 hover:bg-blue-700 transition-colors w-full",children:"Join Room Now"}),b.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Share this link with others to invite them to the room"})]})]}),s&&b.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg animate-fade-in-out",children:"Link copied to clipboard!"})]})]})},I2=({callId:e})=>{const[t,n]=C.useState(!1),r=async()=>{try{const i=new URL(window.location.href);i.searchParams.delete("userId"),i.searchParams.set("callId",e),await navigator.clipboard.writeText(i.toString()),n(!0),setTimeout(()=>n(!1),2e3)}catch(i){console.error("Failed to copy link:",i)}};return b.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[b.jsxs("button",{onClick:r,className:"flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-white px-3 py-2 rounded-lg transition-colors",children:[b.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Share Link"]}),t&&b.jsx("div",{className:"absolute bottom-full right-0 mb-2 bg-green-500 text-white px-4 py-2 rounded shadow-lg animate-fade-in-out",children:"Link copied!"})]})},P2=({call:e,onLeave:t})=>{const n=async()=>{try{e.state.callingState!==V.LEFT&&await e.leave(),t()}catch(r){console.error("Failed to leave call:",r),t()}};return b.jsx(Dl,{call:e,children:b.jsx(O2,{onLeave:n})})},O2=({onLeave:e})=>{const t=je(),{useCallCallingState:n}=at(),r=n();return C.useEffect(()=>{r===V.LEFT&&e()},[r,e]),t?r===V.LEFT?b.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:b.jsx("div",{className:"p-8 text-center",children:b.jsx("p",{className:"text-gray-300",children:"Call ended"})})}):r!==V.JOINED?b.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:b.jsxs("div",{className:"p-8 text-center",children:[b.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),b.jsx("p",{className:"text-gray-300",children:"Joining call..."})]})}):b.jsx(ff,{children:b.jsxs("div",{className:"h-screen flex flex-col bg-gray-900",children:[b.jsx("div",{className:"flex-1 relative",children:b.jsx(Lw,{participantsBarPosition:"bottom"})}),b.jsx("div",{className:"relative z-10",children:b.jsx(kL,{onLeave:e})}),b.jsx(I2,{callId:t.id})]})}):b.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:b.jsxs("div",{className:"p-8 text-center",children:[b.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),b.jsx("p",{className:"text-gray-300",children:"Initializing call..."})]})})},iv="hd8szvscpxvd",N2=()=>{const t=new URLSearchParams(window.location.search).get("userId");if(t)return t;const n=b2(),r=new URL(window.location.href);return r.searchParams.set("userId",n),window.history.replaceState({},"",r.toString()),n};function A2(){const[e]=C.useState(N2),[t,n]=C.useState(),[r,i]=C.useState(!1),[s,o]=C.useState("options"),[a,l]=C.useState(),c=async()=>{try{await navigator.clipboard.writeText(e),i(!0),setTimeout(()=>i(!1),2e3)}catch(u){console.error("Failed to copy:",u)}};if(C.useEffect(()=>{if(!t)return;const h=new URLSearchParams(window.location.search).get("callId");h&&(async()=>{try{const p=t.call("default",h);await p.join({create:!0}),l(p),o("in-call")}catch(p){console.error("Failed to join call from URL:",p)}})()},[t]),C.useEffect(()=>{const u=async()=>{const{token:p}=await fetch("https://pronto.getstream.io/api/auth/create-token?"+new URLSearchParams({api_key:iv,user_id:e})).then(v=>v.json());return p},h={id:e,name:`User-${e.slice(0,6)}`,image:`https://getstream.io/random_svg/?id=${e}`},m=new fr({apiKey:iv,user:h,tokenProvider:u});return n(m),()=>{m.disconnectUser(),n(void 0)}},[e]),!t)return b.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:b.jsxs("div",{className:"p-8 text-center",children:[b.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),b.jsx("p",{className:"text-gray-300",children:"Connecting to Stream..."})]})});const d=u=>{l(u),o("in-call")},f=()=>{l(void 0),o("options");const u=new URL(window.location.href);u.searchParams.delete("callId"),window.history.replaceState({},"",u.toString()),setTimeout(()=>{o("options")},0)};return s==="in-call"&&a?b.jsx(hf,{client:t,children:b.jsx(ff,{children:b.jsx(P2,{call:a,onLeave:f})})}):b.jsx(hf,{client:t,children:b.jsx(ff,{children:b.jsxs("div",{className:"min-h-screen bg-gray-900",children:[s==="ring-users"?b.jsx(R2,{client:t,currentUserId:e,onCallStarted:d,onBack:()=>o("options")}):s==="create-room"?b.jsx(_2,{client:t,currentUserId:e,onCallStarted:d,onBack:()=>o("options")}):b.jsxs(b.Fragment,{children:[b.jsx(C2,{onRingUsers:()=>o("ring-users"),onCreateRoom:()=>o("create-room")}),b.jsx(E2,{onCallAccepted:d})]}),b.jsx(w2,{userId:e,onCopy:c}),r&&b.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg animate-fade-in-out",children:"ID copied to clipboard!"})]})})})}ju.createRoot(document.getElementById("root")).render(b.jsx(A2,{}));export{Xw as R,b as j,C as r};
